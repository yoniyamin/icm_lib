import{r as O,a as _a,R as gs,c as ur,g as $c,b as Dn}from"./vendor-Cx6VpA1G.js";function Qc(s,i){for(var l=0;l<i.length;l++){const d=i[l];if(typeof d!="string"&&!Array.isArray(d)){for(const c in d)if(c!=="default"&&!(c in s)){const h=Object.getOwnPropertyDescriptor(d,c);h&&Object.defineProperty(s,c,h.get?h:{enumerable:!0,get:()=>d[c]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))d(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const x of h.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&d(x)}).observe(document,{childList:!0,subtree:!0});function l(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function d(c){if(c.ep)return;c.ep=!0;const h=l(c);fetch(c.href,h)}})();var Ta={exports:{}},hi={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jc=O,eu=Symbol.for("react.element"),tu=Symbol.for("react.fragment"),nu=Object.prototype.hasOwnProperty,ru=Jc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iu={key:!0,ref:!0,__self:!0,__source:!0};function Oa(s,i,l){var d,c={},h=null,x=null;l!==void 0&&(h=""+l),i.key!==void 0&&(h=""+i.key),i.ref!==void 0&&(x=i.ref);for(d in i)nu.call(i,d)&&!iu.hasOwnProperty(d)&&(c[d]=i[d]);if(s&&s.defaultProps)for(d in i=s.defaultProps,i)c[d]===void 0&&(c[d]=i[d]);return{$$typeof:eu,type:s,key:h,ref:x,props:c,_owner:ru.current}}hi.Fragment=tu;hi.jsx=Oa;hi.jsxs=Oa;Ta.exports=hi;var _=Ta.exports,Na,Io=_a;Na=Io.createRoot,Io.hydrateRoot;function Ra(s,i){return function(){return s.apply(i,arguments)}}const{toString:su}=Object.prototype,{getPrototypeOf:Ls}=Object,gi=(s=>i=>{const l=su.call(i);return s[l]||(s[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),en=s=>(s=s.toLowerCase(),i=>gi(i)===s),xi=s=>i=>typeof i===s,{isArray:$n}=Array,wr=xi("undefined");function ou(s){return s!==null&&!wr(s)&&s.constructor!==null&&!wr(s.constructor)&&Ut(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const Ma=en("ArrayBuffer");function au(s){let i;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?i=ArrayBuffer.isView(s):i=s&&s.buffer&&Ma(s.buffer),i}const lu=xi("string"),Ut=xi("function"),Da=xi("number"),pi=s=>s!==null&&typeof s=="object",cu=s=>s===!0||s===!1,zr=s=>{if(gi(s)!=="object")return!1;const i=Ls(s);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},uu=en("Date"),du=en("File"),fu=en("Blob"),hu=en("FileList"),gu=s=>pi(s)&&Ut(s.pipe),xu=s=>{let i;return s&&(typeof FormData=="function"&&s instanceof FormData||Ut(s.append)&&((i=gi(s))==="formdata"||i==="object"&&Ut(s.toString)&&s.toString()==="[object FormData]"))},pu=en("URLSearchParams"),[mu,wu,bu,Cu]=["ReadableStream","Request","Response","Headers"].map(en),Eu=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ar(s,i,{allOwnKeys:l=!1}={}){if(s===null||typeof s>"u")return;let d,c;if(typeof s!="object"&&(s=[s]),$n(s))for(d=0,c=s.length;d<c;d++)i.call(null,s[d],d,s);else{const h=l?Object.getOwnPropertyNames(s):Object.keys(s),x=h.length;let b;for(d=0;d<x;d++)b=h[d],i.call(null,s[b],b,s)}}function Pa(s,i){i=i.toLowerCase();const l=Object.keys(s);let d=l.length,c;for(;d-- >0;)if(c=l[d],i===c.toLowerCase())return c;return null}const Pn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ba=s=>!wr(s)&&s!==Pn;function xs(){const{caseless:s}=Ba(this)&&this||{},i={},l=(d,c)=>{const h=s&&Pa(i,c)||c;zr(i[h])&&zr(d)?i[h]=xs(i[h],d):zr(d)?i[h]=xs({},d):$n(d)?i[h]=d.slice():i[h]=d};for(let d=0,c=arguments.length;d<c;d++)arguments[d]&&Ar(arguments[d],l);return i}const Au=(s,i,l,{allOwnKeys:d}={})=>(Ar(i,(c,h)=>{l&&Ut(c)?s[h]=Ra(c,l):s[h]=c},{allOwnKeys:d}),s),yu=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),vu=(s,i,l,d)=>{s.prototype=Object.create(i.prototype,d),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:i.prototype}),l&&Object.assign(s.prototype,l)},Su=(s,i,l,d)=>{let c,h,x;const b={};if(i=i||{},s==null)return i;do{for(c=Object.getOwnPropertyNames(s),h=c.length;h-- >0;)x=c[h],(!d||d(x,s,i))&&!b[x]&&(i[x]=s[x],b[x]=!0);s=l!==!1&&Ls(s)}while(s&&(!l||l(s,i))&&s!==Object.prototype);return i},Iu=(s,i,l)=>{s=String(s),(l===void 0||l>s.length)&&(l=s.length),l-=i.length;const d=s.indexOf(i,l);return d!==-1&&d===l},_u=s=>{if(!s)return null;if($n(s))return s;let i=s.length;if(!Da(i))return null;const l=new Array(i);for(;i-- >0;)l[i]=s[i];return l},Tu=(s=>i=>s&&i instanceof s)(typeof Uint8Array<"u"&&Ls(Uint8Array)),Ou=(s,i)=>{const d=(s&&s[Symbol.iterator]).call(s);let c;for(;(c=d.next())&&!c.done;){const h=c.value;i.call(s,h[0],h[1])}},Nu=(s,i)=>{let l;const d=[];for(;(l=s.exec(i))!==null;)d.push(l);return d},Ru=en("HTMLFormElement"),Mu=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(l,d,c){return d.toUpperCase()+c}),_o=(({hasOwnProperty:s})=>(i,l)=>s.call(i,l))(Object.prototype),Du=en("RegExp"),La=(s,i)=>{const l=Object.getOwnPropertyDescriptors(s),d={};Ar(l,(c,h)=>{let x;(x=i(c,h,s))!==!1&&(d[h]=x||c)}),Object.defineProperties(s,d)},Pu=s=>{La(s,(i,l)=>{if(Ut(s)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const d=s[l];if(Ut(d)){if(i.enumerable=!1,"writable"in i){i.writable=!1;return}i.set||(i.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},Bu=(s,i)=>{const l={},d=c=>{c.forEach(h=>{l[h]=!0})};return $n(s)?d(s):d(String(s).split(i)),l},Lu=()=>{},ku=(s,i)=>s!=null&&Number.isFinite(s=+s)?s:i,ts="abcdefghijklmnopqrstuvwxyz",To="0123456789",ka={DIGIT:To,ALPHA:ts,ALPHA_DIGIT:ts+ts.toUpperCase()+To},Fu=(s=16,i=ka.ALPHA_DIGIT)=>{let l="";const{length:d}=i;for(;s--;)l+=i[Math.random()*d|0];return l};function Vu(s){return!!(s&&Ut(s.append)&&s[Symbol.toStringTag]==="FormData"&&s[Symbol.iterator])}const Uu=s=>{const i=new Array(10),l=(d,c)=>{if(pi(d)){if(i.indexOf(d)>=0)return;if(!("toJSON"in d)){i[c]=d;const h=$n(d)?[]:{};return Ar(d,(x,b)=>{const w=l(x,c+1);!wr(w)&&(h[b]=w)}),i[c]=void 0,h}}return d};return l(s,0)},Hu=en("AsyncFunction"),ju=s=>s&&(pi(s)||Ut(s))&&Ut(s.then)&&Ut(s.catch),Fa=((s,i)=>s?setImmediate:i?((l,d)=>(Pn.addEventListener("message",({source:c,data:h})=>{c===Pn&&h===l&&d.length&&d.shift()()},!1),c=>{d.push(c),Pn.postMessage(l,"*")}))(`axios@${Math.random()}`,[]):l=>setTimeout(l))(typeof setImmediate=="function",Ut(Pn.postMessage)),Wu=typeof queueMicrotask<"u"?queueMicrotask.bind(Pn):typeof process<"u"&&process.nextTick||Fa,X={isArray:$n,isArrayBuffer:Ma,isBuffer:ou,isFormData:xu,isArrayBufferView:au,isString:lu,isNumber:Da,isBoolean:cu,isObject:pi,isPlainObject:zr,isReadableStream:mu,isRequest:wu,isResponse:bu,isHeaders:Cu,isUndefined:wr,isDate:uu,isFile:du,isBlob:fu,isRegExp:Du,isFunction:Ut,isStream:gu,isURLSearchParams:pu,isTypedArray:Tu,isFileList:hu,forEach:Ar,merge:xs,extend:Au,trim:Eu,stripBOM:yu,inherits:vu,toFlatObject:Su,kindOf:gi,kindOfTest:en,endsWith:Iu,toArray:_u,forEachEntry:Ou,matchAll:Nu,isHTMLForm:Ru,hasOwnProperty:_o,hasOwnProp:_o,reduceDescriptors:La,freezeMethods:Pu,toObjectSet:Bu,toCamelCase:Mu,noop:Lu,toFiniteNumber:ku,findKey:Pa,global:Pn,isContextDefined:Ba,ALPHABET:ka,generateString:Fu,isSpecCompliantForm:Vu,toJSONObject:Uu,isAsyncFn:Hu,isThenable:ju,setImmediate:Fa,asap:Wu};function ve(s,i,l,d,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",i&&(this.code=i),l&&(this.config=l),d&&(this.request=d),c&&(this.response=c,this.status=c.status?c.status:null)}X.inherits(ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.status}}});const Va=ve.prototype,Ua={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{Ua[s]={value:s}});Object.defineProperties(ve,Ua);Object.defineProperty(Va,"isAxiosError",{value:!0});ve.from=(s,i,l,d,c,h)=>{const x=Object.create(Va);return X.toFlatObject(s,x,function(w){return w!==Error.prototype},b=>b!=="isAxiosError"),ve.call(x,s.message,i,l,d,c),x.cause=s,x.name=s.name,h&&Object.assign(x,h),x};const Gu=null;function ps(s){return X.isPlainObject(s)||X.isArray(s)}function Ha(s){return X.endsWith(s,"[]")?s.slice(0,-2):s}function Oo(s,i,l){return s?s.concat(i).map(function(c,h){return c=Ha(c),!l&&h?"["+c+"]":c}).join(l?".":""):i}function Xu(s){return X.isArray(s)&&!s.some(ps)}const zu=X.toFlatObject(X,{},null,function(i){return/^is[A-Z]/.test(i)});function mi(s,i,l){if(!X.isObject(s))throw new TypeError("target must be an object");i=i||new FormData,l=X.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,M){return!X.isUndefined(M[T])});const d=l.metaTokens,c=l.visitor||A,h=l.dots,x=l.indexes,w=(l.Blob||typeof Blob<"u"&&Blob)&&X.isSpecCompliantForm(i);if(!X.isFunction(c))throw new TypeError("visitor must be a function");function p(R){if(R===null)return"";if(X.isDate(R))return R.toISOString();if(!w&&X.isBlob(R))throw new ve("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(R)||X.isTypedArray(R)?w&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function A(R,T,M){let k=R;if(R&&!M&&typeof R=="object"){if(X.endsWith(T,"{}"))T=d?T:T.slice(0,-2),R=JSON.stringify(R);else if(X.isArray(R)&&Xu(R)||(X.isFileList(R)||X.endsWith(T,"[]"))&&(k=X.toArray(R)))return T=Ha(T),k.forEach(function(G,Y){!(X.isUndefined(G)||G===null)&&i.append(x===!0?Oo([T],Y,h):x===null?T:T+"[]",p(G))}),!1}return ps(R)?!0:(i.append(Oo(M,T,h),p(R)),!1)}const y=[],P=Object.assign(zu,{defaultVisitor:A,convertValue:p,isVisitable:ps});function B(R,T){if(!X.isUndefined(R)){if(y.indexOf(R)!==-1)throw Error("Circular reference detected in "+T.join("."));y.push(R),X.forEach(R,function(k,H){(!(X.isUndefined(k)||k===null)&&c.call(i,k,X.isString(H)?H.trim():H,T,P))===!0&&B(k,T?T.concat(H):[H])}),y.pop()}}if(!X.isObject(s))throw new TypeError("data must be an object");return B(s),i}function No(s){const i={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(d){return i[d]})}function ks(s,i){this._pairs=[],s&&mi(s,this,i)}const ja=ks.prototype;ja.append=function(i,l){this._pairs.push([i,l])};ja.toString=function(i){const l=i?function(d){return i.call(this,d,No)}:No;return this._pairs.map(function(c){return l(c[0])+"="+l(c[1])},"").join("&")};function Yu(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Wa(s,i,l){if(!i)return s;const d=l&&l.encode||Yu,c=l&&l.serialize;let h;if(c?h=c(i,l):h=X.isURLSearchParams(i)?i.toString():new ks(i,l).toString(d),h){const x=s.indexOf("#");x!==-1&&(s=s.slice(0,x)),s+=(s.indexOf("?")===-1?"?":"&")+h}return s}class Ro{constructor(){this.handlers=[]}use(i,l,d){return this.handlers.push({fulfilled:i,rejected:l,synchronous:d?d.synchronous:!1,runWhen:d?d.runWhen:null}),this.handlers.length-1}eject(i){this.handlers[i]&&(this.handlers[i]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(i){X.forEach(this.handlers,function(d){d!==null&&i(d)})}}const Ga={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qu=typeof URLSearchParams<"u"?URLSearchParams:ks,Zu=typeof FormData<"u"?FormData:null,Ku=typeof Blob<"u"?Blob:null,$u={isBrowser:!0,classes:{URLSearchParams:qu,FormData:Zu,Blob:Ku},protocols:["http","https","file","blob","url","data"]},Fs=typeof window<"u"&&typeof document<"u",ms=typeof navigator=="object"&&navigator||void 0,Qu=Fs&&(!ms||["ReactNative","NativeScript","NS"].indexOf(ms.product)<0),Ju=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",e1=Fs&&window.location.href||"http://localhost",t1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fs,hasStandardBrowserEnv:Qu,hasStandardBrowserWebWorkerEnv:Ju,navigator:ms,origin:e1},Symbol.toStringTag,{value:"Module"})),Bt={...t1,...$u};function n1(s,i){return mi(s,new Bt.classes.URLSearchParams,Object.assign({visitor:function(l,d,c,h){return Bt.isNode&&X.isBuffer(l)?(this.append(d,l.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)}},i))}function r1(s){return X.matchAll(/\w+|\[(\w*)]/g,s).map(i=>i[0]==="[]"?"":i[1]||i[0])}function i1(s){const i={},l=Object.keys(s);let d;const c=l.length;let h;for(d=0;d<c;d++)h=l[d],i[h]=s[h];return i}function Xa(s){function i(l,d,c,h){let x=l[h++];if(x==="__proto__")return!0;const b=Number.isFinite(+x),w=h>=l.length;return x=!x&&X.isArray(c)?c.length:x,w?(X.hasOwnProp(c,x)?c[x]=[c[x],d]:c[x]=d,!b):((!c[x]||!X.isObject(c[x]))&&(c[x]=[]),i(l,d,c[x],h)&&X.isArray(c[x])&&(c[x]=i1(c[x])),!b)}if(X.isFormData(s)&&X.isFunction(s.entries)){const l={};return X.forEachEntry(s,(d,c)=>{i(r1(d),c,l,0)}),l}return null}function s1(s,i,l){if(X.isString(s))try{return(i||JSON.parse)(s),X.trim(s)}catch(d){if(d.name!=="SyntaxError")throw d}return(0,JSON.stringify)(s)}const yr={transitional:Ga,adapter:["xhr","http","fetch"],transformRequest:[function(i,l){const d=l.getContentType()||"",c=d.indexOf("application/json")>-1,h=X.isObject(i);if(h&&X.isHTMLForm(i)&&(i=new FormData(i)),X.isFormData(i))return c?JSON.stringify(Xa(i)):i;if(X.isArrayBuffer(i)||X.isBuffer(i)||X.isStream(i)||X.isFile(i)||X.isBlob(i)||X.isReadableStream(i))return i;if(X.isArrayBufferView(i))return i.buffer;if(X.isURLSearchParams(i))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),i.toString();let b;if(h){if(d.indexOf("application/x-www-form-urlencoded")>-1)return n1(i,this.formSerializer).toString();if((b=X.isFileList(i))||d.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return mi(b?{"files[]":i}:i,w&&new w,this.formSerializer)}}return h||c?(l.setContentType("application/json",!1),s1(i)):i}],transformResponse:[function(i){const l=this.transitional||yr.transitional,d=l&&l.forcedJSONParsing,c=this.responseType==="json";if(X.isResponse(i)||X.isReadableStream(i))return i;if(i&&X.isString(i)&&(d&&!this.responseType||c)){const x=!(l&&l.silentJSONParsing)&&c;try{return JSON.parse(i)}catch(b){if(x)throw b.name==="SyntaxError"?ve.from(b,ve.ERR_BAD_RESPONSE,this,null,this.response):b}}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Bt.classes.FormData,Blob:Bt.classes.Blob},validateStatus:function(i){return i>=200&&i<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],s=>{yr.headers[s]={}});const o1=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),a1=s=>{const i={};let l,d,c;return s&&s.split(`
`).forEach(function(x){c=x.indexOf(":"),l=x.substring(0,c).trim().toLowerCase(),d=x.substring(c+1).trim(),!(!l||i[l]&&o1[l])&&(l==="set-cookie"?i[l]?i[l].push(d):i[l]=[d]:i[l]=i[l]?i[l]+", "+d:d)}),i},Mo=Symbol("internals");function dr(s){return s&&String(s).trim().toLowerCase()}function Yr(s){return s===!1||s==null?s:X.isArray(s)?s.map(Yr):String(s)}function l1(s){const i=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let d;for(;d=l.exec(s);)i[d[1]]=d[2];return i}const c1=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function ns(s,i,l,d,c){if(X.isFunction(d))return d.call(this,i,l);if(c&&(i=l),!!X.isString(i)){if(X.isString(d))return i.indexOf(d)!==-1;if(X.isRegExp(d))return d.test(i)}}function u1(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(i,l,d)=>l.toUpperCase()+d)}function d1(s,i){const l=X.toCamelCase(" "+i);["get","set","has"].forEach(d=>{Object.defineProperty(s,d+l,{value:function(c,h,x){return this[d].call(this,i,c,h,x)},configurable:!0})})}class Lt{constructor(i){i&&this.set(i)}set(i,l,d){const c=this;function h(b,w,p){const A=dr(w);if(!A)throw new Error("header name must be a non-empty string");const y=X.findKey(c,A);(!y||c[y]===void 0||p===!0||p===void 0&&c[y]!==!1)&&(c[y||w]=Yr(b))}const x=(b,w)=>X.forEach(b,(p,A)=>h(p,A,w));if(X.isPlainObject(i)||i instanceof this.constructor)x(i,l);else if(X.isString(i)&&(i=i.trim())&&!c1(i))x(a1(i),l);else if(X.isHeaders(i))for(const[b,w]of i.entries())h(w,b,d);else i!=null&&h(l,i,d);return this}get(i,l){if(i=dr(i),i){const d=X.findKey(this,i);if(d){const c=this[d];if(!l)return c;if(l===!0)return l1(c);if(X.isFunction(l))return l.call(this,c,d);if(X.isRegExp(l))return l.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(i,l){if(i=dr(i),i){const d=X.findKey(this,i);return!!(d&&this[d]!==void 0&&(!l||ns(this,this[d],d,l)))}return!1}delete(i,l){const d=this;let c=!1;function h(x){if(x=dr(x),x){const b=X.findKey(d,x);b&&(!l||ns(d,d[b],b,l))&&(delete d[b],c=!0)}}return X.isArray(i)?i.forEach(h):h(i),c}clear(i){const l=Object.keys(this);let d=l.length,c=!1;for(;d--;){const h=l[d];(!i||ns(this,this[h],h,i,!0))&&(delete this[h],c=!0)}return c}normalize(i){const l=this,d={};return X.forEach(this,(c,h)=>{const x=X.findKey(d,h);if(x){l[x]=Yr(c),delete l[h];return}const b=i?u1(h):String(h).trim();b!==h&&delete l[h],l[b]=Yr(c),d[b]=!0}),this}concat(...i){return this.constructor.concat(this,...i)}toJSON(i){const l=Object.create(null);return X.forEach(this,(d,c)=>{d!=null&&d!==!1&&(l[c]=i&&X.isArray(d)?d.join(", "):d)}),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([i,l])=>i+": "+l).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(i){return i instanceof this?i:new this(i)}static concat(i,...l){const d=new this(i);return l.forEach(c=>d.set(c)),d}static accessor(i){const d=(this[Mo]=this[Mo]={accessors:{}}).accessors,c=this.prototype;function h(x){const b=dr(x);d[b]||(d1(c,x),d[b]=!0)}return X.isArray(i)?i.forEach(h):h(i),this}}Lt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);X.reduceDescriptors(Lt.prototype,({value:s},i)=>{let l=i[0].toUpperCase()+i.slice(1);return{get:()=>s,set(d){this[l]=d}}});X.freezeMethods(Lt);function rs(s,i){const l=this||yr,d=i||l,c=Lt.from(d.headers);let h=d.data;return X.forEach(s,function(b){h=b.call(l,h,c.normalize(),i?i.status:void 0)}),c.normalize(),h}function za(s){return!!(s&&s.__CANCEL__)}function Qn(s,i,l){ve.call(this,s??"canceled",ve.ERR_CANCELED,i,l),this.name="CanceledError"}X.inherits(Qn,ve,{__CANCEL__:!0});function Ya(s,i,l){const d=l.config.validateStatus;!l.status||!d||d(l.status)?s(l):i(new ve("Request failed with status code "+l.status,[ve.ERR_BAD_REQUEST,ve.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}function f1(s){const i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return i&&i[1]||""}function h1(s,i){s=s||10;const l=new Array(s),d=new Array(s);let c=0,h=0,x;return i=i!==void 0?i:1e3,function(w){const p=Date.now(),A=d[h];x||(x=p),l[c]=w,d[c]=p;let y=h,P=0;for(;y!==c;)P+=l[y++],y=y%s;if(c=(c+1)%s,c===h&&(h=(h+1)%s),p-x<i)return;const B=A&&p-A;return B?Math.round(P*1e3/B):void 0}}function g1(s,i){let l=0,d=1e3/i,c,h;const x=(p,A=Date.now())=>{l=A,c=null,h&&(clearTimeout(h),h=null),s.apply(null,p)};return[(...p)=>{const A=Date.now(),y=A-l;y>=d?x(p,A):(c=p,h||(h=setTimeout(()=>{h=null,x(c)},d-y)))},()=>c&&x(c)]}const Qr=(s,i,l=3)=>{let d=0;const c=h1(50,250);return g1(h=>{const x=h.loaded,b=h.lengthComputable?h.total:void 0,w=x-d,p=c(w),A=x<=b;d=x;const y={loaded:x,total:b,progress:b?x/b:void 0,bytes:w,rate:p||void 0,estimated:p&&b&&A?(b-x)/p:void 0,event:h,lengthComputable:b!=null,[i?"download":"upload"]:!0};s(y)},l)},Do=(s,i)=>{const l=s!=null;return[d=>i[0]({lengthComputable:l,total:s,loaded:d}),i[1]]},Po=s=>(...i)=>X.asap(()=>s(...i)),x1=Bt.hasStandardBrowserEnv?function(){const i=Bt.navigator&&/(msie|trident)/i.test(Bt.navigator.userAgent),l=document.createElement("a");let d;function c(h){let x=h;return i&&(l.setAttribute("href",x),x=l.href),l.setAttribute("href",x),{href:l.href,protocol:l.protocol?l.protocol.replace(/:$/,""):"",host:l.host,search:l.search?l.search.replace(/^\?/,""):"",hash:l.hash?l.hash.replace(/^#/,""):"",hostname:l.hostname,port:l.port,pathname:l.pathname.charAt(0)==="/"?l.pathname:"/"+l.pathname}}return d=c(window.location.href),function(x){const b=X.isString(x)?c(x):x;return b.protocol===d.protocol&&b.host===d.host}}():function(){return function(){return!0}}(),p1=Bt.hasStandardBrowserEnv?{write(s,i,l,d,c,h){const x=[s+"="+encodeURIComponent(i)];X.isNumber(l)&&x.push("expires="+new Date(l).toGMTString()),X.isString(d)&&x.push("path="+d),X.isString(c)&&x.push("domain="+c),h===!0&&x.push("secure"),document.cookie=x.join("; ")},read(s){const i=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function m1(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function w1(s,i){return i?s.replace(/\/?\/$/,"")+"/"+i.replace(/^\/+/,""):s}function qa(s,i){return s&&!m1(i)?w1(s,i):i}const Bo=s=>s instanceof Lt?{...s}:s;function Ln(s,i){i=i||{};const l={};function d(p,A,y){return X.isPlainObject(p)&&X.isPlainObject(A)?X.merge.call({caseless:y},p,A):X.isPlainObject(A)?X.merge({},A):X.isArray(A)?A.slice():A}function c(p,A,y){if(X.isUndefined(A)){if(!X.isUndefined(p))return d(void 0,p,y)}else return d(p,A,y)}function h(p,A){if(!X.isUndefined(A))return d(void 0,A)}function x(p,A){if(X.isUndefined(A)){if(!X.isUndefined(p))return d(void 0,p)}else return d(void 0,A)}function b(p,A,y){if(y in i)return d(p,A);if(y in s)return d(void 0,p)}const w={url:h,method:h,data:h,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,withXSRFToken:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,beforeRedirect:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:b,headers:(p,A)=>c(Bo(p),Bo(A),!0)};return X.forEach(Object.keys(Object.assign({},s,i)),function(A){const y=w[A]||c,P=y(s[A],i[A],A);X.isUndefined(P)&&y!==b||(l[A]=P)}),l}const Za=s=>{const i=Ln({},s);let{data:l,withXSRFToken:d,xsrfHeaderName:c,xsrfCookieName:h,headers:x,auth:b}=i;i.headers=x=Lt.from(x),i.url=Wa(qa(i.baseURL,i.url),s.params,s.paramsSerializer),b&&x.set("Authorization","Basic "+btoa((b.username||"")+":"+(b.password?unescape(encodeURIComponent(b.password)):"")));let w;if(X.isFormData(l)){if(Bt.hasStandardBrowserEnv||Bt.hasStandardBrowserWebWorkerEnv)x.setContentType(void 0);else if((w=x.getContentType())!==!1){const[p,...A]=w?w.split(";").map(y=>y.trim()).filter(Boolean):[];x.setContentType([p||"multipart/form-data",...A].join("; "))}}if(Bt.hasStandardBrowserEnv&&(d&&X.isFunction(d)&&(d=d(i)),d||d!==!1&&x1(i.url))){const p=c&&h&&p1.read(h);p&&x.set(c,p)}return i},b1=typeof XMLHttpRequest<"u",C1=b1&&function(s){return new Promise(function(l,d){const c=Za(s);let h=c.data;const x=Lt.from(c.headers).normalize();let{responseType:b,onUploadProgress:w,onDownloadProgress:p}=c,A,y,P,B,R;function T(){B&&B(),R&&R(),c.cancelToken&&c.cancelToken.unsubscribe(A),c.signal&&c.signal.removeEventListener("abort",A)}let M=new XMLHttpRequest;M.open(c.method.toUpperCase(),c.url,!0),M.timeout=c.timeout;function k(){if(!M)return;const G=Lt.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),re={data:!b||b==="text"||b==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:G,config:s,request:M};Ya(function(L){l(L),T()},function(L){d(L),T()},re),M=null}"onloadend"in M?M.onloadend=k:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(k)},M.onabort=function(){M&&(d(new ve("Request aborted",ve.ECONNABORTED,s,M)),M=null)},M.onerror=function(){d(new ve("Network Error",ve.ERR_NETWORK,s,M)),M=null},M.ontimeout=function(){let Y=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const re=c.transitional||Ga;c.timeoutErrorMessage&&(Y=c.timeoutErrorMessage),d(new ve(Y,re.clarifyTimeoutError?ve.ETIMEDOUT:ve.ECONNABORTED,s,M)),M=null},h===void 0&&x.setContentType(null),"setRequestHeader"in M&&X.forEach(x.toJSON(),function(Y,re){M.setRequestHeader(re,Y)}),X.isUndefined(c.withCredentials)||(M.withCredentials=!!c.withCredentials),b&&b!=="json"&&(M.responseType=c.responseType),p&&([P,R]=Qr(p,!0),M.addEventListener("progress",P)),w&&M.upload&&([y,B]=Qr(w),M.upload.addEventListener("progress",y),M.upload.addEventListener("loadend",B)),(c.cancelToken||c.signal)&&(A=G=>{M&&(d(!G||G.type?new Qn(null,s,M):G),M.abort(),M=null)},c.cancelToken&&c.cancelToken.subscribe(A),c.signal&&(c.signal.aborted?A():c.signal.addEventListener("abort",A)));const H=f1(c.url);if(H&&Bt.protocols.indexOf(H)===-1){d(new ve("Unsupported protocol "+H+":",ve.ERR_BAD_REQUEST,s));return}M.send(h||null)})},E1=(s,i)=>{const{length:l}=s=s?s.filter(Boolean):[];if(i||l){let d=new AbortController,c;const h=function(p){if(!c){c=!0,b();const A=p instanceof Error?p:this.reason;d.abort(A instanceof ve?A:new Qn(A instanceof Error?A.message:A))}};let x=i&&setTimeout(()=>{x=null,h(new ve(`timeout ${i} of ms exceeded`,ve.ETIMEDOUT))},i);const b=()=>{s&&(x&&clearTimeout(x),x=null,s.forEach(p=>{p.unsubscribe?p.unsubscribe(h):p.removeEventListener("abort",h)}),s=null)};s.forEach(p=>p.addEventListener("abort",h));const{signal:w}=d;return w.unsubscribe=()=>X.asap(b),w}},A1=function*(s,i){let l=s.byteLength;if(l<i){yield s;return}let d=0,c;for(;d<l;)c=d+i,yield s.slice(d,c),d=c},y1=async function*(s,i){for await(const l of v1(s))yield*A1(l,i)},v1=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const i=s.getReader();try{for(;;){const{done:l,value:d}=await i.read();if(l)break;yield d}}finally{await i.cancel()}},Lo=(s,i,l,d)=>{const c=y1(s,i);let h=0,x,b=w=>{x||(x=!0,d&&d(w))};return new ReadableStream({async pull(w){try{const{done:p,value:A}=await c.next();if(p){b(),w.close();return}let y=A.byteLength;if(l){let P=h+=y;l(P)}w.enqueue(new Uint8Array(A))}catch(p){throw b(p),p}},cancel(w){return b(w),c.return()}},{highWaterMark:2})},wi=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ka=wi&&typeof ReadableStream=="function",S1=wi&&(typeof TextEncoder=="function"?(s=>i=>s.encode(i))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),$a=(s,...i)=>{try{return!!s(...i)}catch{return!1}},I1=Ka&&$a(()=>{let s=!1;const i=new Request(Bt.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!i}),ko=64*1024,ws=Ka&&$a(()=>X.isReadableStream(new Response("").body)),Jr={stream:ws&&(s=>s.body)};wi&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(i=>{!Jr[i]&&(Jr[i]=X.isFunction(s[i])?l=>l[i]():(l,d)=>{throw new ve(`Response type '${i}' is not supported`,ve.ERR_NOT_SUPPORT,d)})})})(new Response);const _1=async s=>{if(s==null)return 0;if(X.isBlob(s))return s.size;if(X.isSpecCompliantForm(s))return(await new Request(Bt.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(X.isArrayBufferView(s)||X.isArrayBuffer(s))return s.byteLength;if(X.isURLSearchParams(s)&&(s=s+""),X.isString(s))return(await S1(s)).byteLength},T1=async(s,i)=>{const l=X.toFiniteNumber(s.getContentLength());return l??_1(i)},O1=wi&&(async s=>{let{url:i,method:l,data:d,signal:c,cancelToken:h,timeout:x,onDownloadProgress:b,onUploadProgress:w,responseType:p,headers:A,withCredentials:y="same-origin",fetchOptions:P}=Za(s);p=p?(p+"").toLowerCase():"text";let B=E1([c,h&&h.toAbortSignal()],x),R;const T=B&&B.unsubscribe&&(()=>{B.unsubscribe()});let M;try{if(w&&I1&&l!=="get"&&l!=="head"&&(M=await T1(A,d))!==0){let re=new Request(i,{method:"POST",body:d,duplex:"half"}),$;if(X.isFormData(d)&&($=re.headers.get("content-type"))&&A.setContentType($),re.body){const[L,K]=Do(M,Qr(Po(w)));d=Lo(re.body,ko,L,K)}}X.isString(y)||(y=y?"include":"omit");const k="credentials"in Request.prototype;R=new Request(i,{...P,signal:B,method:l.toUpperCase(),headers:A.normalize().toJSON(),body:d,duplex:"half",credentials:k?y:void 0});let H=await fetch(R);const G=ws&&(p==="stream"||p==="response");if(ws&&(b||G&&T)){const re={};["status","statusText","headers"].forEach(z=>{re[z]=H[z]});const $=X.toFiniteNumber(H.headers.get("content-length")),[L,K]=b&&Do($,Qr(Po(b),!0))||[];H=new Response(Lo(H.body,ko,L,()=>{K&&K(),T&&T()}),re)}p=p||"text";let Y=await Jr[X.findKey(Jr,p)||"text"](H,s);return!G&&T&&T(),await new Promise((re,$)=>{Ya(re,$,{data:Y,headers:Lt.from(H.headers),status:H.status,statusText:H.statusText,config:s,request:R})})}catch(k){throw T&&T(),k&&k.name==="TypeError"&&/fetch/i.test(k.message)?Object.assign(new ve("Network Error",ve.ERR_NETWORK,s,R),{cause:k.cause||k}):ve.from(k,k&&k.code,s,R)}}),bs={http:Gu,xhr:C1,fetch:O1};X.forEach(bs,(s,i)=>{if(s){try{Object.defineProperty(s,"name",{value:i})}catch{}Object.defineProperty(s,"adapterName",{value:i})}});const Fo=s=>`- ${s}`,N1=s=>X.isFunction(s)||s===null||s===!1,Qa={getAdapter:s=>{s=X.isArray(s)?s:[s];const{length:i}=s;let l,d;const c={};for(let h=0;h<i;h++){l=s[h];let x;if(d=l,!N1(l)&&(d=bs[(x=String(l)).toLowerCase()],d===void 0))throw new ve(`Unknown adapter '${x}'`);if(d)break;c[x||"#"+h]=d}if(!d){const h=Object.entries(c).map(([b,w])=>`adapter ${b} `+(w===!1?"is not supported by the environment":"is not available in the build"));let x=i?h.length>1?`since :
`+h.map(Fo).join(`
`):" "+Fo(h[0]):"as no adapter specified";throw new ve("There is no suitable adapter to dispatch the request "+x,"ERR_NOT_SUPPORT")}return d},adapters:bs};function is(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Qn(null,s)}function Vo(s){return is(s),s.headers=Lt.from(s.headers),s.data=rs.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),Qa.getAdapter(s.adapter||yr.adapter)(s).then(function(d){return is(s),d.data=rs.call(s,s.transformResponse,d),d.headers=Lt.from(d.headers),d},function(d){return za(d)||(is(s),d&&d.response&&(d.response.data=rs.call(s,s.transformResponse,d.response),d.response.headers=Lt.from(d.response.headers))),Promise.reject(d)})}const Ja="1.7.7",Vs={};["object","boolean","number","function","string","symbol"].forEach((s,i)=>{Vs[s]=function(d){return typeof d===s||"a"+(i<1?"n ":" ")+s}});const Uo={};Vs.transitional=function(i,l,d){function c(h,x){return"[Axios v"+Ja+"] Transitional option '"+h+"'"+x+(d?". "+d:"")}return(h,x,b)=>{if(i===!1)throw new ve(c(x," has been removed"+(l?" in "+l:"")),ve.ERR_DEPRECATED);return l&&!Uo[x]&&(Uo[x]=!0,console.warn(c(x," has been deprecated since v"+l+" and will be removed in the near future"))),i?i(h,x,b):!0}};function R1(s,i,l){if(typeof s!="object")throw new ve("options must be an object",ve.ERR_BAD_OPTION_VALUE);const d=Object.keys(s);let c=d.length;for(;c-- >0;){const h=d[c],x=i[h];if(x){const b=s[h],w=b===void 0||x(b,h,s);if(w!==!0)throw new ve("option "+h+" must be "+w,ve.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new ve("Unknown option "+h,ve.ERR_BAD_OPTION)}}const Cs={assertOptions:R1,validators:Vs},In=Cs.validators;class Bn{constructor(i){this.defaults=i,this.interceptors={request:new Ro,response:new Ro}}async request(i,l){try{return await this._request(i,l)}catch(d){if(d instanceof Error){let c;Error.captureStackTrace?Error.captureStackTrace(c={}):c=new Error;const h=c.stack?c.stack.replace(/^.+\n/,""):"";try{d.stack?h&&!String(d.stack).endsWith(h.replace(/^.+\n.+\n/,""))&&(d.stack+=`
`+h):d.stack=h}catch{}}throw d}}_request(i,l){typeof i=="string"?(l=l||{},l.url=i):l=i||{},l=Ln(this.defaults,l);const{transitional:d,paramsSerializer:c,headers:h}=l;d!==void 0&&Cs.assertOptions(d,{silentJSONParsing:In.transitional(In.boolean),forcedJSONParsing:In.transitional(In.boolean),clarifyTimeoutError:In.transitional(In.boolean)},!1),c!=null&&(X.isFunction(c)?l.paramsSerializer={serialize:c}:Cs.assertOptions(c,{encode:In.function,serialize:In.function},!0)),l.method=(l.method||this.defaults.method||"get").toLowerCase();let x=h&&X.merge(h.common,h[l.method]);h&&X.forEach(["delete","get","head","post","put","patch","common"],R=>{delete h[R]}),l.headers=Lt.concat(x,h);const b=[];let w=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(l)===!1||(w=w&&T.synchronous,b.unshift(T.fulfilled,T.rejected))});const p=[];this.interceptors.response.forEach(function(T){p.push(T.fulfilled,T.rejected)});let A,y=0,P;if(!w){const R=[Vo.bind(this),void 0];for(R.unshift.apply(R,b),R.push.apply(R,p),P=R.length,A=Promise.resolve(l);y<P;)A=A.then(R[y++],R[y++]);return A}P=b.length;let B=l;for(y=0;y<P;){const R=b[y++],T=b[y++];try{B=R(B)}catch(M){T.call(this,M);break}}try{A=Vo.call(this,B)}catch(R){return Promise.reject(R)}for(y=0,P=p.length;y<P;)A=A.then(p[y++],p[y++]);return A}getUri(i){i=Ln(this.defaults,i);const l=qa(i.baseURL,i.url);return Wa(l,i.params,i.paramsSerializer)}}X.forEach(["delete","get","head","options"],function(i){Bn.prototype[i]=function(l,d){return this.request(Ln(d||{},{method:i,url:l,data:(d||{}).data}))}});X.forEach(["post","put","patch"],function(i){function l(d){return function(h,x,b){return this.request(Ln(b||{},{method:i,headers:d?{"Content-Type":"multipart/form-data"}:{},url:h,data:x}))}}Bn.prototype[i]=l(),Bn.prototype[i+"Form"]=l(!0)});class Us{constructor(i){if(typeof i!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(h){l=h});const d=this;this.promise.then(c=>{if(!d._listeners)return;let h=d._listeners.length;for(;h-- >0;)d._listeners[h](c);d._listeners=null}),this.promise.then=c=>{let h;const x=new Promise(b=>{d.subscribe(b),h=b}).then(c);return x.cancel=function(){d.unsubscribe(h)},x},i(function(h,x,b){d.reason||(d.reason=new Qn(h,x,b),l(d.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]}unsubscribe(i){if(!this._listeners)return;const l=this._listeners.indexOf(i);l!==-1&&this._listeners.splice(l,1)}toAbortSignal(){const i=new AbortController,l=d=>{i.abort(d)};return this.subscribe(l),i.signal.unsubscribe=()=>this.unsubscribe(l),i.signal}static source(){let i;return{token:new Us(function(c){i=c}),cancel:i}}}function M1(s){return function(l){return s.apply(null,l)}}function D1(s){return X.isObject(s)&&s.isAxiosError===!0}const Es={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Es).forEach(([s,i])=>{Es[i]=s});function el(s){const i=new Bn(s),l=Ra(Bn.prototype.request,i);return X.extend(l,Bn.prototype,i,{allOwnKeys:!0}),X.extend(l,i,null,{allOwnKeys:!0}),l.create=function(c){return el(Ln(s,c))},l}const De=el(yr);De.Axios=Bn;De.CanceledError=Qn;De.CancelToken=Us;De.isCancel=za;De.VERSION=Ja;De.toFormData=mi;De.AxiosError=ve;De.Cancel=De.CanceledError;De.all=function(i){return Promise.all(i)};De.spread=M1;De.isAxiosError=D1;De.mergeConfig=Ln;De.AxiosHeaders=Lt;De.formToJSON=s=>Xa(X.isHTMLForm(s)?new FormData(s):s);De.getAdapter=Qa.getAdapter;De.HttpStatusCode=Es;De.default=De;const vr="https://religious-cherianne-dbprops-ef8ee171.koyeb.app",P1=async s=>{try{return(await De.post(`${vr}/api/members`,s)).data}catch{throw new Error("Failed to add member.")}},tl=async()=>{try{return(await De.get(`${vr}/api/members`)).data}catch(s){throw console.error("Error fetching members:",s),s}},B1=async(s="desc")=>{try{return(await De.get(`${vr}/api/books?order_by=${s}`)).data}catch(i){throw console.error("Error fetching books:",i),i}},L1=async s=>{try{return(await De.post(`${vr}/api/books`,s,{headers:{"Content-Type":"application/json"}})).data}catch(i){throw console.error("Error adding book:",i),new Error("Failed to add book.")}},k1=async s=>{try{const i=await De.get(`${vr}/api/qr_codes/${s}`,{responseType:"blob"}),l=window.URL.createObjectURL(new Blob([i.data])),d=document.createElement("a");d.href=l,d.setAttribute("download",s),document.body.appendChild(d),d.click(),d.remove()}catch(i){throw console.error("Error downloading QR code:",i),i}},nl=O.createContext(),F1=({children:s})=>{const[i,l]=O.useState("he"),d=()=>{l(c=>c==="en"?"he":"en")};return _.jsx(nl.Provider,{value:{language:i,setLanguage:l,toggleLanguage:d},children:s})},Sr=()=>O.useContext(nl),V1={app_title:"The Library of the Israeli Community of Madrid",title:"Book Title",author:"Author",description:"Description",year_of_publication:"Year of Publication",cover_type:"Cover Type",pages:"Pages",borrowing_child:"Borrowing Child's Name",borrowed_by:"Borrowed By",borrow:"Borrow Book",delivery_status:"Delivery Status",delivering_parent:"Delivering Parent",recommended_age:"Recommended Age",borrow_date:"Borrow Date",return_date:"Return Date",NotReturned:"Not Returned",add_book_label:"Add New Book",books:"Books",members:"Members",loans:"Loans",ShowAllLoans:"Show History",Hide_Details:"Hide Details",More_Details:"More Details",loan_status:"Availability",sort_by:"Sort By",ascending:"Ascending",descending:"Descending",Hide_Add_Book:"Hide Add Book",Add_Book:"Add Book",return:"Return Book",Select_Book:"Select Book",Select_Book_State:"Select Book State",ScanQR:"Scan QR Code",download_qr_code:"Download QR Code",SendReminders:"Send Reminders",last_reminder:"last reminder at",error_generating_report:"Failed to generate report. Please try again.",reports:"Reports",generate_report_button:"Generate report",select_borrower:"Select Borrower",add_member_button:"Add Member",close_add_member_button:"Close Add Member",add_member_form_title:"Add New Member",search_placeholder:"Search members by name",members_list_title:"Library Members",no_members_found:"No members found",parent_name_placeholder:"Parent's Name",kid_name_placeholder:"Kid's Name",email_placeholder:"Email Address",error_parent_name_required:"Parent's name is required.",error_kid_name_required:"Kid's name is required.",error_email_required:"Email address is required.",error_email_invalid:"Invalid email address.",success_member_added:"Member added successfully!",parent_name_label:"Parent Name",kid_name_label:"Child Name",email_label:"Email",inventory_list_title:"Library Inventory",add_book_button:"Add Book",close_add_book_button:"Close Add Book",search_books_placeholder:"Search books by title",no_books_found:"No books found",placeholder_book_title:"Enter Book Title",placeholder_book_author:"Enter Author Name",placeholder_book_description:"Enter Description",placeholder_book_year:"Enter Year of Publication",placeholder_book_pages:"Enter Number of Pages",placeholder_book_recommended_age:"Enter Recommended Age",select_condition:"Select Condition",select_loan_status:"Select loan status",select_parent:"Select Parent",select_cover_type:"format",soft_cover:"Soft Cover",hard_cover:"Hard Cover",rigid_pages:"Rigid Pages",battery_book:"Book with Battery",new:"New",good:"Good",worn:"Worn",available:"Available",borrowed:"Borrowed",error_book_title_required:"Book title is required.",error_book_author_required:"Author name is required.",error_book_description_required:"Description is required.",error_book_year_required:"Year of publication is required.",error_book_pages_required:"Number of pages is required.",inventory_report:"Inventory Report",loans_report:"Loans Report",select_report_type:"Select Report Type",report_options:"Report Options",select_field:"Select Field",book_title:"Book Title",id:"ID",order:"Order",include_history:"Include Historical Loans",include_borrowed:"Include Currently Borrowed Books"},U1={app_title:"ספריית הקהילה הישראלית במדריד",title:"שם הספר",author:"שם המחבר",description:"תיאור",year_of_publication:"שנת הוצאה",cover_type:"סוג כריכה",pages:"עמודים",borrowing_child:"שם הילד המשאיל",borrowed_by:"הושאל על ידי",borrow:"השאל ספר",delivery_status:"מצב מסירה",delivering_parent:"שם ההורה המוסר",recommended_age:"גיל מומלץ",borrow_date:"תאריך השאלה",return_date:"תאריך החזרה",NotReturned:"לא הוחזר",add_book_label:"הוסף ספר חדש",books:"ספרים",members:"חברים",loans:"השאלות",ShowAllLoans:"הצג היסטוריה",Hide_Details:"הסתר פרטים",More_Details:"עוד פרטים",loan_status:"זמינות",sort_by:"סדר",ascending:"עולה",descending:"יורד",Hide_Add_Book:"הסתר הוספת ספר",Add_Book:"הוסף ספר",return:"החזר ספר",Select_Book:"בחר ספר",Select_Book_State:"מצב הספר",ScanQR:"סרוק ברקוד",download_qr_code:"הורד ברקוד",SendReminders:"שלח תזכורת",last_reminder:"תזכורת אחרונה ב",error_generating_report:"הפקת הדוח נכשלה, נסה שנית בבקשה.",reports:"דוחות",generate_report_button:"הפק דוח",select_borrower:"בחר משאיל",add_member_button:"הוסף חבר",close_add_member_button:"סגור הוספת חבר",add_member_form_title:"הוספת חבר חדש",search_placeholder:"חפש חברים לפי שם",members_list_title:"חברי הספרייה",no_members_found:"לא נמצאו חברים",parent_name_placeholder:"שם ההורה",kid_name_placeholder:"שם הילד",email_placeholder:"כתובת אימייל",error_parent_name_required:"נדרש שם הורה.",error_kid_name_required:"נדרש שם ילד.",error_email_required:"נדרשת כתובת אימייל.",error_email_invalid:"כתובת אימייל לא תקינה.",success_member_added:"החבר נוסף בהצלחה!",parent_name_label:"שם ההורה",kid_name_label:"שם הילד",email_label:"אימייל",inventory_list_title:"מלאי הספרייה",add_book_button:"הוסף ספר",close_add_book_button:"סגור הוספת ספר",search_books_placeholder:"חפש ספרים לפי שם",no_books_found:"לא נמצאו ספרים",placeholder_book_title:"הכנס שם הספר",placeholder_book_author:"הכנס שם המחבר",placeholder_book_description:"הכנס תיאור",placeholder_book_year:"הכנס שנת הוצאה",placeholder_book_pages:"הכנס מספר עמודים",placeholder_book_recommended_age:"הכנס גיל מומלץ",select_condition:"מצב מסירה",select_loan_status:"זמינות",select_parent:"שם ההורה",select_cover_type:"פורמט",soft_cover:"כריכה רכה",hard_cover:"כריכה קשה",rigid_pages:"עמודים קשיחים",battery_book:"ספר עם בטריה",new:"חדש",good:"טוב",worn:"בלוי",available:"זמין",borrowed:"מושאל",error_book_title_required:"נדרש שם ספר.",error_book_author_required:"נדרש שם מחבר.",error_book_description_required:"נדרש תיאור.",error_book_year_required:"נדרשת שנת הוצאה.",error_book_pages_required:"נדרש מספר עמודים.",inventory_report:"דוח מלאי",loans_report:"דוח השאלות",select_report_type:"בחר סוג דוח",report_options:"אפשרויות דוח",select_field:"בחר שדה",book_title:"כותרת הספר",id:"מזהה",order:"סדר",include_history:"כלול היסטורית השאלות",include_borrowed:"כלול ספרים מושאלים"},Ir=s=>s==="he"?U1:V1,H1=()=>{const[s,i]=O.useState([]),[l,d]=O.useState("desc"),[c,h]=O.useState(""),[x,b]=O.useState(""),[w,p]=O.useState(""),[A,y]=O.useState(""),[P,B]=O.useState(""),[R,T]=O.useState(""),[M,k]=O.useState(""),[H,G]=O.useState(""),[Y]=O.useState("available"),[re,$]=O.useState(""),[L,K]=O.useState([]),[z,Ve]=O.useState(!1),[Ae,ae]=O.useState(""),[Ee,Te]=O.useState({}),{language:U,toggleLanguage:pe}=Sr(),J=Ir(U),Xe=[{value:"כריכה רכה",label:J.soft_cover},{value:"כריכה קשה",label:J.hard_cover},{value:"עמודים קשיחים",label:J.rigid_pages},{value:"ספר עם בטריה",label:J.battery_book}],rt=[{value:"new",label:J.new},{value:"good",label:J.good},{value:"worn",label:J.worn}];O.useEffect(()=>{Ce(),Kt()},[l]);const Ce=async()=>{try{const te=await B1(l);Array.isArray(te)?i(te):(console.error("Unexpected response format:",te),i([]))}catch(te){console.error("Failed to load books:",te),i([])}},Kt=async()=>{try{const te=await tl();K(te)}catch(te){console.error("Error fetching members:",te)}},Oe=async te=>{te.preventDefault();try{await L1({title:c,author:x,description:w,year_of_publication:A,pages:P,cover_type:R,book_condition:M,recommended_age:H,loan_status:Y,delivering_parent:re}),h(""),b(""),p(""),y(""),B(""),T(Xe[0].value),k(rt[0].value),$(""),Ve(!1),await Ce()}catch(oe){console.error("Error adding book:",oe)}},Qe=te=>{Te(oe=>({...oe,[te]:!oe[te]}))},Ue=te=>{k1(te).then(()=>console.log("QR Code downloaded successfully")).catch(oe=>console.error("Failed to download QR Code:",oe))};return _.jsxs("div",{className:"w-full max-w-md mx-auto",children:[_.jsx("button",{className:"w-12 h-12 flex items-center justify-center rounded-full border border-teal-500 bg-white text-teal-500 shadow-md absolute top-4 left-4",onClick:pe,children:U==="en"?"HE":"EN"}),_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("input",{id:"search_by_name",type:"text",placeholder:J.search_books_placeholder,value:Ae,onChange:te=>ae(te.target.value),className:"flex-1 mr-4 border border-gray-300 rounded-md py-2 px-4"}),_.jsxs("div",{className:"sorting-container",children:[_.jsxs("label",{htmlFor:"orderBy",className:"mr-2",children:[":",J.sort_by]}),_.jsxs("select",{id:"orderBy",value:l,onChange:te=>d(te.target.value),className:"border rounded p-1",children:[_.jsx("option",{value:"desc",children:J.descending}),_.jsx("option",{value:"asc",children:J.ascending})]})]})]}),_.jsx("button",{onClick:()=>Ve(!z),className:"w-full bg-blue-500 text-white font-semibold py-2 rounded-md hover:bg-blue-600 transition mb-4",children:z?`- ${J.close_add_book_button}`:`+ ${J.add_book_button}`}),z&&_.jsxs("form",{onSubmit:Oe,className:"mb-4",children:[_.jsx("input",{type:"text",value:c,onChange:te=>h(te.target.value),placeholder:J.placeholder_book_title,className:"input mb-2 w-full border border-gray-300 rounded-md py-2 px-4"}),_.jsx("input",{type:"text",value:x,onChange:te=>b(te.target.value),placeholder:J.placeholder_book_author,className:"input mb-2 w-full border border-gray-300 rounded-md py-2 px-4"}),_.jsx("textarea",{value:w,onChange:te=>p(te.target.value),onInput:te=>{te.target.style.height="auto",te.target.style.height=`${te.target.scrollHeight}px`},placeholder:J.placeholder_book_description,className:"input mb-2 w-full border border-gray-300 rounded-md py-2 px-4"}),_.jsx("input",{type:"number",value:A,onChange:te=>y(te.target.value),placeholder:J.placeholder_book_year,className:"input mb-2 w-full border border-gray-300 rounded-md py-2 px-4"}),_.jsxs("select",{value:R,onChange:te=>T(te.target.value),className:"input mb-2 w-full border border-gray-300 rounded-md py-2 px-4",children:[_.jsx("option",{value:"",children:J.select_cover_type}),Xe.map(te=>_.jsx("option",{value:te.value,children:te.label},te.value))]}),_.jsx("input",{type:"number",value:P,onChange:te=>B(te.target.value),placeholder:J.placeholder_book_pages,className:"input mb-2 w-full border border-gray-300 rounded-md py-2 px-4"}),_.jsx("input",{type:"number",value:H,onChange:te=>G(te.target.value),placeholder:J.placeholder_book_recommended_age,className:"input mb-2 w-full border border-gray-300 rounded-md py-2 px-4"}),_.jsxs("select",{value:M,onChange:te=>k(te.target.value),className:"input mb-2 w-full border border-gray-300 rounded-md py-2 px-4",children:[_.jsx("option",{value:"",children:J.select_condition}),rt.map(te=>_.jsx("option",{value:te.value,children:te.label},te.value))]}),_.jsxs("select",{value:re,onChange:te=>$(te.target.value),className:"input mb-2 w-full border border-gray-300 rounded-md py-2 px-4",children:[_.jsx("option",{value:"",children:J.select_parent}),L.map(te=>_.jsx("option",{value:te.parent_name,children:te.parent_name},te.id))]}),_.jsx("button",{type:"submit",className:"w-full bg-green-500 text-white font-semibold py-2 rounded-md hover:bg-green-600 transition",children:J.add_book_button})]}),_.jsx("div",{className:"overflow-y-auto max-h-screen border-t pt-4",children:s.filter(te=>te.title.toLowerCase().includes(Ae.toLowerCase())||te.author.toLowerCase().includes(Ae.toLowerCase())).map(te=>_.jsxs("div",{className:"bg-gray-50 shadow-sm rounded-lg p-4 mb-2",children:[_.jsx("h2",{className:"font-bold text-gray-800",children:te.title}),_.jsx("p",{className:"text-sm text-gray-500",children:te.author}),_.jsxs("p",{className:"text-sm",children:[J.loan_status,":"," ",_.jsx("span",{className:te.loan_status==="available"?"text-green-500":"text-red-500",children:te.loan_status==="borrowed"?J.borrowed:J.available}),te.loan_status==="borrowed"&&_.jsxs("span",{children:[" ",J.borrowing_child,": ",te.borrowing_child]})]}),_.jsx("p",{children:_.jsx("button",{onClick:()=>Ue(`${te.qr_code}.png`),className:"text-blue-500 text-sm mt-2 hover:underline",children:J.download_qr_code})}),_.jsx("button",{onClick:()=>Qe(te.qr_code),className:"text-blue-500 text-sm mt-2 hover:underline",children:Ee[te.qr_code]?J.Hide_Details:J.More_Details}),Ee[te.qr_code]&&_.jsxs("div",{className:"mt-2 text-gray-600",children:[_.jsxs("p",{children:[_.jsxs("strong",{children:[J.description,":"]})," ",te.description||"N/A"]}),_.jsxs("p",{children:[_.jsxs("strong",{children:[J.year_of_publication,":"]})," ",te.year_of_publication||"N/A"]}),_.jsxs("p",{children:[_.jsxs("strong",{children:[J.cover_type,":"]})," ",te.cover_type||"N/A"]}),_.jsxs("p",{children:[_.jsxs("strong",{children:[J.pages,":"]})," ",te.pages||"N/A"]}),_.jsxs("p",{children:[_.jsxs("strong",{children:[J.recommended_age,":"]})," ",te.recommended_age||"N/A"]}),_.jsxs("p",{children:[_.jsxs("strong",{children:[J.select_condition,":"]})," ",te.book_condition||"N/A"]}),_.jsxs("p",{children:[_.jsxs("strong",{children:[J.delivering_parent,":"]})," ",te.delivering_parent||"N/A"]})]})]},te.qr_code))})]})};function j1(){const[s,i]=O.useState([]),[l,d]=O.useState(""),[c,h]=O.useState(""),[x,b]=O.useState(""),[w,p]=O.useState(!1),[A,y]=O.useState(""),[P,B]=O.useState({}),[R,T]=O.useState(""),{language:M,toggleLanguage:k}=Sr(),H=Ir(M),G=()=>{const L={};return l.trim()||(L.parentName=H.error_parent_name_required),c.trim()||(L.kidName=H.error_kid_name_required),x.trim()?/\S+@\S+\.\S+/.test(x)||(L.email=H.error_email_invalid):L.email=H.error_email_required,B(L),Object.keys(L).length===0},Y=async L=>{if(L.preventDefault(),!!G())try{await P1({parent_name:l,kid_name:c,email:x}),d(""),h(""),b(""),B({}),T(H.success_member_added),await re()}catch(K){console.error("Error adding member:",K),T("")}},re=async()=>{try{const L=await tl();Array.isArray(L)?i(L):(console.error("Unexpected response format:",L),i([]))}catch(L){console.error("Failed to load members:",L),i([])}};O.useEffect(()=>{re()},[]);const $=Array.isArray(s)?s.filter(L=>L.parent_name.toLowerCase().includes(A.toLowerCase())||L.kid_name.toLowerCase().includes(A.toLowerCase())):[];return _.jsxs("div",{className:"w-full max-w-md mx-auto",children:[_.jsx("button",{className:"w-12 h-12 flex items-center justify-center rounded-full border border-teal-500 bg-white text-teal-500 shadow-md absolute top-4 left-4",onClick:k,children:M==="en"?"HE":"EN"}),_.jsx("h1",{className:"text-xl font-semibold mb-4",children:H.members_list_title}),_.jsx("button",{onClick:()=>p(!w),className:"w-full bg-blue-500 text-white font-semibold py-2 rounded-md hover:bg-blue-600 transition mb-4",children:w?`- ${H.close_add_member_button}`:`+ ${H.add_member_button}`}),w&&_.jsxs("form",{onSubmit:Y,className:"mb-4",children:[_.jsx("input",{type:"text",placeholder:H.parent_name_placeholder,value:l,onChange:L=>d(L.target.value),className:"input mb-2 w-full border border-gray-300 rounded-md py-2 px-4"}),P.parentName&&_.jsx("p",{className:"text-red-500 text-sm",children:P.parentName}),_.jsx("input",{type:"text",placeholder:H.kid_name_placeholder,value:c,onChange:L=>h(L.target.value),className:"input mb-2 w-full border border-gray-300 rounded-md py-2 px-4"}),P.kidName&&_.jsx("p",{className:"text-red-500 text-sm",children:P.kidName}),_.jsx("input",{type:"email",placeholder:H.email_placeholder,value:x,onChange:L=>b(L.target.value),className:"input mb-2 w-full border border-gray-300 rounded-md py-2 px-4"}),P.email&&_.jsx("p",{className:"text-red-500 text-sm",children:P.email}),_.jsx("button",{type:"submit",className:"w-full bg-green-500 text-white font-semibold py-2 rounded-md hover:bg-green-600 transition",children:H.add_member_button}),R&&_.jsx("p",{className:"text-green-500 text-sm mt-2",children:R})]}),_.jsx("input",{type:"text",placeholder:H.search_placeholder,value:A,onChange:L=>y(L.target.value),className:"input w-full border border-gray-300 rounded-md py-2 px-4 mb-4"}),_.jsx("div",{className:"overflow-y-auto max-h-96 border-t pt-4",children:$.length>0?$.map(L=>_.jsxs("div",{className:"bg-gray-50 shadow-sm rounded-lg p-4 mb-2",children:[_.jsxs("h2",{className:"font-bold text-gray-800",children:[H.parent_name_label,": ",L.parent_name]}),_.jsxs("p",{className:"text-sm text-gray-500",children:[H.kid_name_label,": ",L.kid_name]}),_.jsxs("p",{className:"text-sm text-gray-500",children:[H.email_label,": ",L.email]})]},L.id)):_.jsx("p",{className:"text-sm text-gray-500",children:$.length===0&&H.no_members_found})})]})}function kn(s){"@babel/helpers - typeof";return kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},kn(s)}function W1(s,i){if(kn(s)!="object"||!s)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var d=l.call(s,i||"default");if(kn(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(s)}function rl(s){var i=W1(s,"string");return kn(i)=="symbol"?i:i+""}function xr(s,i,l){return(i=rl(i))in s?Object.defineProperty(s,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[i]=l,s}function Ho(s,i){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);i&&(d=d.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),l.push.apply(l,d)}return l}function xe(s){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Ho(Object(l),!0).forEach(function(d){xr(s,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):Ho(Object(l)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(l,d))})}return s}function G1(s){if(Array.isArray(s))return s}function X1(s,i){var l=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(l!=null){var d,c,h,x,b=[],w=!0,p=!1;try{if(h=(l=l.call(s)).next,i===0){if(Object(l)!==l)return;w=!1}else for(;!(w=(d=h.call(l)).done)&&(b.push(d.value),b.length!==i);w=!0);}catch(A){p=!0,c=A}finally{try{if(!w&&l.return!=null&&(x=l.return(),Object(x)!==x))return}finally{if(p)throw c}}return b}}function As(s,i){(i==null||i>s.length)&&(i=s.length);for(var l=0,d=Array(i);l<i;l++)d[l]=s[l];return d}function il(s,i){if(s){if(typeof s=="string")return As(s,i);var l={}.toString.call(s).slice(8,-1);return l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set"?Array.from(s):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?As(s,i):void 0}}function z1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hn(s,i){return G1(s)||X1(s,i)||il(s,i)||z1()}function Y1(s,i){if(s==null)return{};var l={};for(var d in s)if({}.hasOwnProperty.call(s,d)){if(i.includes(d))continue;l[d]=s[d]}return l}function pn(s,i){if(s==null)return{};var l,d,c=Y1(s,i);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);for(d=0;d<h.length;d++)l=h[d],i.includes(l)||{}.propertyIsEnumerable.call(s,l)&&(c[l]=s[l])}return c}var q1=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Z1(s){var i=s.defaultInputValue,l=i===void 0?"":i,d=s.defaultMenuIsOpen,c=d===void 0?!1:d,h=s.defaultValue,x=h===void 0?null:h,b=s.inputValue,w=s.menuIsOpen,p=s.onChange,A=s.onInputChange,y=s.onMenuClose,P=s.onMenuOpen,B=s.value,R=pn(s,q1),T=O.useState(b!==void 0?b:l),M=hn(T,2),k=M[0],H=M[1],G=O.useState(w!==void 0?w:c),Y=hn(G,2),re=Y[0],$=Y[1],L=O.useState(B!==void 0?B:x),K=hn(L,2),z=K[0],Ve=K[1],Ae=O.useCallback(function(Xe,rt){typeof p=="function"&&p(Xe,rt),Ve(Xe)},[p]),ae=O.useCallback(function(Xe,rt){var Ce;typeof A=="function"&&(Ce=A(Xe,rt)),H(Ce!==void 0?Ce:Xe)},[A]),Ee=O.useCallback(function(){typeof P=="function"&&P(),$(!0)},[P]),Te=O.useCallback(function(){typeof y=="function"&&y(),$(!1)},[y]),U=b!==void 0?b:k,pe=w!==void 0?w:re,J=B!==void 0?B:z;return xe(xe({},R),{},{inputValue:U,menuIsOpen:pe,onChange:Ae,onInputChange:ae,onMenuClose:Te,onMenuOpen:Ee,value:J})}function we(){return we=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var d in l)({}).hasOwnProperty.call(l,d)&&(s[d]=l[d])}return s},we.apply(null,arguments)}function K1(s,i){if(!(s instanceof i))throw new TypeError("Cannot call a class as a function")}function jo(s,i){for(var l=0;l<i.length;l++){var d=i[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(s,rl(d.key),d)}}function $1(s,i,l){return i&&jo(s.prototype,i),l&&jo(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s}function ys(s,i){return ys=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,d){return l.__proto__=d,l},ys(s,i)}function Q1(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(i&&i.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),i&&ys(s,i)}function ei(s){return ei=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},ei(s)}function sl(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sl=function(){return!!s})()}function J1(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function e0(s,i){if(i&&(kn(i)=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J1(s)}function t0(s){var i=sl();return function(){var l,d=ei(s);if(i){var c=ei(this).constructor;l=Reflect.construct(d,arguments,c)}else l=d.apply(this,arguments);return e0(this,l)}}function n0(s){if(Array.isArray(s))return As(s)}function r0(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function i0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hs(s){return n0(s)||r0(s)||il(s)||i0()}var s0=!1;function o0(s){if(s.sheet)return s.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===s)return document.styleSheets[i]}function a0(s){var i=document.createElement("style");return i.setAttribute("data-emotion",s.key),s.nonce!==void 0&&i.setAttribute("nonce",s.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}var l0=function(){function s(l){var d=this;this._insertTag=function(c){var h;d.tags.length===0?d.insertionPoint?h=d.insertionPoint.nextSibling:d.prepend?h=d.container.firstChild:h=d.before:h=d.tags[d.tags.length-1].nextSibling,d.container.insertBefore(c,h),d.tags.push(c)},this.isSpeedy=l.speedy===void 0?!s0:l.speedy,this.tags=[],this.ctr=0,this.nonce=l.nonce,this.key=l.key,this.container=l.container,this.prepend=l.prepend,this.insertionPoint=l.insertionPoint,this.before=null}var i=s.prototype;return i.hydrate=function(d){d.forEach(this._insertTag)},i.insert=function(d){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(a0(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var h=o0(c);try{h.insertRule(d,h.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(d));this.ctr++},i.flush=function(){this.tags.forEach(function(d){var c;return(c=d.parentNode)==null?void 0:c.removeChild(d)}),this.tags=[],this.ctr=0},s}(),St="-ms-",ti="-moz-",ke="-webkit-",ol="comm",js="rule",Ws="decl",c0="@import",al="@keyframes",u0="@layer",d0=Math.abs,bi=String.fromCharCode,f0=Object.assign;function h0(s,i){return At(s,0)^45?(((i<<2^At(s,0))<<2^At(s,1))<<2^At(s,2))<<2^At(s,3):0}function ll(s){return s.trim()}function g0(s,i){return(s=i.exec(s))?s[0]:s}function Fe(s,i,l){return s.replace(i,l)}function vs(s,i){return s.indexOf(i)}function At(s,i){return s.charCodeAt(i)|0}function br(s,i,l){return s.slice(i,l)}function ln(s){return s.length}function Gs(s){return s.length}function Ur(s,i){return i.push(s),s}function x0(s,i){return s.map(i).join("")}var Ci=1,Kn=1,cl=0,kt=0,ft=0,Jn="";function Ei(s,i,l,d,c,h,x){return{value:s,root:i,parent:l,type:d,props:c,children:h,line:Ci,column:Kn,length:x,return:""}}function fr(s,i){return f0(Ei("",null,null,"",null,null,0),s,{length:-s.length},i)}function p0(){return ft}function m0(){return ft=kt>0?At(Jn,--kt):0,Kn--,ft===10&&(Kn=1,Ci--),ft}function Ht(){return ft=kt<cl?At(Jn,kt++):0,Kn++,ft===10&&(Kn=1,Ci++),ft}function un(){return At(Jn,kt)}function qr(){return kt}function _r(s,i){return br(Jn,s,i)}function Cr(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ul(s){return Ci=Kn=1,cl=ln(Jn=s),kt=0,[]}function dl(s){return Jn="",s}function Zr(s){return ll(_r(kt-1,Ss(s===91?s+2:s===40?s+1:s)))}function w0(s){for(;(ft=un())&&ft<33;)Ht();return Cr(s)>2||Cr(ft)>3?"":" "}function b0(s,i){for(;--i&&Ht()&&!(ft<48||ft>102||ft>57&&ft<65||ft>70&&ft<97););return _r(s,qr()+(i<6&&un()==32&&Ht()==32))}function Ss(s){for(;Ht();)switch(ft){case s:return kt;case 34:case 39:s!==34&&s!==39&&Ss(ft);break;case 40:s===41&&Ss(s);break;case 92:Ht();break}return kt}function C0(s,i){for(;Ht()&&s+ft!==57;)if(s+ft===84&&un()===47)break;return"/*"+_r(i,kt-1)+"*"+bi(s===47?s:Ht())}function E0(s){for(;!Cr(un());)Ht();return _r(s,kt)}function A0(s){return dl(Kr("",null,null,null,[""],s=ul(s),0,[0],s))}function Kr(s,i,l,d,c,h,x,b,w){for(var p=0,A=0,y=x,P=0,B=0,R=0,T=1,M=1,k=1,H=0,G="",Y=c,re=h,$=d,L=G;M;)switch(R=H,H=Ht()){case 40:if(R!=108&&At(L,y-1)==58){vs(L+=Fe(Zr(H),"&","&\f"),"&\f")!=-1&&(k=-1);break}case 34:case 39:case 91:L+=Zr(H);break;case 9:case 10:case 13:case 32:L+=w0(R);break;case 92:L+=b0(qr()-1,7);continue;case 47:switch(un()){case 42:case 47:Ur(y0(C0(Ht(),qr()),i,l),w);break;default:L+="/"}break;case 123*T:b[p++]=ln(L)*k;case 125*T:case 59:case 0:switch(H){case 0:case 125:M=0;case 59+A:k==-1&&(L=Fe(L,/\f/g,"")),B>0&&ln(L)-y&&Ur(B>32?Go(L+";",d,l,y-1):Go(Fe(L," ","")+";",d,l,y-2),w);break;case 59:L+=";";default:if(Ur($=Wo(L,i,l,p,A,c,b,G,Y=[],re=[],y),h),H===123)if(A===0)Kr(L,i,$,$,Y,h,y,b,re);else switch(P===99&&At(L,3)===110?100:P){case 100:case 108:case 109:case 115:Kr(s,$,$,d&&Ur(Wo(s,$,$,0,0,c,b,G,c,Y=[],y),re),c,re,y,b,d?Y:re);break;default:Kr(L,$,$,$,[""],re,0,b,re)}}p=A=B=0,T=k=1,G=L="",y=x;break;case 58:y=1+ln(L),B=R;default:if(T<1){if(H==123)--T;else if(H==125&&T++==0&&m0()==125)continue}switch(L+=bi(H),H*T){case 38:k=A>0?1:(L+="\f",-1);break;case 44:b[p++]=(ln(L)-1)*k,k=1;break;case 64:un()===45&&(L+=Zr(Ht())),P=un(),A=y=ln(G=L+=E0(qr())),H++;break;case 45:R===45&&ln(L)==2&&(T=0)}}return h}function Wo(s,i,l,d,c,h,x,b,w,p,A){for(var y=c-1,P=c===0?h:[""],B=Gs(P),R=0,T=0,M=0;R<d;++R)for(var k=0,H=br(s,y+1,y=d0(T=x[R])),G=s;k<B;++k)(G=ll(T>0?P[k]+" "+H:Fe(H,/&\f/g,P[k])))&&(w[M++]=G);return Ei(s,i,l,c===0?js:b,w,p,A)}function y0(s,i,l){return Ei(s,i,l,ol,bi(p0()),br(s,2,-2),0)}function Go(s,i,l,d){return Ei(s,i,l,Ws,br(s,0,d),br(s,d+1,-1),d)}function Zn(s,i){for(var l="",d=Gs(s),c=0;c<d;c++)l+=i(s[c],c,s,i)||"";return l}function v0(s,i,l,d){switch(s.type){case u0:if(s.children.length)break;case c0:case Ws:return s.return=s.return||s.value;case ol:return"";case al:return s.return=s.value+"{"+Zn(s.children,d)+"}";case js:s.value=s.props.join(",")}return ln(l=Zn(s.children,d))?s.return=s.value+"{"+l+"}":""}function S0(s){var i=Gs(s);return function(l,d,c,h){for(var x="",b=0;b<i;b++)x+=s[b](l,d,c,h)||"";return x}}function I0(s){return function(i){i.root||(i=i.return)&&s(i)}}function _0(s){var i=Object.create(null);return function(l){return i[l]===void 0&&(i[l]=s(l)),i[l]}}var T0=function(i,l,d){for(var c=0,h=0;c=h,h=un(),c===38&&h===12&&(l[d]=1),!Cr(h);)Ht();return _r(i,kt)},O0=function(i,l){var d=-1,c=44;do switch(Cr(c)){case 0:c===38&&un()===12&&(l[d]=1),i[d]+=T0(kt-1,l,d);break;case 2:i[d]+=Zr(c);break;case 4:if(c===44){i[++d]=un()===58?"&\f":"",l[d]=i[d].length;break}default:i[d]+=bi(c)}while(c=Ht());return i},N0=function(i,l){return dl(O0(ul(i),l))},Xo=new WeakMap,R0=function(i){if(!(i.type!=="rule"||!i.parent||i.length<1)){for(var l=i.value,d=i.parent,c=i.column===d.column&&i.line===d.line;d.type!=="rule";)if(d=d.parent,!d)return;if(!(i.props.length===1&&l.charCodeAt(0)!==58&&!Xo.get(d))&&!c){Xo.set(i,!0);for(var h=[],x=N0(l,h),b=d.props,w=0,p=0;w<x.length;w++)for(var A=0;A<b.length;A++,p++)i.props[p]=h[w]?x[w].replace(/&\f/g,b[A]):b[A]+" "+x[w]}}},M0=function(i){if(i.type==="decl"){var l=i.value;l.charCodeAt(0)===108&&l.charCodeAt(2)===98&&(i.return="",i.value="")}};function fl(s,i){switch(h0(s,i)){case 5103:return ke+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ke+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return ke+s+ti+s+St+s+s;case 6828:case 4268:return ke+s+St+s+s;case 6165:return ke+s+St+"flex-"+s+s;case 5187:return ke+s+Fe(s,/(\w+).+(:[^]+)/,ke+"box-$1$2"+St+"flex-$1$2")+s;case 5443:return ke+s+St+"flex-item-"+Fe(s,/flex-|-self/,"")+s;case 4675:return ke+s+St+"flex-line-pack"+Fe(s,/align-content|flex-|-self/,"")+s;case 5548:return ke+s+St+Fe(s,"shrink","negative")+s;case 5292:return ke+s+St+Fe(s,"basis","preferred-size")+s;case 6060:return ke+"box-"+Fe(s,"-grow","")+ke+s+St+Fe(s,"grow","positive")+s;case 4554:return ke+Fe(s,/([^-])(transform)/g,"$1"+ke+"$2")+s;case 6187:return Fe(Fe(Fe(s,/(zoom-|grab)/,ke+"$1"),/(image-set)/,ke+"$1"),s,"")+s;case 5495:case 3959:return Fe(s,/(image-set\([^]*)/,ke+"$1$`$1");case 4968:return Fe(Fe(s,/(.+:)(flex-)?(.*)/,ke+"box-pack:$3"+St+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ke+s+s;case 4095:case 3583:case 4068:case 2532:return Fe(s,/(.+)-inline(.+)/,ke+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ln(s)-1-i>6)switch(At(s,i+1)){case 109:if(At(s,i+4)!==45)break;case 102:return Fe(s,/(.+:)(.+)-([^]+)/,"$1"+ke+"$2-$3$1"+ti+(At(s,i+3)==108?"$3":"$2-$3"))+s;case 115:return~vs(s,"stretch")?fl(Fe(s,"stretch","fill-available"),i)+s:s}break;case 4949:if(At(s,i+1)!==115)break;case 6444:switch(At(s,ln(s)-3-(~vs(s,"!important")&&10))){case 107:return Fe(s,":",":"+ke)+s;case 101:return Fe(s,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ke+(At(s,14)===45?"inline-":"")+"box$3$1"+ke+"$2$3$1"+St+"$2box$3")+s}break;case 5936:switch(At(s,i+11)){case 114:return ke+s+St+Fe(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return ke+s+St+Fe(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return ke+s+St+Fe(s,/[svh]\w+-[tblr]{2}/,"lr")+s}return ke+s+St+s+s}return s}var D0=function(i,l,d,c){if(i.length>-1&&!i.return)switch(i.type){case Ws:i.return=fl(i.value,i.length);break;case al:return Zn([fr(i,{value:Fe(i.value,"@","@"+ke)})],c);case js:if(i.length)return x0(i.props,function(h){switch(g0(h,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Zn([fr(i,{props:[Fe(h,/:(read-\w+)/,":"+ti+"$1")]})],c);case"::placeholder":return Zn([fr(i,{props:[Fe(h,/:(plac\w+)/,":"+ke+"input-$1")]}),fr(i,{props:[Fe(h,/:(plac\w+)/,":"+ti+"$1")]}),fr(i,{props:[Fe(h,/:(plac\w+)/,St+"input-$1")]})],c)}return""})}},P0=[D0],B0=function(i){var l=i.key;if(l==="css"){var d=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(d,function(T){var M=T.getAttribute("data-emotion");M.indexOf(" ")!==-1&&(document.head.appendChild(T),T.setAttribute("data-s",""))})}var c=i.stylisPlugins||P0,h={},x,b=[];x=i.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+l+' "]'),function(T){for(var M=T.getAttribute("data-emotion").split(" "),k=1;k<M.length;k++)h[M[k]]=!0;b.push(T)});var w,p=[R0,M0];{var A,y=[v0,I0(function(T){A.insert(T)})],P=S0(p.concat(c,y)),B=function(M){return Zn(A0(M),P)};w=function(M,k,H,G){A=H,B(M?M+"{"+k.styles+"}":k.styles),G&&(R.inserted[k.name]=!0)}}var R={key:l,sheet:new l0({key:l,container:x,nonce:i.nonce,speedy:i.speedy,prepend:i.prepend,insertionPoint:i.insertionPoint}),nonce:i.nonce,inserted:h,registered:{},insert:w};return R.sheet.hydrate(b),R},hl={exports:{}},Ge={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wt=typeof Symbol=="function"&&Symbol.for,Xs=wt?Symbol.for("react.element"):60103,zs=wt?Symbol.for("react.portal"):60106,Ai=wt?Symbol.for("react.fragment"):60107,yi=wt?Symbol.for("react.strict_mode"):60108,vi=wt?Symbol.for("react.profiler"):60114,Si=wt?Symbol.for("react.provider"):60109,Ii=wt?Symbol.for("react.context"):60110,Ys=wt?Symbol.for("react.async_mode"):60111,_i=wt?Symbol.for("react.concurrent_mode"):60111,Ti=wt?Symbol.for("react.forward_ref"):60112,Oi=wt?Symbol.for("react.suspense"):60113,L0=wt?Symbol.for("react.suspense_list"):60120,Ni=wt?Symbol.for("react.memo"):60115,Ri=wt?Symbol.for("react.lazy"):60116,k0=wt?Symbol.for("react.block"):60121,F0=wt?Symbol.for("react.fundamental"):60117,V0=wt?Symbol.for("react.responder"):60118,U0=wt?Symbol.for("react.scope"):60119;function jt(s){if(typeof s=="object"&&s!==null){var i=s.$$typeof;switch(i){case Xs:switch(s=s.type,s){case Ys:case _i:case Ai:case vi:case yi:case Oi:return s;default:switch(s=s&&s.$$typeof,s){case Ii:case Ti:case Ri:case Ni:case Si:return s;default:return i}}case zs:return i}}}function gl(s){return jt(s)===_i}Ge.AsyncMode=Ys;Ge.ConcurrentMode=_i;Ge.ContextConsumer=Ii;Ge.ContextProvider=Si;Ge.Element=Xs;Ge.ForwardRef=Ti;Ge.Fragment=Ai;Ge.Lazy=Ri;Ge.Memo=Ni;Ge.Portal=zs;Ge.Profiler=vi;Ge.StrictMode=yi;Ge.Suspense=Oi;Ge.isAsyncMode=function(s){return gl(s)||jt(s)===Ys};Ge.isConcurrentMode=gl;Ge.isContextConsumer=function(s){return jt(s)===Ii};Ge.isContextProvider=function(s){return jt(s)===Si};Ge.isElement=function(s){return typeof s=="object"&&s!==null&&s.$$typeof===Xs};Ge.isForwardRef=function(s){return jt(s)===Ti};Ge.isFragment=function(s){return jt(s)===Ai};Ge.isLazy=function(s){return jt(s)===Ri};Ge.isMemo=function(s){return jt(s)===Ni};Ge.isPortal=function(s){return jt(s)===zs};Ge.isProfiler=function(s){return jt(s)===vi};Ge.isStrictMode=function(s){return jt(s)===yi};Ge.isSuspense=function(s){return jt(s)===Oi};Ge.isValidElementType=function(s){return typeof s=="string"||typeof s=="function"||s===Ai||s===_i||s===vi||s===yi||s===Oi||s===L0||typeof s=="object"&&s!==null&&(s.$$typeof===Ri||s.$$typeof===Ni||s.$$typeof===Si||s.$$typeof===Ii||s.$$typeof===Ti||s.$$typeof===F0||s.$$typeof===V0||s.$$typeof===U0||s.$$typeof===k0)};Ge.typeOf=jt;hl.exports=Ge;var H0=hl.exports,xl=H0,j0={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},W0={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},pl={};pl[xl.ForwardRef]=j0;pl[xl.Memo]=W0;var G0=!0;function X0(s,i,l){var d="";return l.split(" ").forEach(function(c){s[c]!==void 0?i.push(s[c]+";"):c&&(d+=c+" ")}),d}var ml=function(i,l,d){var c=i.key+"-"+l.name;(d===!1||G0===!1)&&i.registered[c]===void 0&&(i.registered[c]=l.styles)},z0=function(i,l,d){ml(i,l,d);var c=i.key+"-"+l.name;if(i.inserted[l.name]===void 0){var h=l;do i.insert(l===h?"."+c:"",h,i.sheet,!0),h=h.next;while(h!==void 0)}};function Y0(s){for(var i=0,l,d=0,c=s.length;c>=4;++d,c-=4)l=s.charCodeAt(d)&255|(s.charCodeAt(++d)&255)<<8|(s.charCodeAt(++d)&255)<<16|(s.charCodeAt(++d)&255)<<24,l=(l&65535)*1540483477+((l>>>16)*59797<<16),l^=l>>>24,i=(l&65535)*1540483477+((l>>>16)*59797<<16)^(i&65535)*1540483477+((i>>>16)*59797<<16);switch(c){case 3:i^=(s.charCodeAt(d+2)&255)<<16;case 2:i^=(s.charCodeAt(d+1)&255)<<8;case 1:i^=s.charCodeAt(d)&255,i=(i&65535)*1540483477+((i>>>16)*59797<<16)}return i^=i>>>13,i=(i&65535)*1540483477+((i>>>16)*59797<<16),((i^i>>>15)>>>0).toString(36)}var q0={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Z0=!1,K0=/[A-Z]|^ms/g,$0=/_EMO_([^_]+?)_([^]*?)_EMO_/g,wl=function(i){return i.charCodeAt(1)===45},zo=function(i){return i!=null&&typeof i!="boolean"},ss=_0(function(s){return wl(s)?s:s.replace(K0,"-$&").toLowerCase()}),Yo=function(i,l){switch(i){case"animation":case"animationName":if(typeof l=="string")return l.replace($0,function(d,c,h){return cn={name:c,styles:h,next:cn},c})}return q0[i]!==1&&!wl(i)&&typeof l=="number"&&l!==0?l+"px":l},Q0="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Er(s,i,l){if(l==null)return"";var d=l;if(d.__emotion_styles!==void 0)return d;switch(typeof l){case"boolean":return"";case"object":{var c=l;if(c.anim===1)return cn={name:c.name,styles:c.styles,next:cn},c.name;var h=l;if(h.styles!==void 0){var x=h.next;if(x!==void 0)for(;x!==void 0;)cn={name:x.name,styles:x.styles,next:cn},x=x.next;var b=h.styles+";";return b}return J0(s,i,l)}case"function":{if(s!==void 0){var w=cn,p=l(s);return cn=w,Er(s,i,p)}break}}var A=l;return A}function J0(s,i,l){var d="";if(Array.isArray(l))for(var c=0;c<l.length;c++)d+=Er(s,i,l[c])+";";else for(var h in l){var x=l[h];if(typeof x!="object"){var b=x;zo(b)&&(d+=ss(h)+":"+Yo(h,b)+";")}else{if(h==="NO_COMPONENT_SELECTOR"&&Z0)throw new Error(Q0);if(Array.isArray(x)&&typeof x[0]=="string"&&i==null)for(var w=0;w<x.length;w++)zo(x[w])&&(d+=ss(h)+":"+Yo(h,x[w])+";");else{var p=Er(s,i,x);switch(h){case"animation":case"animationName":{d+=ss(h)+":"+p+";";break}default:d+=h+"{"+p+"}"}}}}return d}var qo=/label:\s*([^\s;{]+)\s*(;|$)/g,cn;function bl(s,i,l){if(s.length===1&&typeof s[0]=="object"&&s[0]!==null&&s[0].styles!==void 0)return s[0];var d=!0,c="";cn=void 0;var h=s[0];if(h==null||h.raw===void 0)d=!1,c+=Er(l,i,h);else{var x=h;c+=x[0]}for(var b=1;b<s.length;b++)if(c+=Er(l,i,s[b]),d){var w=h;c+=w[b]}qo.lastIndex=0;for(var p="",A;(A=qo.exec(c))!==null;)p+="-"+A[1];var y=Y0(c)+p;return{name:y,styles:c,next:cn}}var ed=function(i){return i()},td=gs.useInsertionEffect?gs.useInsertionEffect:!1,nd=td||ed,rd=!1,Cl=O.createContext(typeof HTMLElement<"u"?B0({key:"css"}):null);Cl.Provider;var id=function(i){return O.forwardRef(function(l,d){var c=O.useContext(Cl);return i(l,c,d)})},sd=O.createContext({}),qs={}.hasOwnProperty,Is="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",od=function(i,l){var d={};for(var c in l)qs.call(l,c)&&(d[c]=l[c]);return d[Is]=i,d},ad=function(i){var l=i.cache,d=i.serialized,c=i.isStringTag;return ml(l,d,c),nd(function(){return z0(l,d,c)}),null},ld=id(function(s,i,l){var d=s.css;typeof d=="string"&&i.registered[d]!==void 0&&(d=i.registered[d]);var c=s[Is],h=[d],x="";typeof s.className=="string"?x=X0(i.registered,h,s.className):s.className!=null&&(x=s.className+" ");var b=bl(h,void 0,O.useContext(sd));x+=i.key+"-"+b.name;var w={};for(var p in s)qs.call(s,p)&&p!=="css"&&p!==Is&&!rd&&(w[p]=s[p]);return w.className=x,l&&(w.ref=l),O.createElement(O.Fragment,null,O.createElement(ad,{cache:i,serialized:b,isStringTag:typeof c=="string"}),O.createElement(c,w))}),cd=ld,he=function(i,l){var d=arguments;if(l==null||!qs.call(l,"css"))return O.createElement.apply(void 0,d);var c=d.length,h=new Array(c);h[0]=cd,h[1]=od(i,l);for(var x=2;x<c;x++)h[x]=d[x];return O.createElement.apply(null,h)};(function(s){var i;i||(i=s.JSX||(s.JSX={}))})(he||(he={}));function Zs(){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];return bl(i)}function ud(){var s=Zs.apply(void 0,arguments),i="animation-"+s.name;return{name:i,styles:"@keyframes "+i+"{"+s.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function dd(s,i){return i||(i=s.slice(0)),Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(i)}}))}const fd=Math.min,hd=Math.max,ni=Math.round,Hr=Math.floor,ri=s=>({x:s,y:s});function gd(s){const{x:i,y:l,width:d,height:c}=s;return{width:d,height:c,top:l,left:i,right:i+d,bottom:l+c,x:i,y:l}}function Mi(){return typeof window<"u"}function El(s){return yl(s)?(s.nodeName||"").toLowerCase():"#document"}function xn(s){var i;return(s==null||(i=s.ownerDocument)==null?void 0:i.defaultView)||window}function Al(s){var i;return(i=(yl(s)?s.ownerDocument:s.document)||window.document)==null?void 0:i.documentElement}function yl(s){return Mi()?s instanceof Node||s instanceof xn(s).Node:!1}function xd(s){return Mi()?s instanceof Element||s instanceof xn(s).Element:!1}function Ks(s){return Mi()?s instanceof HTMLElement||s instanceof xn(s).HTMLElement:!1}function Zo(s){return!Mi()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof xn(s).ShadowRoot}function vl(s){const{overflow:i,overflowX:l,overflowY:d,display:c}=$s(s);return/auto|scroll|overlay|hidden|clip/.test(i+d+l)&&!["inline","contents"].includes(c)}function pd(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function md(s){return["html","body","#document"].includes(El(s))}function $s(s){return xn(s).getComputedStyle(s)}function wd(s){if(El(s)==="html")return s;const i=s.assignedSlot||s.parentNode||Zo(s)&&s.host||Al(s);return Zo(i)?i.host:i}function Sl(s){const i=wd(s);return md(i)?s.ownerDocument?s.ownerDocument.body:s.body:Ks(i)&&vl(i)?i:Sl(i)}function ii(s,i,l){var d;i===void 0&&(i=[]),l===void 0&&(l=!0);const c=Sl(s),h=c===((d=s.ownerDocument)==null?void 0:d.body),x=xn(c);if(h){const b=_s(x);return i.concat(x,x.visualViewport||[],vl(c)?c:[],b&&l?ii(b):[])}return i.concat(c,ii(c,[],l))}function _s(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function bd(s){const i=$s(s);let l=parseFloat(i.width)||0,d=parseFloat(i.height)||0;const c=Ks(s),h=c?s.offsetWidth:l,x=c?s.offsetHeight:d,b=ni(l)!==h||ni(d)!==x;return b&&(l=h,d=x),{width:l,height:d,$:b}}function Qs(s){return xd(s)?s:s.contextElement}function Ko(s){const i=Qs(s);if(!Ks(i))return ri(1);const l=i.getBoundingClientRect(),{width:d,height:c,$:h}=bd(i);let x=(h?ni(l.width):l.width)/d,b=(h?ni(l.height):l.height)/c;return(!x||!Number.isFinite(x))&&(x=1),(!b||!Number.isFinite(b))&&(b=1),{x,y:b}}const Cd=ri(0);function Ed(s){const i=xn(s);return!pd()||!i.visualViewport?Cd:{x:i.visualViewport.offsetLeft,y:i.visualViewport.offsetTop}}function Ad(s,i,l){return!1}function $o(s,i,l,d){i===void 0&&(i=!1);const c=s.getBoundingClientRect(),h=Qs(s);let x=ri(1);i&&(x=Ko(s));const b=Ad()?Ed(h):ri(0);let w=(c.left+b.x)/x.x,p=(c.top+b.y)/x.y,A=c.width/x.x,y=c.height/x.y;if(h){const P=xn(h),B=d;let R=P,T=_s(R);for(;T&&d&&B!==R;){const M=Ko(T),k=T.getBoundingClientRect(),H=$s(T),G=k.left+(T.clientLeft+parseFloat(H.paddingLeft))*M.x,Y=k.top+(T.clientTop+parseFloat(H.paddingTop))*M.y;w*=M.x,p*=M.y,A*=M.x,y*=M.y,w+=G,p+=Y,R=xn(T),T=_s(R)}}return gd({width:A,height:y,x:w,y:p})}function Il(s,i){return s.x===i.x&&s.y===i.y&&s.width===i.width&&s.height===i.height}function yd(s,i){let l=null,d;const c=Al(s);function h(){var b;clearTimeout(d),(b=l)==null||b.disconnect(),l=null}function x(b,w){b===void 0&&(b=!1),w===void 0&&(w=1),h();const p=s.getBoundingClientRect(),{left:A,top:y,width:P,height:B}=p;if(b||i(),!P||!B)return;const R=Hr(y),T=Hr(c.clientWidth-(A+P)),M=Hr(c.clientHeight-(y+B)),k=Hr(A),G={rootMargin:-R+"px "+-T+"px "+-M+"px "+-k+"px",threshold:hd(0,fd(1,w))||1};let Y=!0;function re($){const L=$[0].intersectionRatio;if(L!==w){if(!Y)return x();L?x(!1,L):d=setTimeout(()=>{x(!1,1e-7)},1e3)}L===1&&!Il(p,s.getBoundingClientRect())&&x(),Y=!1}try{l=new IntersectionObserver(re,{...G,root:c.ownerDocument})}catch{l=new IntersectionObserver(re,G)}l.observe(s)}return x(!0),h}function vd(s,i,l,d){d===void 0&&(d={});const{ancestorScroll:c=!0,ancestorResize:h=!0,elementResize:x=typeof ResizeObserver=="function",layoutShift:b=typeof IntersectionObserver=="function",animationFrame:w=!1}=d,p=Qs(s),A=c||h?[...p?ii(p):[],...ii(i)]:[];A.forEach(k=>{c&&k.addEventListener("scroll",l,{passive:!0}),h&&k.addEventListener("resize",l)});const y=p&&b?yd(p,l):null;let P=-1,B=null;x&&(B=new ResizeObserver(k=>{let[H]=k;H&&H.target===p&&B&&(B.unobserve(i),cancelAnimationFrame(P),P=requestAnimationFrame(()=>{var G;(G=B)==null||G.observe(i)})),l()}),p&&!w&&B.observe(p),B.observe(i));let R,T=w?$o(s):null;w&&M();function M(){const k=$o(s);T&&!Il(T,k)&&l(),T=k,R=requestAnimationFrame(M)}return l(),()=>{var k;A.forEach(H=>{c&&H.removeEventListener("scroll",l),h&&H.removeEventListener("resize",l)}),y==null||y(),(k=B)==null||k.disconnect(),B=null,w&&cancelAnimationFrame(R)}}var Ts=O.useLayoutEffect,Sd=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],si=function(){};function Id(s,i){return i?i[0]==="-"?s+i:s+"__"+i:s}function _d(s,i){for(var l=arguments.length,d=new Array(l>2?l-2:0),c=2;c<l;c++)d[c-2]=arguments[c];var h=[].concat(d);if(i&&s)for(var x in i)i.hasOwnProperty(x)&&i[x]&&h.push("".concat(Id(s,x)));return h.filter(function(b){return b}).map(function(b){return String(b).trim()}).join(" ")}var Qo=function(i){return Ld(i)?i.filter(Boolean):kn(i)==="object"&&i!==null?[i]:[]},_l=function(i){i.className,i.clearValue,i.cx,i.getStyles,i.getClassNames,i.getValue,i.hasValue,i.isMulti,i.isRtl,i.options,i.selectOption,i.selectProps,i.setValue,i.theme;var l=pn(i,Sd);return xe({},l)},ct=function(i,l,d){var c=i.cx,h=i.getStyles,x=i.getClassNames,b=i.className;return{css:h(l,i),className:c(d??{},x(l,i),b)}};function Di(s){return[document.documentElement,document.body,window].indexOf(s)>-1}function Td(s){return Di(s)?window.innerHeight:s.clientHeight}function Tl(s){return Di(s)?window.pageYOffset:s.scrollTop}function oi(s,i){if(Di(s)){window.scrollTo(0,i);return}s.scrollTop=i}function Od(s){var i=getComputedStyle(s),l=i.position==="absolute",d=/(auto|scroll)/;if(i.position==="fixed")return document.documentElement;for(var c=s;c=c.parentElement;)if(i=getComputedStyle(c),!(l&&i.position==="static")&&d.test(i.overflow+i.overflowY+i.overflowX))return c;return document.documentElement}function Nd(s,i,l,d){return l*((s=s/d-1)*s*s+1)+i}function jr(s,i){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:si,c=Tl(s),h=i-c,x=10,b=0;function w(){b+=x;var p=Nd(b,c,h,l);oi(s,p),b<l?window.requestAnimationFrame(w):d(s)}w()}function Jo(s,i){var l=s.getBoundingClientRect(),d=i.getBoundingClientRect(),c=i.offsetHeight/3;d.bottom+c>l.bottom?oi(s,Math.min(i.offsetTop+i.clientHeight-s.offsetHeight+c,s.scrollHeight)):d.top-c<l.top&&oi(s,Math.max(i.offsetTop-c,0))}function Rd(s){var i=s.getBoundingClientRect();return{bottom:i.bottom,height:i.height,left:i.left,right:i.right,top:i.top,width:i.width}}function ea(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Md(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var Ol=!1,Dd={get passive(){return Ol=!0}},Wr=typeof window<"u"?window:{};Wr.addEventListener&&Wr.removeEventListener&&(Wr.addEventListener("p",si,Dd),Wr.removeEventListener("p",si,!1));var Pd=Ol;function Bd(s){return s!=null}function Ld(s){return Array.isArray(s)}function Gr(s,i,l){return s?i:l}var kd=function(i){for(var l=arguments.length,d=new Array(l>1?l-1:0),c=1;c<l;c++)d[c-1]=arguments[c];var h=Object.entries(i).filter(function(x){var b=hn(x,1),w=b[0];return!d.includes(w)});return h.reduce(function(x,b){var w=hn(b,2),p=w[0],A=w[1];return x[p]=A,x},{})},Fd=["children","innerProps"],Vd=["children","innerProps"];function Ud(s){var i=s.maxHeight,l=s.menuEl,d=s.minHeight,c=s.placement,h=s.shouldScroll,x=s.isFixedPosition,b=s.controlHeight,w=Od(l),p={placement:"bottom",maxHeight:i};if(!l||!l.offsetParent)return p;var A=w.getBoundingClientRect(),y=A.height,P=l.getBoundingClientRect(),B=P.bottom,R=P.height,T=P.top,M=l.offsetParent.getBoundingClientRect(),k=M.top,H=x?window.innerHeight:Td(w),G=Tl(w),Y=parseInt(getComputedStyle(l).marginBottom,10),re=parseInt(getComputedStyle(l).marginTop,10),$=k-re,L=H-T,K=$+G,z=y-G-T,Ve=B-H+G+Y,Ae=G+T-re,ae=160;switch(c){case"auto":case"bottom":if(L>=R)return{placement:"bottom",maxHeight:i};if(z>=R&&!x)return h&&jr(w,Ve,ae),{placement:"bottom",maxHeight:i};if(!x&&z>=d||x&&L>=d){h&&jr(w,Ve,ae);var Ee=x?L-Y:z-Y;return{placement:"bottom",maxHeight:Ee}}if(c==="auto"||x){var Te=i,U=x?$:K;return U>=d&&(Te=Math.min(U-Y-b,i)),{placement:"top",maxHeight:Te}}if(c==="bottom")return h&&oi(w,Ve),{placement:"bottom",maxHeight:i};break;case"top":if($>=R)return{placement:"top",maxHeight:i};if(K>=R&&!x)return h&&jr(w,Ae,ae),{placement:"top",maxHeight:i};if(!x&&K>=d||x&&$>=d){var pe=i;return(!x&&K>=d||x&&$>=d)&&(pe=x?$-re:K-re),h&&jr(w,Ae,ae),{placement:"top",maxHeight:pe}}return{placement:"bottom",maxHeight:i};default:throw new Error('Invalid placement provided "'.concat(c,'".'))}return p}function Hd(s){var i={bottom:"top",top:"bottom"};return s?i[s]:"bottom"}var Nl=function(i){return i==="auto"?"bottom":i},jd=function(i,l){var d,c=i.placement,h=i.theme,x=h.borderRadius,b=h.spacing,w=h.colors;return xe((d={label:"menu"},xr(d,Hd(c),"100%"),xr(d,"position","absolute"),xr(d,"width","100%"),xr(d,"zIndex",1),d),l?{}:{backgroundColor:w.neutral0,borderRadius:x,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:b.menuGutter,marginTop:b.menuGutter})},Rl=O.createContext(null),Wd=function(i){var l=i.children,d=i.minMenuHeight,c=i.maxMenuHeight,h=i.menuPlacement,x=i.menuPosition,b=i.menuShouldScrollIntoView,w=i.theme,p=O.useContext(Rl)||{},A=p.setPortalPlacement,y=O.useRef(null),P=O.useState(c),B=hn(P,2),R=B[0],T=B[1],M=O.useState(null),k=hn(M,2),H=k[0],G=k[1],Y=w.spacing.controlHeight;return Ts(function(){var re=y.current;if(re){var $=x==="fixed",L=b&&!$,K=Ud({maxHeight:c,menuEl:re,minHeight:d,placement:h,shouldScroll:L,isFixedPosition:$,controlHeight:Y});T(K.maxHeight),G(K.placement),A==null||A(K.placement)}},[c,h,x,b,d,A,Y]),l({ref:y,placerProps:xe(xe({},i),{},{placement:H||Nl(h),maxHeight:R})})},Gd=function(i){var l=i.children,d=i.innerRef,c=i.innerProps;return he("div",we({},ct(i,"menu",{menu:!0}),{ref:d},c),l)},Xd=Gd,zd=function(i,l){var d=i.maxHeight,c=i.theme.spacing.baseUnit;return xe({maxHeight:d,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},l?{}:{paddingBottom:c,paddingTop:c})},Yd=function(i){var l=i.children,d=i.innerProps,c=i.innerRef,h=i.isMulti;return he("div",we({},ct(i,"menuList",{"menu-list":!0,"menu-list--is-multi":h}),{ref:c},d),l)},Ml=function(i,l){var d=i.theme,c=d.spacing.baseUnit,h=d.colors;return xe({textAlign:"center"},l?{}:{color:h.neutral40,padding:"".concat(c*2,"px ").concat(c*3,"px")})},qd=Ml,Zd=Ml,Kd=function(i){var l=i.children,d=l===void 0?"No options":l,c=i.innerProps,h=pn(i,Fd);return he("div",we({},ct(xe(xe({},h),{},{children:d,innerProps:c}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),c),d)},$d=function(i){var l=i.children,d=l===void 0?"Loading...":l,c=i.innerProps,h=pn(i,Vd);return he("div",we({},ct(xe(xe({},h),{},{children:d,innerProps:c}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),c),d)},Qd=function(i){var l=i.rect,d=i.offset,c=i.position;return{left:l.left,position:c,top:d,width:l.width,zIndex:1}},Jd=function(i){var l=i.appendTo,d=i.children,c=i.controlElement,h=i.innerProps,x=i.menuPlacement,b=i.menuPosition,w=O.useRef(null),p=O.useRef(null),A=O.useState(Nl(x)),y=hn(A,2),P=y[0],B=y[1],R=O.useMemo(function(){return{setPortalPlacement:B}},[]),T=O.useState(null),M=hn(T,2),k=M[0],H=M[1],G=O.useCallback(function(){if(c){var L=Rd(c),K=b==="fixed"?0:window.pageYOffset,z=L[P]+K;(z!==(k==null?void 0:k.offset)||L.left!==(k==null?void 0:k.rect.left)||L.width!==(k==null?void 0:k.rect.width))&&H({offset:z,rect:L})}},[c,b,P,k==null?void 0:k.offset,k==null?void 0:k.rect.left,k==null?void 0:k.rect.width]);Ts(function(){G()},[G]);var Y=O.useCallback(function(){typeof p.current=="function"&&(p.current(),p.current=null),c&&w.current&&(p.current=vd(c,w.current,G,{elementResize:"ResizeObserver"in window}))},[c,G]);Ts(function(){Y()},[Y]);var re=O.useCallback(function(L){w.current=L,Y()},[Y]);if(!l&&b!=="fixed"||!k)return null;var $=he("div",we({ref:re},ct(xe(xe({},i),{},{offset:k.offset,position:b,rect:k.rect}),"menuPortal",{"menu-portal":!0}),h),d);return he(Rl.Provider,{value:R},l?_a.createPortal($,l):$)},ef=function(i){var l=i.isDisabled,d=i.isRtl;return{label:"container",direction:d?"rtl":void 0,pointerEvents:l?"none":void 0,position:"relative"}},tf=function(i){var l=i.children,d=i.innerProps,c=i.isDisabled,h=i.isRtl;return he("div",we({},ct(i,"container",{"--is-disabled":c,"--is-rtl":h}),d),l)},nf=function(i,l){var d=i.theme.spacing,c=i.isMulti,h=i.hasValue,x=i.selectProps.controlShouldRenderValue;return xe({alignItems:"center",display:c&&h&&x?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},l?{}:{padding:"".concat(d.baseUnit/2,"px ").concat(d.baseUnit*2,"px")})},rf=function(i){var l=i.children,d=i.innerProps,c=i.isMulti,h=i.hasValue;return he("div",we({},ct(i,"valueContainer",{"value-container":!0,"value-container--is-multi":c,"value-container--has-value":h}),d),l)},sf=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},of=function(i){var l=i.children,d=i.innerProps;return he("div",we({},ct(i,"indicatorsContainer",{indicators:!0}),d),l)},ta,af=["size"],lf=["innerProps","isRtl","size"],cf={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Dl=function(i){var l=i.size,d=pn(i,af);return he("svg",we({height:l,width:l,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:cf},d))},Js=function(i){return he(Dl,we({size:20},i),he("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Pl=function(i){return he(Dl,we({size:20},i),he("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Bl=function(i,l){var d=i.isFocused,c=i.theme,h=c.spacing.baseUnit,x=c.colors;return xe({label:"indicatorContainer",display:"flex",transition:"color 150ms"},l?{}:{color:d?x.neutral60:x.neutral20,padding:h*2,":hover":{color:d?x.neutral80:x.neutral40}})},uf=Bl,df=function(i){var l=i.children,d=i.innerProps;return he("div",we({},ct(i,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),d),l||he(Pl,null))},ff=Bl,hf=function(i){var l=i.children,d=i.innerProps;return he("div",we({},ct(i,"clearIndicator",{indicator:!0,"clear-indicator":!0}),d),l||he(Js,null))},gf=function(i,l){var d=i.isDisabled,c=i.theme,h=c.spacing.baseUnit,x=c.colors;return xe({label:"indicatorSeparator",alignSelf:"stretch",width:1},l?{}:{backgroundColor:d?x.neutral10:x.neutral20,marginBottom:h*2,marginTop:h*2})},xf=function(i){var l=i.innerProps;return he("span",we({},l,ct(i,"indicatorSeparator",{"indicator-separator":!0})))},pf=ud(ta||(ta=dd([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),mf=function(i,l){var d=i.isFocused,c=i.size,h=i.theme,x=h.colors,b=h.spacing.baseUnit;return xe({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:c,lineHeight:1,marginRight:c,textAlign:"center",verticalAlign:"middle"},l?{}:{color:d?x.neutral60:x.neutral20,padding:b*2})},os=function(i){var l=i.delay,d=i.offset;return he("span",{css:Zs({animation:"".concat(pf," 1s ease-in-out ").concat(l,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:d?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},wf=function(i){var l=i.innerProps,d=i.isRtl,c=i.size,h=c===void 0?4:c,x=pn(i,lf);return he("div",we({},ct(xe(xe({},x),{},{innerProps:l,isRtl:d,size:h}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),l),he(os,{delay:0,offset:d}),he(os,{delay:160,offset:!0}),he(os,{delay:320,offset:!d}))},bf=function(i,l){var d=i.isDisabled,c=i.isFocused,h=i.theme,x=h.colors,b=h.borderRadius,w=h.spacing;return xe({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:w.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},l?{}:{backgroundColor:d?x.neutral5:x.neutral0,borderColor:d?x.neutral10:c?x.primary:x.neutral20,borderRadius:b,borderStyle:"solid",borderWidth:1,boxShadow:c?"0 0 0 1px ".concat(x.primary):void 0,"&:hover":{borderColor:c?x.primary:x.neutral30}})},Cf=function(i){var l=i.children,d=i.isDisabled,c=i.isFocused,h=i.innerRef,x=i.innerProps,b=i.menuIsOpen;return he("div",we({ref:h},ct(i,"control",{control:!0,"control--is-disabled":d,"control--is-focused":c,"control--menu-is-open":b}),x,{"aria-disabled":d||void 0}),l)},Ef=Cf,Af=["data"],yf=function(i,l){var d=i.theme.spacing;return l?{}:{paddingBottom:d.baseUnit*2,paddingTop:d.baseUnit*2}},vf=function(i){var l=i.children,d=i.cx,c=i.getStyles,h=i.getClassNames,x=i.Heading,b=i.headingProps,w=i.innerProps,p=i.label,A=i.theme,y=i.selectProps;return he("div",we({},ct(i,"group",{group:!0}),w),he(x,we({},b,{selectProps:y,theme:A,getStyles:c,getClassNames:h,cx:d}),p),he("div",null,l))},Sf=function(i,l){var d=i.theme,c=d.colors,h=d.spacing;return xe({label:"group",cursor:"default",display:"block"},l?{}:{color:c.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:h.baseUnit*3,paddingRight:h.baseUnit*3,textTransform:"uppercase"})},If=function(i){var l=_l(i);l.data;var d=pn(l,Af);return he("div",we({},ct(i,"groupHeading",{"group-heading":!0}),d))},_f=vf,Tf=["innerRef","isDisabled","isHidden","inputClassName"],Of=function(i,l){var d=i.isDisabled,c=i.value,h=i.theme,x=h.spacing,b=h.colors;return xe(xe({visibility:d?"hidden":"visible",transform:c?"translateZ(0)":""},Nf),l?{}:{margin:x.baseUnit/2,paddingBottom:x.baseUnit/2,paddingTop:x.baseUnit/2,color:b.neutral80})},Ll={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Nf={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":xe({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Ll)},Rf=function(i){return xe({label:"input",color:"inherit",background:0,opacity:i?0:1,width:"100%"},Ll)},Mf=function(i){var l=i.cx,d=i.value,c=_l(i),h=c.innerRef,x=c.isDisabled,b=c.isHidden,w=c.inputClassName,p=pn(c,Tf);return he("div",we({},ct(i,"input",{"input-container":!0}),{"data-value":d||""}),he("input",we({className:l({input:!0},w),ref:h,style:Rf(b),disabled:x},p)))},Df=Mf,Pf=function(i,l){var d=i.theme,c=d.spacing,h=d.borderRadius,x=d.colors;return xe({label:"multiValue",display:"flex",minWidth:0},l?{}:{backgroundColor:x.neutral10,borderRadius:h/2,margin:c.baseUnit/2})},Bf=function(i,l){var d=i.theme,c=d.borderRadius,h=d.colors,x=i.cropWithEllipsis;return xe({overflow:"hidden",textOverflow:x||x===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},l?{}:{borderRadius:c/2,color:h.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Lf=function(i,l){var d=i.theme,c=d.spacing,h=d.borderRadius,x=d.colors,b=i.isFocused;return xe({alignItems:"center",display:"flex"},l?{}:{borderRadius:h/2,backgroundColor:b?x.dangerLight:void 0,paddingLeft:c.baseUnit,paddingRight:c.baseUnit,":hover":{backgroundColor:x.dangerLight,color:x.danger}})},kl=function(i){var l=i.children,d=i.innerProps;return he("div",d,l)},kf=kl,Ff=kl;function Vf(s){var i=s.children,l=s.innerProps;return he("div",we({role:"button"},l),i||he(Js,{size:14}))}var Uf=function(i){var l=i.children,d=i.components,c=i.data,h=i.innerProps,x=i.isDisabled,b=i.removeProps,w=i.selectProps,p=d.Container,A=d.Label,y=d.Remove;return he(p,{data:c,innerProps:xe(xe({},ct(i,"multiValue",{"multi-value":!0,"multi-value--is-disabled":x})),h),selectProps:w},he(A,{data:c,innerProps:xe({},ct(i,"multiValueLabel",{"multi-value__label":!0})),selectProps:w},l),he(y,{data:c,innerProps:xe(xe({},ct(i,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(l||"option")},b),selectProps:w}))},Hf=Uf,jf=function(i,l){var d=i.isDisabled,c=i.isFocused,h=i.isSelected,x=i.theme,b=x.spacing,w=x.colors;return xe({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},l?{}:{backgroundColor:h?w.primary:c?w.primary25:"transparent",color:d?w.neutral20:h?w.neutral0:"inherit",padding:"".concat(b.baseUnit*2,"px ").concat(b.baseUnit*3,"px"),":active":{backgroundColor:d?void 0:h?w.primary:w.primary50}})},Wf=function(i){var l=i.children,d=i.isDisabled,c=i.isFocused,h=i.isSelected,x=i.innerRef,b=i.innerProps;return he("div",we({},ct(i,"option",{option:!0,"option--is-disabled":d,"option--is-focused":c,"option--is-selected":h}),{ref:x,"aria-disabled":d},b),l)},Gf=Wf,Xf=function(i,l){var d=i.theme,c=d.spacing,h=d.colors;return xe({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},l?{}:{color:h.neutral50,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},zf=function(i){var l=i.children,d=i.innerProps;return he("div",we({},ct(i,"placeholder",{placeholder:!0}),d),l)},Yf=zf,qf=function(i,l){var d=i.isDisabled,c=i.theme,h=c.spacing,x=c.colors;return xe({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},l?{}:{color:d?x.neutral40:x.neutral80,marginLeft:h.baseUnit/2,marginRight:h.baseUnit/2})},Zf=function(i){var l=i.children,d=i.isDisabled,c=i.innerProps;return he("div",we({},ct(i,"singleValue",{"single-value":!0,"single-value--is-disabled":d}),c),l)},Kf=Zf,$f={ClearIndicator:hf,Control:Ef,DropdownIndicator:df,DownChevron:Pl,CrossIcon:Js,Group:_f,GroupHeading:If,IndicatorsContainer:of,IndicatorSeparator:xf,Input:Df,LoadingIndicator:wf,Menu:Xd,MenuList:Yd,MenuPortal:Jd,LoadingMessage:$d,NoOptionsMessage:Kd,MultiValue:Hf,MultiValueContainer:kf,MultiValueLabel:Ff,MultiValueRemove:Vf,Option:Gf,Placeholder:Yf,SelectContainer:tf,SingleValue:Kf,ValueContainer:rf},Qf=function(i){return xe(xe({},$f),i.components)},na=Number.isNaN||function(i){return typeof i=="number"&&i!==i};function Jf(s,i){return!!(s===i||na(s)&&na(i))}function eh(s,i){if(s.length!==i.length)return!1;for(var l=0;l<s.length;l++)if(!Jf(s[l],i[l]))return!1;return!0}function th(s,i){i===void 0&&(i=eh);var l=null;function d(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];if(l&&l.lastThis===this&&i(c,l.lastArgs))return l.lastResult;var x=s.apply(this,c);return l={lastResult:x,lastArgs:c,lastThis:this},x}return d.clear=function(){l=null},d}var nh={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},rh=function(i){return he("span",we({css:nh},i))},ra=rh,ih={guidance:function(i){var l=i.isSearchable,d=i.isMulti,c=i.tabSelectsValue,h=i.context,x=i.isInitialFocus;switch(h){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(c?", press Tab to select the option and exit the menu":"",".");case"input":return x?"".concat(i["aria-label"]||"Select"," is focused ").concat(l?",type to refine list":"",", press Down to open the menu, ").concat(d?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(i){var l=i.action,d=i.label,c=d===void 0?"":d,h=i.labels,x=i.isDisabled;switch(l){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(c,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(h.length>1?"s":""," ").concat(h.join(","),", selected.");case"select-option":return x?"option ".concat(c," is disabled. Select another option."):"option ".concat(c,", selected.");default:return""}},onFocus:function(i){var l=i.context,d=i.focused,c=i.options,h=i.label,x=h===void 0?"":h,b=i.selectValue,w=i.isDisabled,p=i.isSelected,A=i.isAppleDevice,y=function(T,M){return T&&T.length?"".concat(T.indexOf(M)+1," of ").concat(T.length):""};if(l==="value"&&b)return"value ".concat(x," focused, ").concat(y(b,d),".");if(l==="menu"&&A){var P=w?" disabled":"",B="".concat(p?" selected":"").concat(P);return"".concat(x).concat(B,", ").concat(y(c,d),".")}return""},onFilter:function(i){var l=i.inputValue,d=i.resultsMessage;return"".concat(d).concat(l?" for search term "+l:"",".")}},sh=function(i){var l=i.ariaSelection,d=i.focusedOption,c=i.focusedValue,h=i.focusableOptions,x=i.isFocused,b=i.selectValue,w=i.selectProps,p=i.id,A=i.isAppleDevice,y=w.ariaLiveMessages,P=w.getOptionLabel,B=w.inputValue,R=w.isMulti,T=w.isOptionDisabled,M=w.isSearchable,k=w.menuIsOpen,H=w.options,G=w.screenReaderStatus,Y=w.tabSelectsValue,re=w.isLoading,$=w["aria-label"],L=w["aria-live"],K=O.useMemo(function(){return xe(xe({},ih),y||{})},[y]),z=O.useMemo(function(){var U="";if(l&&K.onChange){var pe=l.option,J=l.options,Xe=l.removedValue,rt=l.removedValues,Ce=l.value,Kt=function(He){return Array.isArray(He)?null:He},Oe=Xe||pe||Kt(Ce),Qe=Oe?P(Oe):"",Ue=J||rt||void 0,te=Ue?Ue.map(P):[],oe=xe({isDisabled:Oe&&T(Oe,b),label:Qe,labels:te},l);U=K.onChange(oe)}return U},[l,K,T,b,P]),Ve=O.useMemo(function(){var U="",pe=d||c,J=!!(d&&b&&b.includes(d));if(pe&&K.onFocus){var Xe={focused:pe,label:P(pe),isDisabled:T(pe,b),isSelected:J,options:h,context:pe===d?"menu":"value",selectValue:b,isAppleDevice:A};U=K.onFocus(Xe)}return U},[d,c,P,T,K,h,b,A]),Ae=O.useMemo(function(){var U="";if(k&&H.length&&!re&&K.onFilter){var pe=G({count:h.length});U=K.onFilter({inputValue:B,resultsMessage:pe})}return U},[h,B,k,K,H,G,re]),ae=(l==null?void 0:l.action)==="initial-input-focus",Ee=O.useMemo(function(){var U="";if(K.guidance){var pe=c?"value":k?"menu":"input";U=K.guidance({"aria-label":$,context:pe,isDisabled:d&&T(d,b),isMulti:R,isSearchable:M,tabSelectsValue:Y,isInitialFocus:ae})}return U},[$,d,c,R,T,M,k,K,b,Y,ae]),Te=he(O.Fragment,null,he("span",{id:"aria-selection"},z),he("span",{id:"aria-focused"},Ve),he("span",{id:"aria-results"},Ae),he("span",{id:"aria-guidance"},Ee));return he(O.Fragment,null,he(ra,{id:p},ae&&Te),he(ra,{"aria-live":L,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},x&&!ae&&Te))},oh=sh,Os=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],ah=new RegExp("["+Os.map(function(s){return s.letters}).join("")+"]","g"),Fl={};for(var as=0;as<Os.length;as++)for(var ls=Os[as],cs=0;cs<ls.letters.length;cs++)Fl[ls.letters[cs]]=ls.base;var Vl=function(i){return i.replace(ah,function(l){return Fl[l]})},lh=th(Vl),ia=function(i){return i.replace(/^\s+|\s+$/g,"")},ch=function(i){return"".concat(i.label," ").concat(i.value)},uh=function(i){return function(l,d){if(l.data.__isNew__)return!0;var c=xe({ignoreCase:!0,ignoreAccents:!0,stringify:ch,trim:!0,matchFrom:"any"},i),h=c.ignoreCase,x=c.ignoreAccents,b=c.stringify,w=c.trim,p=c.matchFrom,A=w?ia(d):d,y=w?ia(b(l)):b(l);return h&&(A=A.toLowerCase(),y=y.toLowerCase()),x&&(A=lh(A),y=Vl(y)),p==="start"?y.substr(0,A.length)===A:y.indexOf(A)>-1}},dh=["innerRef"];function fh(s){var i=s.innerRef,l=pn(s,dh),d=kd(l,"onExited","in","enter","exit","appear");return he("input",we({ref:i},d,{css:Zs({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var hh=function(i){i.cancelable&&i.preventDefault(),i.stopPropagation()};function gh(s){var i=s.isEnabled,l=s.onBottomArrive,d=s.onBottomLeave,c=s.onTopArrive,h=s.onTopLeave,x=O.useRef(!1),b=O.useRef(!1),w=O.useRef(0),p=O.useRef(null),A=O.useCallback(function(M,k){if(p.current!==null){var H=p.current,G=H.scrollTop,Y=H.scrollHeight,re=H.clientHeight,$=p.current,L=k>0,K=Y-re-G,z=!1;K>k&&x.current&&(d&&d(M),x.current=!1),L&&b.current&&(h&&h(M),b.current=!1),L&&k>K?(l&&!x.current&&l(M),$.scrollTop=Y,z=!0,x.current=!0):!L&&-k>G&&(c&&!b.current&&c(M),$.scrollTop=0,z=!0,b.current=!0),z&&hh(M)}},[l,d,c,h]),y=O.useCallback(function(M){A(M,M.deltaY)},[A]),P=O.useCallback(function(M){w.current=M.changedTouches[0].clientY},[]),B=O.useCallback(function(M){var k=w.current-M.changedTouches[0].clientY;A(M,k)},[A]),R=O.useCallback(function(M){if(M){var k=Pd?{passive:!1}:!1;M.addEventListener("wheel",y,k),M.addEventListener("touchstart",P,k),M.addEventListener("touchmove",B,k)}},[B,P,y]),T=O.useCallback(function(M){M&&(M.removeEventListener("wheel",y,!1),M.removeEventListener("touchstart",P,!1),M.removeEventListener("touchmove",B,!1))},[B,P,y]);return O.useEffect(function(){if(i){var M=p.current;return R(M),function(){T(M)}}},[i,R,T]),function(M){p.current=M}}var sa=["boxSizing","height","overflow","paddingRight","position"],oa={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function aa(s){s.cancelable&&s.preventDefault()}function la(s){s.stopPropagation()}function ca(){var s=this.scrollTop,i=this.scrollHeight,l=s+this.offsetHeight;s===0?this.scrollTop=1:l===i&&(this.scrollTop=s-1)}function ua(){return"ontouchstart"in window||navigator.maxTouchPoints}var da=!!(typeof window<"u"&&window.document&&window.document.createElement),hr=0,Yn={capture:!1,passive:!1};function xh(s){var i=s.isEnabled,l=s.accountForScrollbars,d=l===void 0?!0:l,c=O.useRef({}),h=O.useRef(null),x=O.useCallback(function(w){if(da){var p=document.body,A=p&&p.style;if(d&&sa.forEach(function(R){var T=A&&A[R];c.current[R]=T}),d&&hr<1){var y=parseInt(c.current.paddingRight,10)||0,P=document.body?document.body.clientWidth:0,B=window.innerWidth-P+y||0;Object.keys(oa).forEach(function(R){var T=oa[R];A&&(A[R]=T)}),A&&(A.paddingRight="".concat(B,"px"))}p&&ua()&&(p.addEventListener("touchmove",aa,Yn),w&&(w.addEventListener("touchstart",ca,Yn),w.addEventListener("touchmove",la,Yn))),hr+=1}},[d]),b=O.useCallback(function(w){if(da){var p=document.body,A=p&&p.style;hr=Math.max(hr-1,0),d&&hr<1&&sa.forEach(function(y){var P=c.current[y];A&&(A[y]=P)}),p&&ua()&&(p.removeEventListener("touchmove",aa,Yn),w&&(w.removeEventListener("touchstart",ca,Yn),w.removeEventListener("touchmove",la,Yn)))}},[d]);return O.useEffect(function(){if(i){var w=h.current;return x(w),function(){b(w)}}},[i,x,b]),function(w){h.current=w}}var ph=function(i){var l=i.target;return l.ownerDocument.activeElement&&l.ownerDocument.activeElement.blur()},mh={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function wh(s){var i=s.children,l=s.lockEnabled,d=s.captureEnabled,c=d===void 0?!0:d,h=s.onBottomArrive,x=s.onBottomLeave,b=s.onTopArrive,w=s.onTopLeave,p=gh({isEnabled:c,onBottomArrive:h,onBottomLeave:x,onTopArrive:b,onTopLeave:w}),A=xh({isEnabled:l}),y=function(B){p(B),A(B)};return he(O.Fragment,null,l&&he("div",{onClick:ph,css:mh}),i(y))}var bh={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Ch=function(i){var l=i.name,d=i.onFocus;return he("input",{required:!0,name:l,tabIndex:-1,"aria-hidden":"true",onFocus:d,css:bh,value:"",onChange:function(){}})},Eh=Ch;function eo(s){var i;return typeof window<"u"&&window.navigator!=null?s.test(((i=window.navigator.userAgentData)===null||i===void 0?void 0:i.platform)||window.navigator.platform):!1}function Ah(){return eo(/^iPhone/i)}function Ul(){return eo(/^Mac/i)}function yh(){return eo(/^iPad/i)||Ul()&&navigator.maxTouchPoints>1}function vh(){return Ah()||yh()}function Sh(){return Ul()||vh()}var Ih=function(i){return i.label},_h=function(i){return i.label},Th=function(i){return i.value},Oh=function(i){return!!i.isDisabled},Nh={clearIndicator:ff,container:ef,control:bf,dropdownIndicator:uf,group:yf,groupHeading:Sf,indicatorsContainer:sf,indicatorSeparator:gf,input:Of,loadingIndicator:mf,loadingMessage:Zd,menu:jd,menuList:zd,menuPortal:Qd,multiValue:Pf,multiValueLabel:Bf,multiValueRemove:Lf,noOptionsMessage:qd,option:jf,placeholder:Xf,singleValue:qf,valueContainer:nf},Rh={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Mh=4,Hl=4,Dh=38,Ph=Hl*2,Bh={baseUnit:Hl,controlHeight:Dh,menuGutter:Ph},us={borderRadius:Mh,colors:Rh,spacing:Bh},Lh={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:ea(),captureMenuScroll:!ea(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:uh(),formatGroupLabel:Ih,getOptionLabel:_h,getOptionValue:Th,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Oh,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Md(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(i){var l=i.count;return"".concat(l," result").concat(l!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function fa(s,i,l,d){var c=Gl(s,i,l),h=Xl(s,i,l),x=Wl(s,i),b=ai(s,i);return{type:"option",data:i,isDisabled:c,isSelected:h,label:x,value:b,index:d}}function $r(s,i){return s.options.map(function(l,d){if("options"in l){var c=l.options.map(function(x,b){return fa(s,x,i,b)}).filter(function(x){return ga(s,x)});return c.length>0?{type:"group",data:l,options:c,index:d}:void 0}var h=fa(s,l,i,d);return ga(s,h)?h:void 0}).filter(Bd)}function jl(s){return s.reduce(function(i,l){return l.type==="group"?i.push.apply(i,Hs(l.options.map(function(d){return d.data}))):i.push(l.data),i},[])}function ha(s,i){return s.reduce(function(l,d){return d.type==="group"?l.push.apply(l,Hs(d.options.map(function(c){return{data:c.data,id:"".concat(i,"-").concat(d.index,"-").concat(c.index)}}))):l.push({data:d.data,id:"".concat(i,"-").concat(d.index)}),l},[])}function kh(s,i){return jl($r(s,i))}function ga(s,i){var l=s.inputValue,d=l===void 0?"":l,c=i.data,h=i.isSelected,x=i.label,b=i.value;return(!Yl(s)||!h)&&zl(s,{label:x,value:b,data:c},d)}function Fh(s,i){var l=s.focusedValue,d=s.selectValue,c=d.indexOf(l);if(c>-1){var h=i.indexOf(l);if(h>-1)return l;if(c<i.length)return i[c]}return null}function Vh(s,i){var l=s.focusedOption;return l&&i.indexOf(l)>-1?l:i[0]}var ds=function(i,l){var d,c=(d=i.find(function(h){return h.data===l}))===null||d===void 0?void 0:d.id;return c||null},Wl=function(i,l){return i.getOptionLabel(l)},ai=function(i,l){return i.getOptionValue(l)};function Gl(s,i,l){return typeof s.isOptionDisabled=="function"?s.isOptionDisabled(i,l):!1}function Xl(s,i,l){if(l.indexOf(i)>-1)return!0;if(typeof s.isOptionSelected=="function")return s.isOptionSelected(i,l);var d=ai(s,i);return l.some(function(c){return ai(s,c)===d})}function zl(s,i,l){return s.filterOption?s.filterOption(i,l):!0}var Yl=function(i){var l=i.hideSelectedOptions,d=i.isMulti;return l===void 0?d:l},Uh=1,ql=function(s){Q1(l,s);var i=t0(l);function l(d){var c;if(K1(this,l),c=i.call(this,d),c.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},c.blockOptionHover=!1,c.isComposing=!1,c.commonProps=void 0,c.initialTouchX=0,c.initialTouchY=0,c.openAfterFocus=!1,c.scrollToFocusedOptionOnUpdate=!1,c.userIsDragging=void 0,c.isAppleDevice=Sh(),c.controlRef=null,c.getControlRef=function(w){c.controlRef=w},c.focusedOptionRef=null,c.getFocusedOptionRef=function(w){c.focusedOptionRef=w},c.menuListRef=null,c.getMenuListRef=function(w){c.menuListRef=w},c.inputRef=null,c.getInputRef=function(w){c.inputRef=w},c.focus=c.focusInput,c.blur=c.blurInput,c.onChange=function(w,p){var A=c.props,y=A.onChange,P=A.name;p.name=P,c.ariaOnChange(w,p),y(w,p)},c.setValue=function(w,p,A){var y=c.props,P=y.closeMenuOnSelect,B=y.isMulti,R=y.inputValue;c.onInputChange("",{action:"set-value",prevInputValue:R}),P&&(c.setState({inputIsHiddenAfterUpdate:!B}),c.onMenuClose()),c.setState({clearFocusValueOnUpdate:!0}),c.onChange(w,{action:p,option:A})},c.selectOption=function(w){var p=c.props,A=p.blurInputOnSelect,y=p.isMulti,P=p.name,B=c.state.selectValue,R=y&&c.isOptionSelected(w,B),T=c.isOptionDisabled(w,B);if(R){var M=c.getOptionValue(w);c.setValue(B.filter(function(k){return c.getOptionValue(k)!==M}),"deselect-option",w)}else if(!T)y?c.setValue([].concat(Hs(B),[w]),"select-option",w):c.setValue(w,"select-option");else{c.ariaOnChange(w,{action:"select-option",option:w,name:P});return}A&&c.blurInput()},c.removeValue=function(w){var p=c.props.isMulti,A=c.state.selectValue,y=c.getOptionValue(w),P=A.filter(function(R){return c.getOptionValue(R)!==y}),B=Gr(p,P,P[0]||null);c.onChange(B,{action:"remove-value",removedValue:w}),c.focusInput()},c.clearValue=function(){var w=c.state.selectValue;c.onChange(Gr(c.props.isMulti,[],null),{action:"clear",removedValues:w})},c.popValue=function(){var w=c.props.isMulti,p=c.state.selectValue,A=p[p.length-1],y=p.slice(0,p.length-1),P=Gr(w,y,y[0]||null);A&&c.onChange(P,{action:"pop-value",removedValue:A})},c.getFocusedOptionId=function(w){return ds(c.state.focusableOptionsWithIds,w)},c.getFocusableOptionsWithIds=function(){return ha($r(c.props,c.state.selectValue),c.getElementId("option"))},c.getValue=function(){return c.state.selectValue},c.cx=function(){for(var w=arguments.length,p=new Array(w),A=0;A<w;A++)p[A]=arguments[A];return _d.apply(void 0,[c.props.classNamePrefix].concat(p))},c.getOptionLabel=function(w){return Wl(c.props,w)},c.getOptionValue=function(w){return ai(c.props,w)},c.getStyles=function(w,p){var A=c.props.unstyled,y=Nh[w](p,A);y.boxSizing="border-box";var P=c.props.styles[w];return P?P(y,p):y},c.getClassNames=function(w,p){var A,y;return(A=(y=c.props.classNames)[w])===null||A===void 0?void 0:A.call(y,p)},c.getElementId=function(w){return"".concat(c.state.instancePrefix,"-").concat(w)},c.getComponents=function(){return Qf(c.props)},c.buildCategorizedOptions=function(){return $r(c.props,c.state.selectValue)},c.getCategorizedOptions=function(){return c.props.menuIsOpen?c.buildCategorizedOptions():[]},c.buildFocusableOptions=function(){return jl(c.buildCategorizedOptions())},c.getFocusableOptions=function(){return c.props.menuIsOpen?c.buildFocusableOptions():[]},c.ariaOnChange=function(w,p){c.setState({ariaSelection:xe({value:w},p)})},c.onMenuMouseDown=function(w){w.button===0&&(w.stopPropagation(),w.preventDefault(),c.focusInput())},c.onMenuMouseMove=function(w){c.blockOptionHover=!1},c.onControlMouseDown=function(w){if(!w.defaultPrevented){var p=c.props.openMenuOnClick;c.state.isFocused?c.props.menuIsOpen?w.target.tagName!=="INPUT"&&w.target.tagName!=="TEXTAREA"&&c.onMenuClose():p&&c.openMenu("first"):(p&&(c.openAfterFocus=!0),c.focusInput()),w.target.tagName!=="INPUT"&&w.target.tagName!=="TEXTAREA"&&w.preventDefault()}},c.onDropdownIndicatorMouseDown=function(w){if(!(w&&w.type==="mousedown"&&w.button!==0)&&!c.props.isDisabled){var p=c.props,A=p.isMulti,y=p.menuIsOpen;c.focusInput(),y?(c.setState({inputIsHiddenAfterUpdate:!A}),c.onMenuClose()):c.openMenu("first"),w.preventDefault()}},c.onClearIndicatorMouseDown=function(w){w&&w.type==="mousedown"&&w.button!==0||(c.clearValue(),w.preventDefault(),c.openAfterFocus=!1,w.type==="touchend"?c.focusInput():setTimeout(function(){return c.focusInput()}))},c.onScroll=function(w){typeof c.props.closeMenuOnScroll=="boolean"?w.target instanceof HTMLElement&&Di(w.target)&&c.props.onMenuClose():typeof c.props.closeMenuOnScroll=="function"&&c.props.closeMenuOnScroll(w)&&c.props.onMenuClose()},c.onCompositionStart=function(){c.isComposing=!0},c.onCompositionEnd=function(){c.isComposing=!1},c.onTouchStart=function(w){var p=w.touches,A=p&&p.item(0);A&&(c.initialTouchX=A.clientX,c.initialTouchY=A.clientY,c.userIsDragging=!1)},c.onTouchMove=function(w){var p=w.touches,A=p&&p.item(0);if(A){var y=Math.abs(A.clientX-c.initialTouchX),P=Math.abs(A.clientY-c.initialTouchY),B=5;c.userIsDragging=y>B||P>B}},c.onTouchEnd=function(w){c.userIsDragging||(c.controlRef&&!c.controlRef.contains(w.target)&&c.menuListRef&&!c.menuListRef.contains(w.target)&&c.blurInput(),c.initialTouchX=0,c.initialTouchY=0)},c.onControlTouchEnd=function(w){c.userIsDragging||c.onControlMouseDown(w)},c.onClearIndicatorTouchEnd=function(w){c.userIsDragging||c.onClearIndicatorMouseDown(w)},c.onDropdownIndicatorTouchEnd=function(w){c.userIsDragging||c.onDropdownIndicatorMouseDown(w)},c.handleInputChange=function(w){var p=c.props.inputValue,A=w.currentTarget.value;c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange(A,{action:"input-change",prevInputValue:p}),c.props.menuIsOpen||c.onMenuOpen()},c.onInputFocus=function(w){c.props.onFocus&&c.props.onFocus(w),c.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(c.openAfterFocus||c.props.openMenuOnFocus)&&c.openMenu("first"),c.openAfterFocus=!1},c.onInputBlur=function(w){var p=c.props.inputValue;if(c.menuListRef&&c.menuListRef.contains(document.activeElement)){c.inputRef.focus();return}c.props.onBlur&&c.props.onBlur(w),c.onInputChange("",{action:"input-blur",prevInputValue:p}),c.onMenuClose(),c.setState({focusedValue:null,isFocused:!1})},c.onOptionHover=function(w){if(!(c.blockOptionHover||c.state.focusedOption===w)){var p=c.getFocusableOptions(),A=p.indexOf(w);c.setState({focusedOption:w,focusedOptionId:A>-1?c.getFocusedOptionId(w):null})}},c.shouldHideSelectedOptions=function(){return Yl(c.props)},c.onValueInputFocus=function(w){w.preventDefault(),w.stopPropagation(),c.focus()},c.onKeyDown=function(w){var p=c.props,A=p.isMulti,y=p.backspaceRemovesValue,P=p.escapeClearsValue,B=p.inputValue,R=p.isClearable,T=p.isDisabled,M=p.menuIsOpen,k=p.onKeyDown,H=p.tabSelectsValue,G=p.openMenuOnFocus,Y=c.state,re=Y.focusedOption,$=Y.focusedValue,L=Y.selectValue;if(!T&&!(typeof k=="function"&&(k(w),w.defaultPrevented))){switch(c.blockOptionHover=!0,w.key){case"ArrowLeft":if(!A||B)return;c.focusValue("previous");break;case"ArrowRight":if(!A||B)return;c.focusValue("next");break;case"Delete":case"Backspace":if(B)return;if($)c.removeValue($);else{if(!y)return;A?c.popValue():R&&c.clearValue()}break;case"Tab":if(c.isComposing||w.shiftKey||!M||!H||!re||G&&c.isOptionSelected(re,L))return;c.selectOption(re);break;case"Enter":if(w.keyCode===229)break;if(M){if(!re||c.isComposing)return;c.selectOption(re);break}return;case"Escape":M?(c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange("",{action:"menu-close",prevInputValue:B}),c.onMenuClose()):R&&P&&c.clearValue();break;case" ":if(B)return;if(!M){c.openMenu("first");break}if(!re)return;c.selectOption(re);break;case"ArrowUp":M?c.focusOption("up"):c.openMenu("last");break;case"ArrowDown":M?c.focusOption("down"):c.openMenu("first");break;case"PageUp":if(!M)return;c.focusOption("pageup");break;case"PageDown":if(!M)return;c.focusOption("pagedown");break;case"Home":if(!M)return;c.focusOption("first");break;case"End":if(!M)return;c.focusOption("last");break;default:return}w.preventDefault()}},c.state.instancePrefix="react-select-"+(c.props.instanceId||++Uh),c.state.selectValue=Qo(d.value),d.menuIsOpen&&c.state.selectValue.length){var h=c.getFocusableOptionsWithIds(),x=c.buildFocusableOptions(),b=x.indexOf(c.state.selectValue[0]);c.state.focusableOptionsWithIds=h,c.state.focusedOption=x[b],c.state.focusedOptionId=ds(h,x[b])}return c}return $1(l,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Jo(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(c){var h=this.props,x=h.isDisabled,b=h.menuIsOpen,w=this.state.isFocused;(w&&!x&&c.isDisabled||w&&b&&!c.menuIsOpen)&&this.focusInput(),w&&x&&!c.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!w&&!x&&c.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Jo(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(c,h){this.props.onInputChange(c,h)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(c){var h=this,x=this.state,b=x.selectValue,w=x.isFocused,p=this.buildFocusableOptions(),A=c==="first"?0:p.length-1;if(!this.props.isMulti){var y=p.indexOf(b[0]);y>-1&&(A=y)}this.scrollToFocusedOptionOnUpdate=!(w&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:p[A],focusedOptionId:this.getFocusedOptionId(p[A])},function(){return h.onMenuOpen()})}},{key:"focusValue",value:function(c){var h=this.state,x=h.selectValue,b=h.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var w=x.indexOf(b);b||(w=-1);var p=x.length-1,A=-1;if(x.length){switch(c){case"previous":w===0?A=0:w===-1?A=p:A=w-1;break;case"next":w>-1&&w<p&&(A=w+1);break}this.setState({inputIsHidden:A!==-1,focusedValue:x[A]})}}}},{key:"focusOption",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",h=this.props.pageSize,x=this.state.focusedOption,b=this.getFocusableOptions();if(b.length){var w=0,p=b.indexOf(x);x||(p=-1),c==="up"?w=p>0?p-1:b.length-1:c==="down"?w=(p+1)%b.length:c==="pageup"?(w=p-h,w<0&&(w=0)):c==="pagedown"?(w=p+h,w>b.length-1&&(w=b.length-1)):c==="last"&&(w=b.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:b[w],focusedValue:null,focusedOptionId:this.getFocusedOptionId(b[w])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(us):xe(xe({},us),this.props.theme):us}},{key:"getCommonProps",value:function(){var c=this.clearValue,h=this.cx,x=this.getStyles,b=this.getClassNames,w=this.getValue,p=this.selectOption,A=this.setValue,y=this.props,P=y.isMulti,B=y.isRtl,R=y.options,T=this.hasValue();return{clearValue:c,cx:h,getStyles:x,getClassNames:b,getValue:w,hasValue:T,isMulti:P,isRtl:B,options:R,selectOption:p,selectProps:y,setValue:A,theme:this.getTheme()}}},{key:"hasValue",value:function(){var c=this.state.selectValue;return c.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var c=this.props,h=c.isClearable,x=c.isMulti;return h===void 0?x:h}},{key:"isOptionDisabled",value:function(c,h){return Gl(this.props,c,h)}},{key:"isOptionSelected",value:function(c,h){return Xl(this.props,c,h)}},{key:"filterOption",value:function(c,h){return zl(this.props,c,h)}},{key:"formatOptionLabel",value:function(c,h){if(typeof this.props.formatOptionLabel=="function"){var x=this.props.inputValue,b=this.state.selectValue;return this.props.formatOptionLabel(c,{context:h,inputValue:x,selectValue:b})}else return this.getOptionLabel(c)}},{key:"formatGroupLabel",value:function(c){return this.props.formatGroupLabel(c)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var c=this.props,h=c.isDisabled,x=c.isSearchable,b=c.inputId,w=c.inputValue,p=c.tabIndex,A=c.form,y=c.menuIsOpen,P=c.required,B=this.getComponents(),R=B.Input,T=this.state,M=T.inputIsHidden,k=T.ariaSelection,H=this.commonProps,G=b||this.getElementId("input"),Y=xe(xe(xe({"aria-autocomplete":"list","aria-expanded":y,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":P,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},y&&{"aria-controls":this.getElementId("listbox")}),!x&&{"aria-readonly":!0}),this.hasValue()?(k==null?void 0:k.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return x?O.createElement(R,we({},H,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:G,innerRef:this.getInputRef,isDisabled:h,isHidden:M,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:p,form:A,type:"text",value:w},Y)):O.createElement(fh,we({id:G,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:si,onFocus:this.onInputFocus,disabled:h,tabIndex:p,inputMode:"none",form:A,value:""},Y))}},{key:"renderPlaceholderOrValue",value:function(){var c=this,h=this.getComponents(),x=h.MultiValue,b=h.MultiValueContainer,w=h.MultiValueLabel,p=h.MultiValueRemove,A=h.SingleValue,y=h.Placeholder,P=this.commonProps,B=this.props,R=B.controlShouldRenderValue,T=B.isDisabled,M=B.isMulti,k=B.inputValue,H=B.placeholder,G=this.state,Y=G.selectValue,re=G.focusedValue,$=G.isFocused;if(!this.hasValue()||!R)return k?null:O.createElement(y,we({},P,{key:"placeholder",isDisabled:T,isFocused:$,innerProps:{id:this.getElementId("placeholder")}}),H);if(M)return Y.map(function(K,z){var Ve=K===re,Ae="".concat(c.getOptionLabel(K),"-").concat(c.getOptionValue(K));return O.createElement(x,we({},P,{components:{Container:b,Label:w,Remove:p},isFocused:Ve,isDisabled:T,key:Ae,index:z,removeProps:{onClick:function(){return c.removeValue(K)},onTouchEnd:function(){return c.removeValue(K)},onMouseDown:function(Ee){Ee.preventDefault()}},data:K}),c.formatOptionLabel(K,"value"))});if(k)return null;var L=Y[0];return O.createElement(A,we({},P,{data:L,isDisabled:T}),this.formatOptionLabel(L,"value"))}},{key:"renderClearIndicator",value:function(){var c=this.getComponents(),h=c.ClearIndicator,x=this.commonProps,b=this.props,w=b.isDisabled,p=b.isLoading,A=this.state.isFocused;if(!this.isClearable()||!h||w||!this.hasValue()||p)return null;var y={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return O.createElement(h,we({},x,{innerProps:y,isFocused:A}))}},{key:"renderLoadingIndicator",value:function(){var c=this.getComponents(),h=c.LoadingIndicator,x=this.commonProps,b=this.props,w=b.isDisabled,p=b.isLoading,A=this.state.isFocused;if(!h||!p)return null;var y={"aria-hidden":"true"};return O.createElement(h,we({},x,{innerProps:y,isDisabled:w,isFocused:A}))}},{key:"renderIndicatorSeparator",value:function(){var c=this.getComponents(),h=c.DropdownIndicator,x=c.IndicatorSeparator;if(!h||!x)return null;var b=this.commonProps,w=this.props.isDisabled,p=this.state.isFocused;return O.createElement(x,we({},b,{isDisabled:w,isFocused:p}))}},{key:"renderDropdownIndicator",value:function(){var c=this.getComponents(),h=c.DropdownIndicator;if(!h)return null;var x=this.commonProps,b=this.props.isDisabled,w=this.state.isFocused,p={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return O.createElement(h,we({},x,{innerProps:p,isDisabled:b,isFocused:w}))}},{key:"renderMenu",value:function(){var c=this,h=this.getComponents(),x=h.Group,b=h.GroupHeading,w=h.Menu,p=h.MenuList,A=h.MenuPortal,y=h.LoadingMessage,P=h.NoOptionsMessage,B=h.Option,R=this.commonProps,T=this.state.focusedOption,M=this.props,k=M.captureMenuScroll,H=M.inputValue,G=M.isLoading,Y=M.loadingMessage,re=M.minMenuHeight,$=M.maxMenuHeight,L=M.menuIsOpen,K=M.menuPlacement,z=M.menuPosition,Ve=M.menuPortalTarget,Ae=M.menuShouldBlockScroll,ae=M.menuShouldScrollIntoView,Ee=M.noOptionsMessage,Te=M.onMenuScrollToTop,U=M.onMenuScrollToBottom;if(!L)return null;var pe=function(Qe,Ue){var te=Qe.type,oe=Qe.data,Ot=Qe.isDisabled,He=Qe.isSelected,Wt=Qe.label,Gt=Qe.value,Q=T===oe,le=Ot?void 0:function(){return c.onOptionHover(oe)},se=Ot?void 0:function(){return c.selectOption(oe)},Se="".concat(c.getElementId("option"),"-").concat(Ue),ze={id:Se,onClick:se,onMouseMove:le,onMouseOver:le,tabIndex:-1,role:"option","aria-selected":c.isAppleDevice?void 0:He};return O.createElement(B,we({},R,{innerProps:ze,data:oe,isDisabled:Ot,isSelected:He,key:Se,label:Wt,type:te,value:Gt,isFocused:Q,innerRef:Q?c.getFocusedOptionRef:void 0}),c.formatOptionLabel(Qe.data,"menu"))},J;if(this.hasOptions())J=this.getCategorizedOptions().map(function(Oe){if(Oe.type==="group"){var Qe=Oe.data,Ue=Oe.options,te=Oe.index,oe="".concat(c.getElementId("group"),"-").concat(te),Ot="".concat(oe,"-heading");return O.createElement(x,we({},R,{key:oe,data:Qe,options:Ue,Heading:b,headingProps:{id:Ot,data:Oe.data},label:c.formatGroupLabel(Oe.data)}),Oe.options.map(function(He){return pe(He,"".concat(te,"-").concat(He.index))}))}else if(Oe.type==="option")return pe(Oe,"".concat(Oe.index))});else if(G){var Xe=Y({inputValue:H});if(Xe===null)return null;J=O.createElement(y,R,Xe)}else{var rt=Ee({inputValue:H});if(rt===null)return null;J=O.createElement(P,R,rt)}var Ce={minMenuHeight:re,maxMenuHeight:$,menuPlacement:K,menuPosition:z,menuShouldScrollIntoView:ae},Kt=O.createElement(Wd,we({},R,Ce),function(Oe){var Qe=Oe.ref,Ue=Oe.placerProps,te=Ue.placement,oe=Ue.maxHeight;return O.createElement(w,we({},R,Ce,{innerRef:Qe,innerProps:{onMouseDown:c.onMenuMouseDown,onMouseMove:c.onMenuMouseMove},isLoading:G,placement:te}),O.createElement(wh,{captureEnabled:k,onTopArrive:Te,onBottomArrive:U,lockEnabled:Ae},function(Ot){return O.createElement(p,we({},R,{innerRef:function(Wt){c.getMenuListRef(Wt),Ot(Wt)},innerProps:{role:"listbox","aria-multiselectable":R.isMulti,id:c.getElementId("listbox")},isLoading:G,maxHeight:oe,focusedOption:T}),J)}))});return Ve||z==="fixed"?O.createElement(A,we({},R,{appendTo:Ve,controlElement:this.controlRef,menuPlacement:K,menuPosition:z}),Kt):Kt}},{key:"renderFormField",value:function(){var c=this,h=this.props,x=h.delimiter,b=h.isDisabled,w=h.isMulti,p=h.name,A=h.required,y=this.state.selectValue;if(A&&!this.hasValue()&&!b)return O.createElement(Eh,{name:p,onFocus:this.onValueInputFocus});if(!(!p||b))if(w)if(x){var P=y.map(function(T){return c.getOptionValue(T)}).join(x);return O.createElement("input",{name:p,type:"hidden",value:P})}else{var B=y.length>0?y.map(function(T,M){return O.createElement("input",{key:"i-".concat(M),name:p,type:"hidden",value:c.getOptionValue(T)})}):O.createElement("input",{name:p,type:"hidden",value:""});return O.createElement("div",null,B)}else{var R=y[0]?this.getOptionValue(y[0]):"";return O.createElement("input",{name:p,type:"hidden",value:R})}}},{key:"renderLiveRegion",value:function(){var c=this.commonProps,h=this.state,x=h.ariaSelection,b=h.focusedOption,w=h.focusedValue,p=h.isFocused,A=h.selectValue,y=this.getFocusableOptions();return O.createElement(oh,we({},c,{id:this.getElementId("live-region"),ariaSelection:x,focusedOption:b,focusedValue:w,isFocused:p,selectValue:A,focusableOptions:y,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var c=this.getComponents(),h=c.Control,x=c.IndicatorsContainer,b=c.SelectContainer,w=c.ValueContainer,p=this.props,A=p.className,y=p.id,P=p.isDisabled,B=p.menuIsOpen,R=this.state.isFocused,T=this.commonProps=this.getCommonProps();return O.createElement(b,we({},T,{className:A,innerProps:{id:y,onKeyDown:this.onKeyDown},isDisabled:P,isFocused:R}),this.renderLiveRegion(),O.createElement(h,we({},T,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:P,isFocused:R,menuIsOpen:B}),O.createElement(w,we({},T,{isDisabled:P}),this.renderPlaceholderOrValue(),this.renderInput()),O.createElement(x,we({},T,{isDisabled:P}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(c,h){var x=h.prevProps,b=h.clearFocusValueOnUpdate,w=h.inputIsHiddenAfterUpdate,p=h.ariaSelection,A=h.isFocused,y=h.prevWasFocused,P=h.instancePrefix,B=c.options,R=c.value,T=c.menuIsOpen,M=c.inputValue,k=c.isMulti,H=Qo(R),G={};if(x&&(R!==x.value||B!==x.options||T!==x.menuIsOpen||M!==x.inputValue)){var Y=T?kh(c,H):[],re=T?ha($r(c,H),"".concat(P,"-option")):[],$=b?Fh(h,H):null,L=Vh(h,Y),K=ds(re,L);G={selectValue:H,focusedOption:L,focusedOptionId:K,focusableOptionsWithIds:re,focusedValue:$,clearFocusValueOnUpdate:!1}}var z=w!=null&&c!==x?{inputIsHidden:w,inputIsHiddenAfterUpdate:void 0}:{},Ve=p,Ae=A&&y;return A&&!Ae&&(Ve={value:Gr(k,H,H[0]||null),options:H,action:"initial-input-focus"},Ae=!y),(p==null?void 0:p.action)==="initial-input-focus"&&(Ve=null),xe(xe(xe({},G),z),{},{prevProps:c,ariaSelection:Ve,prevWasFocused:Ae})}}]),l}(O.Component);ql.defaultProps=Lh;var Hh=O.forwardRef(function(s,i){var l=Z1(s);return O.createElement(ql,we({ref:i},l))}),jh=Hh;/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zl=(...s)=>s.filter((i,l,d)=>!!i&&i.trim()!==""&&d.indexOf(i)===l).join(" ").trim();/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=O.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:c="",children:h,iconNode:x,...b},w)=>O.createElement("svg",{ref:w,...Gh,width:i,height:i,stroke:s,strokeWidth:d?Number(l)*24/Number(i):l,className:Zl("lucide",c),...b},[...x.map(([p,A])=>O.createElement(p,A)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=(s,i)=>{const l=O.forwardRef(({className:d,...c},h)=>O.createElement(Xh,{ref:h,iconNode:i,className:Zl(`lucide-${Wh(s)}`,d),...c}));return l.displayName=`${s}`,l};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=mn("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=mn("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=mn("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=mn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=mn("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=mn("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=mn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=mn("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=mn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),wn="https://religious-cherianne-dbprops-ef8ee171.koyeb.app";async function xa(){return await(await De.get(`${wn}/api/available_books`)).data}async function fs(){return await(await De.get(`${wn}/api/borrowed_books`)).data}async function eg(s){return await(await De.get(`${wn}/api/book/${s}`)).data}async function tg(){const s=await De.get(`${wn}/api/members`);return console.log("API Response:",s.data),s.data.members||s.data}const ng=async(s,i,l)=>{try{return(await De.post(`${wn}/api/book/borrow`,{qr_code:s,member_id:i,book_state:l})).data}catch(d){throw console.error("Error borrowing book:",d.response||d),d}},rg=async s=>{try{return(await De.post(`${wn}/api/book/return`,{qr_code:s})).data}catch(i){throw console.error("Error returning book:",i),i}};async function gr(s,i){return(await De.get(`${wn}/api/loans/history`,{params:{qr_code:s||"",show_all:i?"true":"false"}})).data}const ig=async(s,i,l)=>{var d,c;try{return(await De.post(`${wn}/api/send-reminder`,{loan_id:s,subject:i,loan_details:l})).data}catch(h){return console.error(`Error sending reminder for loan_id ${s}:`,h),{success:!1,error:((c=(d=h.response)==null?void 0:d.data)==null?void 0:c.error)||h.message||"Unknown error"}}},pa=async s=>{try{const i=await De.get(`${wn}/api/reminders/last/${s}`),{sent_at:l}=i.data;return{sent_at:l}}catch(i){return console.error(`Error fetching last reminder for loan_id ${s}:`,i),null}};var ue;(function(s){s[s.QR_CODE=0]="QR_CODE",s[s.AZTEC=1]="AZTEC",s[s.CODABAR=2]="CODABAR",s[s.CODE_39=3]="CODE_39",s[s.CODE_93=4]="CODE_93",s[s.CODE_128=5]="CODE_128",s[s.DATA_MATRIX=6]="DATA_MATRIX",s[s.MAXICODE=7]="MAXICODE",s[s.ITF=8]="ITF",s[s.EAN_13=9]="EAN_13",s[s.EAN_8=10]="EAN_8",s[s.PDF_417=11]="PDF_417",s[s.RSS_14=12]="RSS_14",s[s.RSS_EXPANDED=13]="RSS_EXPANDED",s[s.UPC_A=14]="UPC_A",s[s.UPC_E=15]="UPC_E",s[s.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ue||(ue={}));var ma=new Map([[ue.QR_CODE,"QR_CODE"],[ue.AZTEC,"AZTEC"],[ue.CODABAR,"CODABAR"],[ue.CODE_39,"CODE_39"],[ue.CODE_93,"CODE_93"],[ue.CODE_128,"CODE_128"],[ue.DATA_MATRIX,"DATA_MATRIX"],[ue.MAXICODE,"MAXICODE"],[ue.ITF,"ITF"],[ue.EAN_13,"EAN_13"],[ue.EAN_8,"EAN_8"],[ue.PDF_417,"PDF_417"],[ue.RSS_14,"RSS_14"],[ue.RSS_EXPANDED,"RSS_EXPANDED"],[ue.UPC_A,"UPC_A"],[ue.UPC_E,"UPC_E"],[ue.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),wa;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.URL=1]="URL"})(wa||(wa={}));function sg(s){return Object.values(ue).includes(s)}var li;(function(s){s[s.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",s[s.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(li||(li={}));var og=function(){function s(){}return s.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",s.SCAN_DEFAULT_FPS=2,s.DEFAULT_DISABLE_FLIP=!1,s.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,s.DEFAULT_SUPPORTED_SCAN_TYPE=[li.SCAN_TYPE_CAMERA,li.SCAN_TYPE_FILE],s}(),Kl=function(){function s(i,l){this.format=i,this.formatName=l}return s.prototype.toString=function(){return this.formatName},s.create=function(i){if(!ma.has(i))throw"".concat(i," not in html5QrcodeSupportedFormatsTextMap");return new s(i,ma.get(i))},s}(),ba=function(){function s(){}return s.createFromText=function(i){var l={text:i};return{decodedText:i,result:l}},s.createFromQrcodeResult=function(i){return{decodedText:i.text,result:i}},s}(),Rs;(function(s){s[s.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",s[s.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",s[s.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Rs||(Rs={}));var ag=function(){function s(){}return s.createFrom=function(i){return{errorMessage:i,type:Rs.UNKWOWN_ERROR}},s}(),lg=function(){function s(i){this.verbose=i}return s.prototype.log=function(i){this.verbose&&console.log(i)},s.prototype.warn=function(i){this.verbose&&console.warn(i)},s.prototype.logError=function(i,l){(this.verbose||l===!0)&&console.error(i)},s.prototype.logErrors=function(i){if(i.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(i)},s}();function fn(s){return typeof s>"u"||s===null}var qn=function(){function s(){}return s.codeParseError=function(i){return"QR code parse error, error = ".concat(i)},s.errorGettingUserMedia=function(i){return"Error getting userMedia, error = ".concat(i)},s.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},s.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},s.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},s.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},s.scannerPaused=function(){return"Scanner paused"},s}(),$l=function(){function s(){}return s.isMediaStreamConstraintsValid=function(i,l){if(typeof i!="object"){var d=typeof i;return l.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(d,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],h=new Set(c),x=Object.keys(i),b=0,w=x;b<w.length;b++){var p=w[b];if(h.has(p))return l.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},s}(),Ms={exports:{}};(function(s,i){(function(l,d){d(i)})(ur,function(l){function d(C){return C==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,e){C.__proto__=e}||function(C,e){for(var t in e)e.hasOwnProperty(t)&&(C[t]=e[t])};function h(C,e){c(C,e);function t(){this.constructor=C}C.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function x(C,e){var t=Object.setPrototypeOf;t?t(C,e):C.__proto__=e}function b(C,e){e===void 0&&(e=C.constructor);var t=Error.captureStackTrace;t&&t(C,e)}var w=function(C){h(e,C);function e(t){var n=this.constructor,r=C.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),x(r,n.prototype),b(r),r}return e}(Error);class p extends w{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}p.kind="Exception";class A extends p{}A.kind="ArgumentException";class y extends p{}y.kind="IllegalArgumentException";class P{constructor(e){if(this.binarizer=e,e===null)throw new y("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const o=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new P(this.binarizer.createBinarizer(o))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new P(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new P(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class B extends p{static getChecksumInstance(){return new B}}B.kind="ChecksumException";class R{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class T{static arraycopy(e,t,n,r,o){for(;o--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class M extends p{}M.kind="IndexOutOfBoundsException";class k extends M{constructor(e=void 0,t=void 0){super(t),this.index=e,this.message=t}}k.kind="ArrayIndexOutOfBoundsException";class H{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){H.rangeCheck(e.length,t,n);for(let o=t;o<n;o++)e[o]=r}static rangeCheck(e,t,n){if(t>n)throw new y("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new k(t);if(n>e)throw new k(n)}static asList(...e){return e}static create(e,t,n){return Array.from({length:e}).map(o=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(o=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(e===null)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,o=new Int32Array(r);return T.arraycopy(e,t,o,0,r),o}static binarySearch(e,t,n){n===void 0&&(n=H.numberComparator);let r=0,o=e.length-1;for(;r<=o;){const a=o+r>>1,u=n(t,e[a]);if(u>0)r=a+1;else if(u<0)o=a-1;else return a}return-r-1}static numberComparator(e,t){return e-t}}class G{static numberOfTrailingZeros(e){let t;if(e===0)return 32;let n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}G.MIN_VALUE_32_BITS=-2147483648,G.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Y{constructor(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=Y.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const t=Y.makeArray(e);T.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),o=n[r];o&=~((1<<(e&31))-1);const a=n.length;for(;o===0;){if(++r===a)return t;o=n[r]}const u=r*32+G.numberOfTrailingZeros(o);return u>t?t:u}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),o=~n[r];o&=~((1<<(e&31))-1);const a=n.length;for(;o===0;){if(++r===a)return t;o=~n[r]}const u=r*32+G.numberOfTrailingZeros(o);return u>t?t:u}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new y;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),o=this.bits;for(let a=n;a<=r;a++){const u=a>n?0:e&31,g=(2<<(a<r?31:t&31))-(1<<u);o[a]|=g}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new y;if(t===e)return!0;t--;const r=Math.floor(e/32),o=Math.floor(t/32),a=this.bits;for(let u=r;u<=o;u++){const f=u>r?0:e&31,m=(2<<(u<o?31:t&31))-(1<<f)&4294967295;if((a[u]&m)!==(n?m:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,t){if(t<0||t>32)throw new y("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new y("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let o=0;o<r;o++){let a=0;for(let u=0;u<8;u++)this.get(e)&&(a|=1<<7-u),e++;t[n+o]=a}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let o=0;o<n;o++){let a=r[o];a=a>>1&1431655765|(a&1431655765)<<1,a=a>>2&858993459|(a&858993459)<<2,a=a>>4&252645135|(a&252645135)<<4,a=a>>8&16711935|(a&16711935)<<8,a=a>>16&65535|(a&65535)<<16,e[t-o]=a}if(this.size!==n*32){const o=n*32-this.size;let a=e[0]>>>o;for(let u=1;u<n;u++){const f=e[u];a|=f<<32-o,e[u-1]=a,a=f>>>o}e[n-1]=a}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof Y))return!1;const t=e;return this.size===t.size&&H.equals(this.bits,t.bits)}hashCode(){return 31*this.size+H.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new Y(this.size,this.bits.slice())}}var re;(function(C){C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(re||(re={}));var $=re;class L extends p{static getFormatInstance(){return new L}}L.kind="FormatException";var K;(function(C){C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR"})(K||(K={}));class z{constructor(e,t,n,...r){this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=r,z.VALUE_IDENTIFIER_TO_ECI.set(e,this),z.NAME_TO_ECI.set(n,this);const o=this.values;for(let a=0,u=o.length;a!==u;a++){const f=o[a];z.VALUES_TO_ECI.set(f,this)}for(const a of r)z.NAME_TO_ECI.set(a,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new L("incorect value");const t=z.VALUES_TO_ECI.get(e);if(t===void 0)throw new L("incorect value");return t}static getCharacterSetECIByName(e){const t=z.NAME_TO_ECI.get(e);if(t===void 0)throw new L("incorect value");return t}equals(e){if(!(e instanceof z))return!1;const t=e;return this.getName()===t.getName()}}z.VALUE_IDENTIFIER_TO_ECI=new Map,z.VALUES_TO_ECI=new Map,z.NAME_TO_ECI=new Map,z.Cp437=new z(K.Cp437,Int32Array.from([0,2]),"Cp437"),z.ISO8859_1=new z(K.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),z.ISO8859_2=new z(K.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),z.ISO8859_3=new z(K.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),z.ISO8859_4=new z(K.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),z.ISO8859_5=new z(K.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),z.ISO8859_6=new z(K.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),z.ISO8859_7=new z(K.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),z.ISO8859_8=new z(K.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),z.ISO8859_9=new z(K.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),z.ISO8859_10=new z(K.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),z.ISO8859_11=new z(K.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),z.ISO8859_13=new z(K.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),z.ISO8859_14=new z(K.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),z.ISO8859_15=new z(K.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),z.ISO8859_16=new z(K.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),z.SJIS=new z(K.SJIS,20,"SJIS","Shift_JIS"),z.Cp1250=new z(K.Cp1250,21,"Cp1250","windows-1250"),z.Cp1251=new z(K.Cp1251,22,"Cp1251","windows-1251"),z.Cp1252=new z(K.Cp1252,23,"Cp1252","windows-1252"),z.Cp1256=new z(K.Cp1256,24,"Cp1256","windows-1256"),z.UnicodeBigUnmarked=new z(K.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),z.UTF8=new z(K.UTF8,26,"UTF8","UTF-8"),z.ASCII=new z(K.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),z.Big5=new z(K.Big5,28,"Big5"),z.GB18030=new z(K.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),z.EUC_KR=new z(K.EUC_KR,30,"EUC_KR","EUC-KR");class Ve extends p{}Ve.kind="UnsupportedOperationException";class Ae{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!Ae.isBrowser()&&e==="ISO-8859-1"}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof z?e:z.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(Ae.isDecodeFallbackSupported(n)){let r="";for(let o=0,a=e.length;o<a;o++){let u=e[o].toString(16);u.length<2&&(u="0"+u),r+="%"+u}return decodeURIComponent(r)}if(n.equals(z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Ve(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(z.UTF8)||e.equals(z.ISO8859_1)||e.equals(z.ASCII)}static encodeFallback(e){const n=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let o=0;o<n.length;o++)r.push(n[o].charCodeAt(0));return new Uint8Array(r)}}class ae{static castAsNonUtf8Char(e,t=null){const n=t?t.getName():this.ISO88591;return Ae.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(t!=null&&t.get($.CHARACTER_SET)!==void 0)return t.get($.CHARACTER_SET).toString();const n=e.length;let r=!0,o=!0,a=!0,u=0,f=0,g=0,m=0,E=0,v=0,I=0,N=0,D=0,F=0,W=0;const ee=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let ne=0;ne<n&&(r||o||a);ne++){const Z=e[ne]&255;a&&(u>0?Z&128?u--:a=!1:Z&128&&(Z&64?(u++,Z&32?(u++,Z&16?(u++,Z&8?a=!1:m++):g++):f++):a=!1)),r&&(Z>127&&Z<160?r=!1:Z>159&&(Z<192||Z===215||Z===247)&&W++),o&&(E>0?Z<64||Z===127||Z>252?o=!1:E--:Z===128||Z===160||Z>239?o=!1:Z>160&&Z<224?(v++,N=0,I++,I>D&&(D=I)):Z>127?(E++,I=0,N++,N>F&&(F=N)):(I=0,N=0))}return a&&u>0&&(a=!1),o&&E>0&&(o=!1),a&&(ee||f+g+m>0)?ae.UTF8:o&&(ae.ASSUME_SHIFT_JIS||D>=3||F>=3)?ae.SHIFT_JIS:r&&o?D===2&&v===2||W*10>=n?ae.SHIFT_JIS:ae.ISO88591:r?ae.ISO88591:o?ae.SHIFT_JIS:a?ae.UTF8:ae.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let n=-1;function r(a,u,f,g,m,E){if(a==="%%")return"%";if(t[++n]===void 0)return;a=g?parseInt(g.substr(1)):void 0;let v=m?parseInt(m.substr(1)):void 0,I;switch(E){case"s":I=t[n];break;case"c":I=t[n][0];break;case"f":I=parseFloat(t[n]).toFixed(a);break;case"p":I=parseFloat(t[n]).toPrecision(a);break;case"e":I=parseFloat(t[n]).toExponential(a);break;case"x":I=parseInt(t[n]).toString(v||16);break;case"d":I=parseFloat(parseInt(t[n],v||10).toPrecision(a)).toFixed(0);break}I=typeof I=="object"?JSON.stringify(I):(+I).toString(v);let N=parseInt(f),D=f&&f[0]+""=="0"?"0":" ";for(;I.length<N;)I=u!==void 0?I+D:D+I;return I}let o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,r)}static getBytes(e,t){return Ae.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}ae.SHIFT_JIS=z.SJIS.getName(),ae.GB2312="GB2312",ae.ISO88591=z.ISO8859_1.getName(),ae.EUC_JP="EUC_JP",ae.UTF8=z.UTF8.getName(),ae.PLATFORM_DEFAULT_ENCODING=ae.UTF8,ae.ASSUME_SHIFT_JIS=!1;class Ee{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ae.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class Te{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,t==null&&(t=e),this.height=t,e<1||t<1)throw new y("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,r==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new Te(n,t);for(let o=0;o<t;o++){const a=e[o];for(let u=0;u<n;u++)a[u]&&r.set(u,o)}return r}static parseFromString(e,t,n){if(e===null)throw new y("stringRepresentation cannot be null");const r=new Array(e.length);let o=0,a=0,u=-1,f=0,g=0;for(;g<e.length;)if(e.charAt(g)===`
`||e.charAt(g)==="\r"){if(o>a){if(u===-1)u=o-a;else if(o-a!==u)throw new y("row lengths do not match");a=o,f++}g++}else if(e.substring(g,g+t.length)===t)g+=t.length,r[o]=!0,o++;else if(e.substring(g,g+n.length)===n)g+=n.length,r[o]=!1,o++;else throw new y("illegal character encountered: "+e.substring(g));if(o>a){if(u===-1)u=o-a;else if(o-a!==u)throw new y("row lengths do not match");f++}const m=new Te(u,f);for(let E=0;E<o;E++)r[E]&&m.set(Math.floor(E%u),Math.floor(E/u));return m}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new y("input matrix dimensions do not match");const t=new Y(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let o=0,a=this.height;o<a;o++){const u=o*n,f=e.getRow(o,t).getBitArray();for(let g=0;g<n;g++)r[u+g]^=f[g]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new y("Left and top must be nonnegative");if(r<1||n<1)throw new y("Height and width must be at least 1");const o=e+n,a=t+r;if(a>this.height||o>this.width)throw new y("The region must fit inside the matrix");const u=this.rowSize,f=this.bits;for(let g=t;g<a;g++){const m=g*u;for(let E=e;E<o;E++)f[m+Math.floor(E/32)]|=1<<(E&31)&4294967295}}getRow(e,t){t==null||t.getSize()<this.width?t=new Y(this.width):t.clear();const n=this.rowSize,r=this.bits,o=e*n;for(let a=0;a<n;a++)t.setBulk(a*32,r[o+a]);return t}setRow(e,t){T.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new Y(e),r=new Y(e);for(let o=0,a=Math.floor((t+1)/2);o<a;o++)n=this.getRow(o,n),r=this.getRow(t-1-o,r),n.reverse(),r.reverse(),this.setRow(o,r),this.setRow(t-1-o,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let o=e,a=t,u=-1,f=-1;for(let g=0;g<t;g++)for(let m=0;m<n;m++){const E=r[g*n+m];if(E!==0){if(g<a&&(a=g),g>f&&(f=g),m*32<o){let v=0;for(;!(E<<31-v&4294967295);)v++;m*32+v<o&&(o=m*32+v)}if(m*32+31>u){let v=31;for(;!(E>>>v);)v--;m*32+v>u&&(u=m*32+v)}}}return u<o||f<a?null:Int32Array.from([o,a,u-o+1,f-a+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;const r=n/e;let o=n%e*32;const a=t[n];let u=0;for(;!(a<<31-u&4294967295);)u++;return o+=u,Int32Array.from([o,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&t[n]===0;)n--;if(n<0)return null;const r=Math.floor(n/e);let o=Math.floor(n%e)*32;const a=t[n];let u=31;for(;!(a>>>u);)u--;return o+=u,Int32Array.from([o,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Te))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&H.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+H.hashCode(this.bits),e}toString(e="X ",t="  ",n=`
`){return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new Ee;for(let o=0,a=this.height;o<a;o++){for(let u=0,f=this.width;u<f;u++)r.append(this.get(u,o)?e:t);r.append(n)}return r.toString()}clone(){return new Te(this.width,this.height,this.rowSize,this.bits.slice())}}class U extends p{static getNotFoundInstance(){return new U}}U.kind="NotFoundException";class pe extends R{constructor(e){super(e),this.luminances=pe.EMPTY,this.buckets=new Int32Array(pe.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();t==null||t.getSize()<r?t=new Y(r):t.clear(),this.initArrays(r);const o=n.getRow(e,this.luminances),a=this.buckets;for(let f=0;f<r;f++)a[(o[f]&255)>>pe.LUMINANCE_SHIFT]++;const u=pe.estimateBlackPoint(a);if(r<3)for(let f=0;f<r;f++)(o[f]&255)<u&&t.set(f);else{let f=o[0]&255,g=o[1]&255;for(let m=1;m<r-1;m++){const E=o[m+1]&255;(g*4-f-E)/2<u&&t.set(m),f=g,g=E}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new Te(t,n);this.initArrays(t);const o=this.buckets;for(let f=1;f<5;f++){const g=Math.floor(n*f/5),m=e.getRow(g,this.luminances),E=Math.floor(t*4/5);for(let v=Math.floor(t/5);v<E;v++){const I=m[v]&255;o[I>>pe.LUMINANCE_SHIFT]++}}const a=pe.estimateBlackPoint(o),u=e.getMatrix();for(let f=0;f<n;f++){const g=f*t;for(let m=0;m<t;m++)(u[g+m]&255)<a&&r.set(m,f)}return r}createBinarizer(e){return new pe(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<pe.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,o=0;for(let m=0;m<t;m++)e[m]>o&&(r=m,o=e[m]),e[m]>n&&(n=e[m]);let a=0,u=0;for(let m=0;m<t;m++){const E=m-r,v=e[m]*E*E;v>u&&(a=m,u=v)}if(r>a){const m=r;r=a,a=m}if(a-r<=t/16)throw new U;let f=a-1,g=-1;for(let m=a-1;m>r;m--){const E=m-r,v=E*E*(a-m)*(n-e[m]);v>g&&(f=m,g=v)}return f<<pe.LUMINANCE_SHIFT}}pe.LUMINANCE_BITS=5,pe.LUMINANCE_SHIFT=8-pe.LUMINANCE_BITS,pe.LUMINANCE_BUCKETS=1<<pe.LUMINANCE_BITS,pe.EMPTY=Uint8ClampedArray.from([0]);class J extends pe{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=J.MINIMUM_DIMENSION&&n>=J.MINIMUM_DIMENSION){const r=e.getMatrix();let o=t>>J.BLOCK_SIZE_POWER;t&J.BLOCK_SIZE_MASK&&o++;let a=n>>J.BLOCK_SIZE_POWER;n&J.BLOCK_SIZE_MASK&&a++;const u=J.calculateBlackPoints(r,o,a,t,n),f=new Te(t,n);J.calculateThresholdForBlock(r,o,a,t,n,u,f),this.matrix=f}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new J(e)}static calculateThresholdForBlock(e,t,n,r,o,a,u){const f=o-J.BLOCK_SIZE,g=r-J.BLOCK_SIZE;for(let m=0;m<n;m++){let E=m<<J.BLOCK_SIZE_POWER;E>f&&(E=f);const v=J.cap(m,2,n-3);for(let I=0;I<t;I++){let N=I<<J.BLOCK_SIZE_POWER;N>g&&(N=g);const D=J.cap(I,2,t-3);let F=0;for(let ee=-2;ee<=2;ee++){const ne=a[v+ee];F+=ne[D-2]+ne[D-1]+ne[D]+ne[D+1]+ne[D+2]}const W=F/25;J.thresholdBlock(e,N,E,W,r,u)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,o,a){for(let u=0,f=n*o+t;u<J.BLOCK_SIZE;u++,f+=o)for(let g=0;g<J.BLOCK_SIZE;g++)(e[f+g]&255)<=r&&a.set(t+g,n+u)}static calculateBlackPoints(e,t,n,r,o){const a=o-J.BLOCK_SIZE,u=r-J.BLOCK_SIZE,f=new Array(n);for(let g=0;g<n;g++){f[g]=new Int32Array(t);let m=g<<J.BLOCK_SIZE_POWER;m>a&&(m=a);for(let E=0;E<t;E++){let v=E<<J.BLOCK_SIZE_POWER;v>u&&(v=u);let I=0,N=255,D=0;for(let W=0,ee=m*r+v;W<J.BLOCK_SIZE;W++,ee+=r){for(let ne=0;ne<J.BLOCK_SIZE;ne++){const Z=e[ee+ne]&255;I+=Z,Z<N&&(N=Z),Z>D&&(D=Z)}if(D-N>J.MIN_DYNAMIC_RANGE)for(W++,ee+=r;W<J.BLOCK_SIZE;W++,ee+=r)for(let ne=0;ne<J.BLOCK_SIZE;ne++)I+=e[ee+ne]&255}let F=I>>J.BLOCK_SIZE_POWER*2;if(D-N<=J.MIN_DYNAMIC_RANGE&&(F=N/2,g>0&&E>0)){const W=(f[g-1][E]+2*f[g][E-1]+f[g-1][E-1])/4;N<W&&(F=W)}f[g][E]=F}}return f}}J.BLOCK_SIZE_POWER=3,J.BLOCK_SIZE=1<<J.BLOCK_SIZE_POWER,J.BLOCK_SIZE_MASK=J.BLOCK_SIZE-1,J.MINIMUM_DIMENSION=J.BLOCK_SIZE*5,J.MIN_DYNAMIC_RANGE=24;class Xe{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new Ve("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ve("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ve("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new Ee;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let o=0;o<this.width;o++){const a=r[o]&255;let u;a<64?u="#":a<128?u="+":a<192?u=".":u=" ",t.append(u)}t.append(`
`)}return t.toString()}}class rt extends Xe{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let o=0;o<r;o++)n[o]=255-(n[o]&255);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(e[r]&255);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new rt(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new rt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new rt(this.delegate.rotateCounterClockwise45())}}class Ce extends Xe{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Ce.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return Ce.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let o=0,a=0,u=e.length;o<u;o+=4,a++){let f;if(e[o+3]===0)f=255;else{const m=e[o],E=e[o+1],v=e[o+2];f=306*m+601*E+117*v+512>>10}r[a]=f}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new y("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return t===null?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*Ce.DEGREE_TO_RADIANS,o=this.canvas.width,a=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(r))*o+Math.abs(Math.sin(r))*a),f=Math.ceil(Math.abs(Math.sin(r))*o+Math.abs(Math.cos(r))*a);return t.width=u,t.height=f,n.translate(u/2,f/2),n.rotate(r),n.drawImage(this.canvas,o/-2,a/-2),this.buffer=Ce.makeBufferFromCanvasImageData(t),this}invert(){return new rt(this)}}Ce.DEGREE_TO_RADIANS=Math.PI/180;class Kt{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Oe=(globalThis||ur||self||window||void 0)&&(globalThis||ur||self||window||void 0).__awaiter||function(C,e,t,n){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function u(m){try{g(n.next(m))}catch(E){a(E)}}function f(m){try{g(n.throw(m))}catch(E){a(E)}}function g(m){m.done?o(m.value):r(m.value).then(u,f)}g((n=n.apply(C,e||[])).next())})};class Qe{constructor(e,t=500,n){this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return Oe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const r=n.kind==="video"?"videoinput":n.kind;if(r!=="videoinput")continue;const o=n.deviceId||n.id,a=n.label||`Video device ${t.length+1}`,u=n.groupId,f={deviceId:o,label:a,kind:r,groupId:u};t.push(f)}return t})}getVideoInputDevices(){return Oe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new Kt(t.deviceId,t.label))})}findDeviceById(e){return Oe(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(n=>n.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return Oe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return Oe(this,void 0,void 0,function*(){this.reset();let n;e?n={deviceId:{exact:e}}:n={facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return Oe(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return Oe(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return Oe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return Oe(this,void 0,void 0,function*(){let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};const o={video:r};return yield this.decodeFromConstraints(o,t,n)})}decodeFromConstraints(e,t,n){return Oe(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return Oe(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return Oe(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return Oe(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new A(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new A(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new A("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new A("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(e===void 0&&t===void 0)throw new A("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new A("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);this.imageElement=t;let n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new A("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new A("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return Oe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return Oe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,n=!0){this._stopAsyncDecode=!1;const r=(o,a)=>{if(this._stopAsyncDecode){a(new U("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const u=this.decode(e);o(u)}catch(u){const f=t&&u instanceof U,m=(u instanceof B||u instanceof L)&&n;if(f||m)return setTimeout(r,this._timeBetweenDecodingAttempts,o,a);a(u)}};return new Promise((o,a)=>r(o,a))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r);const o=r instanceof B||r instanceof L,a=r instanceof U;(o||a)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,n=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new Ce(t),r=new J(n);return new P(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const n=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Ue{constructor(e,t,n=t==null?0:8*t.length,r,o,a=T.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=o,this.timestamp=a,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=r,this.format=o,this.resultMetadata=null,a==null?this.timestamp=T.currentTimeMillis():this.timestamp=a}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){const n=new Array(t.length+e.length);T.arraycopy(t,0,n,0,t.length),T.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}var te;(function(C){C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(te||(te={}));var oe=te,Ot;(function(C){C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ot||(Ot={}));var He=Ot;class Wt{constructor(e,t,n,r,o=-1,a=-1){this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=a,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Gt{exp(e){return this.expTable[e]}log(e){if(e===0)throw new y;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class Q{constructor(e,t){if(t.length===0)throw new y;this.field=e;const n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),T.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const t=this.coefficients;let n;if(e===1){n=0;for(let a=0,u=t.length;a!==u;a++){const f=t[a];n=Gt.addOrSubtract(n,f)}return n}n=t[0];const r=t.length,o=this.field;for(let a=1;a<r;a++)n=Gt.addOrSubtract(o.multiply(e,n),t[a]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const a=t;t=n,n=a}let r=new Int32Array(n.length);const o=n.length-t.length;T.arraycopy(n,0,r,0,o);for(let a=o;a<n.length;a++)r[a]=Gt.addOrSubtract(t[a-o],n[a]);return new Q(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,o=r.length,a=new Int32Array(n+o-1),u=this.field;for(let f=0;f<n;f++){const g=t[f];for(let m=0;m<o;m++)a[f+m]=Gt.addOrSubtract(a[f+m],u.multiply(g,r[m]))}return new Q(u,a)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),o=this.coefficients;for(let a=0;a<t;a++)r[a]=n.multiply(o[a],e);return new Q(n,r)}multiplyByMonomial(e,t){if(e<0)throw new y;if(t===0)return this.field.getZero();const n=this.coefficients,r=n.length,o=new Int32Array(r+e),a=this.field;for(let u=0;u<r;u++)o[u]=a.multiply(n[u],t);return new Q(a,o)}divide(e){if(!this.field.equals(e.field))throw new y("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new y("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const o=e.getCoefficient(e.getDegree()),a=t.inverse(o);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const u=r.getDegree()-e.getDegree(),f=t.multiply(r.getCoefficient(r.getDegree()),a),g=e.multiplyByMonomial(u,f),m=t.buildMonomial(u,f);n=n.addOrSubtract(m),r=r.addOrSubtract(g)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){const r=this.field.log(n);r===0?e+="1":r===1?e+="a":(e+="a^",e+=r)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e}}class le extends p{}le.kind="ArithmeticException";class se extends Gt{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let o=1;for(let u=0;u<t;u++)r[u]=o,o*=2,o>=t&&(o^=e,o&=t-1);this.expTable=r;const a=new Int32Array(t);for(let u=0;u<t-1;u++)a[r[u]]=u;this.logTable=a,this.zero=new Q(this,Int32Array.from([0])),this.one=new Q(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new y;if(t===0)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new Q(this,n)}inverse(e){if(e===0)throw new le;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+G.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}se.AZTEC_DATA_12=new se(4201,4096,1),se.AZTEC_DATA_10=new se(1033,1024,1),se.AZTEC_DATA_6=new se(67,64,1),se.AZTEC_PARAM=new se(19,16,1),se.QR_CODE_FIELD_256=new se(285,256,0),se.DATA_MATRIX_FIELD_256=new se(301,256,1),se.AZTEC_DATA_8=se.DATA_MATRIX_FIELD_256,se.MAXICODE_FIELD_64=se.AZTEC_DATA_6;class Se extends p{}Se.kind="ReedSolomonException";class ze extends p{}ze.kind="IllegalStateException";class Xt{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new Q(n,e),o=new Int32Array(t);let a=!0;for(let I=0;I<t;I++){const N=r.evaluateAt(n.exp(I+n.getGeneratorBase()));o[o.length-1-I]=N,N!==0&&(a=!1)}if(a)return;const u=new Q(n,o),f=this.runEuclideanAlgorithm(n.buildMonomial(t,1),u,t),g=f[0],m=f[1],E=this.findErrorLocations(g),v=this.findErrorMagnitudes(m,E);for(let I=0;I<E.length;I++){const N=e.length-1-n.log(E[I]);if(N<0)throw new Se("Bad error location");e[N]=se.addOrSubtract(e[N],v[I])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const I=e;e=t,t=I}const r=this.field;let o=e,a=t,u=r.getZero(),f=r.getOne();for(;a.getDegree()>=(n/2|0);){let I=o,N=u;if(o=a,u=f,o.isZero())throw new Se("r_{i-1} was zero");a=I;let D=r.getZero();const F=o.getCoefficient(o.getDegree()),W=r.inverse(F);for(;a.getDegree()>=o.getDegree()&&!a.isZero();){const ee=a.getDegree()-o.getDegree(),ne=r.multiply(a.getCoefficient(a.getDegree()),W);D=D.addOrSubtract(r.buildMonomial(ee,ne)),a=a.addOrSubtract(o.multiplyByMonomial(ee,ne))}if(f=D.multiply(u).addOrSubtract(N),a.getDegree()>=o.getDegree())throw new ze("Division algorithm failed to reduce polynomial?")}const g=f.getCoefficient(0);if(g===0)throw new Se("sigmaTilde(0) was zero");const m=r.inverse(g),E=f.multiplyScalar(m),v=a.multiplyScalar(m);return[E,v]}findErrorLocations(e){const t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const o=this.field;for(let a=1;a<o.getSize()&&r<t;a++)e.evaluateAt(a)===0&&(n[r]=o.inverse(a),r++);if(r!==t)throw new Se("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),o=this.field;for(let a=0;a<n;a++){const u=o.inverse(t[a]);let f=1;for(let g=0;g<n;g++)if(a!==g){const m=o.multiply(t[g],u),E=m&1?m&-2:m|1;f=o.multiply(f,E)}r[a]=o.multiply(e.evaluateAt(u),o.inverse(f)),o.getGeneratorBase()!==0&&(r[a]=o.multiply(r[a],u))}return r}}var it;(function(C){C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY"})(it||(it={}));class je{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),o=je.convertBoolArrayToByteArray(r),a=je.getEncodedData(r),u=new Wt(o,a,null,null);return u.setNumBits(r.length),u}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=it.UPPER,r=it.UPPER,o="",a=0;for(;a<t;)if(r===it.BINARY){if(t-a<5)break;let u=je.readCode(e,a,5);if(a+=5,u===0){if(t-a<11)break;u=je.readCode(e,a,11)+31,a+=11}for(let f=0;f<u;f++){if(t-a<8){a=t;break}const g=je.readCode(e,a,8);o+=ae.castAsNonUtf8Char(g),a+=8}r=n}else{let u=r===it.DIGIT?4:5;if(t-a<u)break;let f=je.readCode(e,a,u);a+=u;let g=je.getCharacter(r,f);g.startsWith("CTRL_")?(n=r,r=je.getTable(g.charAt(5)),g.charAt(6)==="L"&&(n=r)):(o+=g,r=n)}return o}static getTable(e){switch(e){case"L":return it.LOWER;case"P":return it.PUNCT;case"M":return it.MIXED;case"D":return it.DIGIT;case"B":return it.BINARY;case"U":default:return it.UPPER}}static getCharacter(e,t){switch(e){case it.UPPER:return je.UPPER_TABLE[t];case it.LOWER:return je.LOWER_TABLE[t];case it.MIXED:return je.MIXED_TABLE[t];case it.PUNCT:return je.PUNCT_TABLE[t];case it.DIGIT:return je.DIGIT_TABLE[t];default:throw new ze("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=se.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=se.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=se.AZTEC_DATA_10):(n=12,t=se.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),o=e.length/n;if(o<r)throw new L;let a=e.length%n,u=new Int32Array(o);for(let v=0;v<o;v++,a+=n)u[v]=je.readCode(e,a,n);try{new Xt(t).decode(u,o-r)}catch(v){throw new L(v)}let f=(1<<n)-1,g=0;for(let v=0;v<r;v++){let I=u[v];if(I===0||I===f)throw new L;(I===1||I===f-1)&&g++}let m=new Array(r*n-g),E=0;for(let v=0;v<r;v++){let I=u[v];if(I===1||I===f-1)m.fill(I>1,E,E+n-1),E+=n-1;else for(let N=n-1;N>=0;--N)m[E++]=(I&1<<N)!==0}return m}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+n*4,o=new Int32Array(r),a=new Array(this.totalBitsInLayer(n,t));if(t)for(let u=0;u<o.length;u++)o[u]=u;else{let u=r+1+2*G.truncDivision(G.truncDivision(r,2)-1,15),f=r/2,g=G.truncDivision(u,2);for(let m=0;m<f;m++){let E=m+G.truncDivision(m,15);o[f-m-1]=g-E-1,o[f+m]=g+E+1}}for(let u=0,f=0;u<n;u++){let g=(n-u)*4+(t?9:12),m=u*2,E=r-1-m;for(let v=0;v<g;v++){let I=v*2;for(let N=0;N<2;N++)a[f+I+N]=e.get(o[m+N],o[m+v]),a[f+2*g+I+N]=e.get(o[m+v],o[E-N]),a[f+4*g+I+N]=e.get(o[E-N],o[E-v]),a[f+6*g+I+N]=e.get(o[E-v],o[m+N])}f+=g*8}return a}static readCode(e,t,n){let r=0;for(let o=t;o<t+n;o++)r<<=1,e[o]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?je.readCode(e,t,8):je.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=je.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}je.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],je.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],je.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],je.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],je.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ie{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const o=e-n,a=t-r;return Math.sqrt(o*o+a*a)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++){const o=e[n];t+=o}return t}}class Tr{static floatToIntBits(e){return e}}Tr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class de{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof de){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*Tr.floatToIntBits(this.x)+Tr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let o,a,u;if(n>=t&&n>=r?(a=e[0],o=e[1],u=e[2]):r>=n&&r>=t?(a=e[1],o=e[0],u=e[2]):(a=e[2],o=e[0],u=e[1]),this.crossProductZ(o,a,u)<0){const f=o;o=u,u=f}e[0]=o,e[1]=a,e[2]=u}static distance(e,t){return Ie.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,o=t.y;return(n.x-r)*(e.y-o)-(n.y-o)*(e.x-r)}}class Or{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class so extends Or{constructor(e,t,n,r,o){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=o}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class dn{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=dn.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),r==null&&(r=e.getHeight()/2|0);const o=t/2|0;if(this.leftInit=n-o,this.rightInit=n+o,this.upInit=r-o,this.downInit=r+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new U}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,o=!1,a=!0,u=!1,f=!1,g=!1,m=!1,E=!1;const v=this.width,I=this.height;for(;a;){a=!1;let N=!0;for(;(N||!f)&&t<v;)N=this.containsBlackPoint(n,r,t,!1),N?(t++,a=!0,f=!0):f||t++;if(t>=v){o=!0;break}let D=!0;for(;(D||!g)&&r<I;)D=this.containsBlackPoint(e,t,r,!0),D?(r++,a=!0,g=!0):g||r++;if(r>=I){o=!0;break}let F=!0;for(;(F||!m)&&e>=0;)F=this.containsBlackPoint(n,r,e,!1),F?(e--,a=!0,m=!0):m||e--;if(e<0){o=!0;break}let W=!0;for(;(W||!E)&&n>=0;)W=this.containsBlackPoint(e,t,n,!0),W?(n--,a=!0,E=!0):E||n--;if(n<0){o=!0;break}a&&(u=!0)}if(!o&&u){const N=t-e;let D=null;for(let ne=1;D===null&&ne<N;ne++)D=this.getBlackPointOnSegment(e,r-ne,e+ne,r);if(D==null)throw new U;let F=null;for(let ne=1;F===null&&ne<N;ne++)F=this.getBlackPointOnSegment(e,n+ne,e+ne,n);if(F==null)throw new U;let W=null;for(let ne=1;W===null&&ne<N;ne++)W=this.getBlackPointOnSegment(t,n+ne,t-ne,n);if(W==null)throw new U;let ee=null;for(let ne=1;ee===null&&ne<N;ne++)ee=this.getBlackPointOnSegment(t,r-ne,t-ne,r);if(ee==null)throw new U;return this.centerEdges(ee,D,W,F)}else throw new U}getBlackPointOnSegment(e,t,n,r){const o=Ie.round(Ie.distance(e,t,n,r)),a=(n-e)/o,u=(r-t)/o,f=this.image;for(let g=0;g<o;g++){const m=Ie.round(e+g*a),E=Ie.round(t+g*u);if(f.get(m,E))return new de(m,E)}return null}centerEdges(e,t,n,r){const o=e.getX(),a=e.getY(),u=t.getX(),f=t.getY(),g=n.getX(),m=n.getY(),E=r.getX(),v=r.getY(),I=dn.CORR;return o<this.width/2?[new de(E-I,v+I),new de(u+I,f+I),new de(g-I,m-I),new de(o+I,a-I)]:[new de(E+I,v+I),new de(u+I,f-I),new de(g-I,m+I),new de(o-I,a-I)]}containsBlackPoint(e,t,n,r){const o=this.image;if(r){for(let a=e;a<=t;a++)if(o.get(a,n))return!0}else for(let a=e;a<=t;a++)if(o.get(n,a))return!0;return!1}}dn.INIT_SIZE=10,dn.CORR=1;class Bi{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let o=!0;for(let a=0;a<t.length&&o;a+=2){const u=Math.floor(t[a]),f=Math.floor(t[a+1]);if(u<-1||u>n||f<-1||f>r)throw new U;o=!1,u===-1?(t[a]=0,o=!0):u===n&&(t[a]=n-1,o=!0),f===-1?(t[a+1]=0,o=!0):f===r&&(t[a+1]=r-1,o=!0)}o=!0;for(let a=t.length-2;a>=0&&o;a-=2){const u=Math.floor(t[a]),f=Math.floor(t[a+1]);if(u<-1||u>n||f<-1||f>r)throw new U;o=!1,u===-1?(t[a]=0,o=!0):u===n&&(t[a]=n-1,o=!0),f===-1?(t[a+1]=0,o=!0):f===r&&(t[a+1]=r-1,o=!0)}}}class $t{constructor(e,t,n,r,o,a,u,f,g){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=o,this.a32=a,this.a13=u,this.a23=f,this.a33=g}static quadrilateralToQuadrilateral(e,t,n,r,o,a,u,f,g,m,E,v,I,N,D,F){const W=$t.quadrilateralToSquare(e,t,n,r,o,a,u,f);return $t.squareToQuadrilateral(g,m,E,v,I,N,D,F).times(W)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,o=this.a13,a=this.a21,u=this.a22,f=this.a23,g=this.a31,m=this.a32,E=this.a33;for(let v=0;v<t;v+=2){const I=e[v],N=e[v+1],D=o*I+f*N+E;e[v]=(n*I+a*N+g)/D,e[v+1]=(r*I+u*N+m)/D}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,o=this.a13,a=this.a21,u=this.a22,f=this.a23,g=this.a31,m=this.a32,E=this.a33,v=e.length;for(let I=0;I<v;I++){const N=e[I],D=t[I],F=o*N+f*D+E;e[I]=(n*N+a*D+g)/F,t[I]=(r*N+u*D+m)/F}}static squareToQuadrilateral(e,t,n,r,o,a,u,f){const g=e-n+o-u,m=t-r+a-f;if(g===0&&m===0)return new $t(n-e,o-n,e,r-t,a-r,t,0,0,1);{const E=n-o,v=u-o,I=r-a,N=f-a,D=E*N-v*I,F=(g*N-v*m)/D,W=(E*m-g*I)/D;return new $t(n-e+F*n,u-e+W*u,e,r-t+F*r,f-t+W*f,t,F,W,1)}}static quadrilateralToSquare(e,t,n,r,o,a,u,f){return $t.squareToQuadrilateral(e,t,n,r,o,a,u,f).buildAdjoint()}buildAdjoint(){return new $t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new $t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class oo extends Bi{sampleGrid(e,t,n,r,o,a,u,f,g,m,E,v,I,N,D,F,W,ee,ne){const Z=$t.quadrilateralToQuadrilateral(r,o,a,u,f,g,m,E,v,I,N,D,F,W,ee,ne);return this.sampleGridWithTransform(e,t,n,Z)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new U;const o=new Te(t,n),a=new Float32Array(2*t);for(let u=0;u<n;u++){const f=a.length,g=u+.5;for(let m=0;m<f;m+=2)a[m]=m/2+.5,a[m+1]=g;r.transformPoints(a),Bi.checkAndNudgePoints(e,a);try{for(let m=0;m<f;m+=2)e.get(Math.floor(a[m]),Math.floor(a[m+1]))&&o.set(m/2,u)}catch{throw new U}}return o}}class bn{static setGridSampler(e){bn.gridSampler=e}static getInstance(){return bn.gridSampler}}bn.gridSampler=new oo;class It{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new de(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ao{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new so(r,o,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new U;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let a=0;a<4;a++){let u=n[(this.shift+a)%4];this.compact?(r<<=7,r+=u>>1&127):(r<<=10,r+=(u>>2&992)+(u>>1&31))}let o=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)}getRotation(e,t){let n=0;e.forEach((r,o,a)=>{let u=(r>>t-2<<1)+(r&1);n=(n<<3)+u}),n=((n&1)<<11)+(n>>1);for(let r=0;r<4;r++)if(G.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new U}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let o=n-r,a=new Int32Array(n);for(let f=n-1;f>=0;--f)a[f]=e&15,e>>=4;try{new Xt(se.AZTEC_PARAM).decode(a,o)}catch{throw new U}let u=0;for(let f=0;f<r;f++)u=(u<<4)+a[f];return u}getBullsEyeCorners(e){let t=e,n=e,r=e,o=e,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let E=this.getFirstDifferent(t,a,1,-1),v=this.getFirstDifferent(n,a,1,1),I=this.getFirstDifferent(r,a,-1,1),N=this.getFirstDifferent(o,a,-1,-1);if(this.nbCenterLayers>2){let D=this.distancePoint(N,E)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(D<.75||D>1.25||!this.isWhiteOrBlackRectangle(E,v,I,N))break}t=E,n=v,r=I,o=N,a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new U;this.compact=this.nbCenterLayers===5;let u=new de(t.getX()+.5,t.getY()-.5),f=new de(n.getX()+.5,n.getY()+.5),g=new de(r.getX()-.5,r.getY()+.5),m=new de(o.getX()-.5,o.getY()-.5);return this.expandSquare([u,f,g,m],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let u=new dn(this.image).detect();e=u[0],t=u[1],n=u[2],r=u[3]}catch{let f=this.image.getWidth()/2,g=this.image.getHeight()/2;e=this.getFirstDifferent(new It(f+7,g-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new It(f+7,g+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new It(f-7,g+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new It(f-7,g-7),!1,-1,-1).toResultPoint()}let o=Ie.round((e.getX()+r.getX()+t.getX()+n.getX())/4),a=Ie.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let u=new dn(this.image,15,o,a).detect();e=u[0],t=u[1],n=u[2],r=u[3]}catch{e=this.getFirstDifferent(new It(o+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new It(o+7,a+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new It(o-7,a+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new It(o-7,a-7),!1,-1,-1).toResultPoint()}return o=Ie.round((e.getX()+r.getX()+t.getX()+n.getX())/4),a=Ie.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new It(o,a)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,o){let a=bn.getInstance(),u=this.getDimension(),f=u/2-this.nbCenterLayers,g=u/2+this.nbCenterLayers;return a.sampleGrid(e,u,u,f,f,g,f,g,g,f,g,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),o.getX(),o.getY())}sampleLine(e,t,n){let r=0,o=this.distanceResultPoint(e,t),a=o/n,u=e.getX(),f=e.getY(),g=a*(t.getX()-e.getX())/o,m=a*(t.getY()-e.getY())/o;for(let E=0;E<n;E++)this.image.get(Ie.round(u+E*g),Ie.round(f+E*m))&&(r|=1<<n-E-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let o=3;e=new It(e.getX()-o,e.getY()+o),t=new It(t.getX()-o,t.getY()-o),n=new It(n.getX()+o,n.getY()-o),r=new It(r.getX()+o,r.getY()+o);let a=this.getColor(r,e);if(a===0)return!1;let u=this.getColor(e,t);return u!==a||(u=this.getColor(t,n),u!==a)?!1:(u=this.getColor(n,r),u===a)}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,o=(t.getY()-e.getY())/n,a=0,u=e.getX(),f=e.getY(),g=this.image.get(e.getX(),e.getY()),m=Math.ceil(n);for(let v=0;v<m;v++)u+=r,f+=o,this.image.get(Ie.round(u),Ie.round(f))!==g&&a++;let E=a/n;return E>.1&&E<.9?0:E<=.1===g?1:-1}getFirstDifferent(e,t,n,r){let o=e.getX()+n,a=e.getY()+r;for(;this.isValid(o,a)&&this.image.get(o,a)===t;)o+=n,a+=r;for(o-=n,a-=r;this.isValid(o,a)&&this.image.get(o,a)===t;)o+=n;for(o-=n;this.isValid(o,a)&&this.image.get(o,a)===t;)a+=r;return a-=r,new It(o,a)}expandSquare(e,t,n){let r=n/(2*t),o=e[0].getX()-e[2].getX(),a=e[0].getY()-e[2].getY(),u=(e[0].getX()+e[2].getX())/2,f=(e[0].getY()+e[2].getY())/2,g=new de(u+r*o,f+r*a),m=new de(u-r*o,f-r*a);o=e[1].getX()-e[3].getX(),a=e[1].getY()-e[3].getY(),u=(e[1].getX()+e[3].getX())/2,f=(e[1].getY()+e[3].getY())/2;let E=new de(u+r*o,f+r*a),v=new de(u-r*o,f-r*a);return[g,E,m,v]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=Ie.round(e.getX()),n=Ie.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return Ie.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return Ie.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(G.truncDivision(this.nbLayers-4,8)+1)+15}}class Nr{decode(e,t=null){let n=null,r=new ao(e.getBlackMatrix()),o=null,a=null;try{let m=r.detectMirror(!1);o=m.getPoints(),this.reportFoundResultPoints(t,o),a=new je().decode(m)}catch(m){n=m}if(a==null)try{let m=r.detectMirror(!0);o=m.getPoints(),this.reportFoundResultPoints(t,o),a=new je().decode(m)}catch(m){throw n??m}let u=new Ue(a.getText(),a.getRawBytes(),a.getNumBits(),o,oe.AZTEC,T.currentTimeMillis()),f=a.getByteSegments();f!=null&&u.putMetadata(He.BYTE_SEGMENTS,f);let g=a.getECLevel();return g!=null&&u.putMetadata(He.ERROR_CORRECTION_LEVEL,g),u}reportFoundResultPoints(e,t){if(e!=null){let n=e.get($.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach((r,o,a)=>{n.foundPossibleResultPoint(r)})}}reset(){}}class Cc extends Qe{constructor(e=500){super(new Nr,e)}}class dt{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get($.TRY_HARDER)===!0&&e.isRotateSupported()){const o=e.rotateCounterClockwise(),a=this.doDecode(o,t),u=a.getResultMetadata();let f=270;u!==null&&u.get(He.ORIENTATION)===!0&&(f=f+u.get(He.ORIENTATION)%360),a.putMetadata(He.ORIENTATION,f);const g=a.getResultPoints();if(g!==null){const m=o.getHeight();for(let E=0;E<g.length;E++)g[E]=new de(m-g[E].getY()-1,g[E].getX())}return a}else throw new U}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let o=new Y(n);const a=t&&t.get($.TRY_HARDER)===!0,u=Math.max(1,r>>(a?8:5));let f;a?f=r:f=15;const g=Math.trunc(r/2);for(let m=0;m<f;m++){const E=Math.trunc((m+1)/2),v=(m&1)===0,I=g+u*(v?E:-E);if(I<0||I>=r)break;try{o=e.getBlackRow(I,o)}catch{continue}for(let N=0;N<2;N++){if(N===1&&(o.reverse(),t&&t.get($.NEED_RESULT_POINT_CALLBACK)===!0)){const D=new Map;t.forEach((F,W)=>D.set(W,F)),D.delete($.NEED_RESULT_POINT_CALLBACK),t=D}try{const D=this.decodeRow(I,o,t);if(N===1){D.putMetadata(He.ORIENTATION,180);const F=D.getResultPoints();F!==null&&(F[0]=new de(n-F[0].getX()-1,F[0].getY()),F[1]=new de(n-F[1].getX()-1,F[1].getY()))}return D}catch{}}}throw new U}static recordPattern(e,t,n){const r=n.length;for(let g=0;g<r;g++)n[g]=0;const o=e.getSize();if(t>=o)throw new U;let a=!e.get(t),u=0,f=t;for(;f<o;){if(e.get(f)!==a)n[u]++;else{if(++u===r)break;n[u]=1,a=!a}f++}if(!(u===r||u===r-1&&f===o))throw new U}static recordPatternInReverse(e,t,n){let r=n.length,o=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==o&&(r--,o=!o);if(r>=0)throw new U;dt.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let o=0,a=0;for(let g=0;g<r;g++)o+=e[g],a+=t[g];if(o<a)return Number.POSITIVE_INFINITY;const u=o/a;n*=u;let f=0;for(let g=0;g<r;g++){const m=e[g],E=t[g]*u,v=m>E?m-E:E-m;if(v>n)return Number.POSITIVE_INFINITY;f+=v}return f/o}}class ie extends dt{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,o=Int32Array.from([0,0,0,0,0,0]),a=n,u=!1;const f=6;for(let g=n;g<t;g++)if(e.get(g)!==u)o[r]++;else{if(r===f-1){let m=ie.MAX_AVG_VARIANCE,E=-1;for(let v=ie.CODE_START_A;v<=ie.CODE_START_C;v++){const I=dt.patternMatchVariance(o,ie.CODE_PATTERNS[v],ie.MAX_INDIVIDUAL_VARIANCE);I<m&&(m=I,E=v)}if(E>=0&&e.isRange(Math.max(0,a-(g-a)/2),a,!1))return Int32Array.from([a,g,E]);a+=o[0]+o[1],o=o.slice(2,o.length-1),o[r-1]=0,o[r]=0,r--}else r++;o[r]=1,u=!u}throw new U}static decodeCode(e,t,n){dt.recordPattern(e,n,t);let r=ie.MAX_AVG_VARIANCE,o=-1;for(let a=0;a<ie.CODE_PATTERNS.length;a++){const u=ie.CODE_PATTERNS[a],f=this.patternMatchVariance(t,u,ie.MAX_INDIVIDUAL_VARIANCE);f<r&&(r=f,o=a)}if(o>=0)return o;throw new U}decodeRow(e,t,n){const r=n&&n.get($.ASSUME_GS1)===!0,o=ie.findStartPattern(t),a=o[2];let u=0;const f=new Uint8Array(20);f[u++]=a;let g;switch(a){case ie.CODE_START_A:g=ie.CODE_CODE_A;break;case ie.CODE_START_B:g=ie.CODE_CODE_B;break;case ie.CODE_START_C:g=ie.CODE_CODE_C;break;default:throw new L}let m=!1,E=!1,v="",I=o[0],N=o[1];const D=Int32Array.from([0,0,0,0,0,0]);let F=0,W=0,ee=a,ne=0,Z=!0,Re=!1,ye=!1;for(;!m;){const zn=E;switch(E=!1,F=W,W=ie.decodeCode(t,D,N),f[u++]=W,W!==ie.CODE_STOP&&(Z=!0),W!==ie.CODE_STOP&&(ne++,ee+=ne*W),I=N,N+=D.reduce((Zc,Kc)=>Zc+Kc,0),W){case ie.CODE_START_A:case ie.CODE_START_B:case ie.CODE_START_C:throw new L}switch(g){case ie.CODE_CODE_A:if(W<64)ye===Re?v+=String.fromCharCode(32+W):v+=String.fromCharCode(32+W+128),ye=!1;else if(W<96)ye===Re?v+=String.fromCharCode(W-64):v+=String.fromCharCode(W+64),ye=!1;else switch(W!==ie.CODE_STOP&&(Z=!1),W){case ie.CODE_FNC_1:r&&(v.length===0?v+="]C1":v+="");break;case ie.CODE_FNC_2:case ie.CODE_FNC_3:break;case ie.CODE_FNC_4_A:!Re&&ye?(Re=!0,ye=!1):Re&&ye?(Re=!1,ye=!1):ye=!0;break;case ie.CODE_SHIFT:E=!0,g=ie.CODE_CODE_B;break;case ie.CODE_CODE_B:g=ie.CODE_CODE_B;break;case ie.CODE_CODE_C:g=ie.CODE_CODE_C;break;case ie.CODE_STOP:m=!0;break}break;case ie.CODE_CODE_B:if(W<96)ye===Re?v+=String.fromCharCode(32+W):v+=String.fromCharCode(32+W+128),ye=!1;else switch(W!==ie.CODE_STOP&&(Z=!1),W){case ie.CODE_FNC_1:r&&(v.length===0?v+="]C1":v+="");break;case ie.CODE_FNC_2:case ie.CODE_FNC_3:break;case ie.CODE_FNC_4_B:!Re&&ye?(Re=!0,ye=!1):Re&&ye?(Re=!1,ye=!1):ye=!0;break;case ie.CODE_SHIFT:E=!0,g=ie.CODE_CODE_A;break;case ie.CODE_CODE_A:g=ie.CODE_CODE_A;break;case ie.CODE_CODE_C:g=ie.CODE_CODE_C;break;case ie.CODE_STOP:m=!0;break}break;case ie.CODE_CODE_C:if(W<100)W<10&&(v+="0"),v+=W;else switch(W!==ie.CODE_STOP&&(Z=!1),W){case ie.CODE_FNC_1:r&&(v.length===0?v+="]C1":v+="");break;case ie.CODE_CODE_A:g=ie.CODE_CODE_A;break;case ie.CODE_CODE_B:g=ie.CODE_CODE_B;break;case ie.CODE_STOP:m=!0;break}break}zn&&(g=g===ie.CODE_CODE_A?ie.CODE_CODE_B:ie.CODE_CODE_A)}const Dt=N-I;if(N=t.getNextUnset(N),!t.isRange(N,Math.min(t.getSize(),N+(N-I)/2),!1))throw new U;if(ee-=ne*F,ee%103!==F)throw new B;const Jt=v.length;if(Jt===0)throw new U;Jt>0&&Z&&(g===ie.CODE_CODE_C?v=v.substring(0,Jt-2):v=v.substring(0,Jt-1));const Pt=(o[1]+o[0])/2,Ke=I+Dt/2,Et=f.length,Ft=new Uint8Array(Et);for(let zn=0;zn<Et;zn++)Ft[zn]=f[zn];const Xn=[new de(Pt,e),new de(Ke,e)];return new Ue(v,Ft,0,Xn,oe.CODE_128,new Date().getTime())}}ie.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ie.MAX_AVG_VARIANCE=.25,ie.MAX_INDIVIDUAL_VARIANCE=.7,ie.CODE_SHIFT=98,ie.CODE_CODE_C=99,ie.CODE_CODE_B=100,ie.CODE_CODE_A=101,ie.CODE_FNC_1=102,ie.CODE_FNC_2=97,ie.CODE_FNC_3=96,ie.CODE_FNC_4_A=101,ie.CODE_FNC_4_B=100,ie.CODE_START_A=103,ie.CODE_START_B=104,ie.CODE_START_C=105,ie.CODE_STOP=106;class ht extends dt{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let o=ht.findAsteriskPattern(t,r),a=t.getNextSet(o[1]),u=t.getSize(),f,g;do{ht.recordPattern(t,a,r);let D=ht.toNarrowWidePattern(r);if(D<0)throw new U;f=ht.patternToChar(D),this.decodeRowResult+=f,g=a;for(let F of r)a+=F;a=t.getNextSet(a)}while(f!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let m=0;for(let D of r)m+=D;let E=a-g-m;if(a!==u&&E*2<m)throw new U;if(this.usingCheckDigit){let D=this.decodeRowResult.length-1,F=0;for(let W=0;W<D;W++)F+=ht.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(W));if(this.decodeRowResult.charAt(D)!==ht.ALPHABET_STRING.charAt(F%43))throw new B;this.decodeRowResult=this.decodeRowResult.substring(0,D)}if(this.decodeRowResult.length===0)throw new U;let v;this.extendedMode?v=ht.decodeExtended(this.decodeRowResult):v=this.decodeRowResult;let I=(o[1]+o[0])/2,N=g+m/2;return new Ue(v,null,0,[new de(I,e),new de(N,e)],oe.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),o=0,a=r,u=!1,f=t.length;for(let g=r;g<n;g++)if(e.get(g)!==u)t[o]++;else{if(o===f-1){if(this.toNarrowWidePattern(t)===ht.ASTERISK_ENCODING&&e.isRange(Math.max(0,a-Math.floor((g-a)/2)),a,!1))return[a,g];a+=t[0]+t[1],t.copyWithin(0,2,2+o-1),t[o-1]=0,t[o]=0,o--}else o++;t[o]=1,u=!u}throw new U}static toNarrowWidePattern(e){let t=e.length,n=0,r;do{let o=2147483647;for(let f of e)f<o&&f>n&&(o=f);n=o,r=0;let a=0,u=0;for(let f=0;f<t;f++){let g=e[f];g>n&&(u|=1<<t-1-f,r++,a+=g)}if(r===3){for(let f=0;f<t&&r>0;f++){let g=e[f];if(g>n&&(r--,g*2>=a))return-1}return u}}while(r>3);return-1}static patternToChar(e){for(let t=0;t<ht.CHARACTER_ENCODINGS.length;t++)if(ht.CHARACTER_ENCODINGS[t]===e)return ht.ALPHABET_STRING.charAt(t);if(e===ht.ASTERISK_ENCODING)return"*";throw new U}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let o=e.charAt(r);if(o==="+"||o==="$"||o==="%"||o==="/"){let a=e.charAt(r+1),u="\0";switch(o){case"+":if(a>="A"&&a<="Z")u=String.fromCharCode(a.charCodeAt(0)+32);else throw new L;break;case"$":if(a>="A"&&a<="Z")u=String.fromCharCode(a.charCodeAt(0)-64);else throw new L;break;case"%":if(a>="A"&&a<="E")u=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")u=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")u=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")u=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")u="\0";else if(a==="V")u="@";else if(a==="W")u="`";else if(a==="X"||a==="Y"||a==="Z")u="";else throw new L;break;case"/":if(a>="A"&&a<="O")u=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")u=":";else throw new L;break}n+=u,r++}else n+=o}return n}}ht.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ht.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ht.ASTERISK_ENCODING=148;class qe extends dt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),o=this.decodeEnd(t),a=new Ee;qe.decodeMiddle(t,r[1],o[0],a);let u=a.toString(),f=null;n!=null&&(f=n.get($.ALLOWED_LENGTHS)),f==null&&(f=qe.DEFAULT_ALLOWED_LENGTHS);let g=u.length,m=!1,E=0;for(let N of f){if(g===N){m=!0;break}N>E&&(E=N)}if(!m&&g>E&&(m=!0),!m)throw new L;const v=[new de(r[1],e),new de(o[0],e)];return new Ue(u,null,0,v,oe.ITF,new Date().getTime())}static decodeMiddle(e,t,n,r){let o=new Int32Array(10),a=new Int32Array(5),u=new Int32Array(5);for(o.fill(0),a.fill(0),u.fill(0);t<n;){dt.recordPattern(e,t,o);for(let g=0;g<5;g++){let m=2*g;a[g]=o[m],u[g]=o[m+1]}let f=qe.decodeDigit(a);r.append(f.toString()),f=this.decodeDigit(u),r.append(f.toString()),o.forEach(function(g){t+=g})}}decodeStart(e){let t=qe.skipWhiteSpace(e),n=qe.findGuardPattern(e,t,qe.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=this.narrowLineWidth*10;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(n!==0)throw new U}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new U;return n}decodeEnd(e){e.reverse();try{let t=qe.skipWhiteSpace(e),n;try{n=qe.findGuardPattern(e,t,qe.END_PATTERN_REVERSED[0])}catch(o){o instanceof U&&(n=qe.findGuardPattern(e,t,qe.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let r=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-r,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,o=new Int32Array(r),a=e.getSize(),u=!1,f=0,g=t;o.fill(0);for(let m=t;m<a;m++)if(e.get(m)!==u)o[f]++;else{if(f===r-1){if(dt.patternMatchVariance(o,n,qe.MAX_INDIVIDUAL_VARIANCE)<qe.MAX_AVG_VARIANCE)return[g,m];g+=o[0]+o[1],T.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,u=!u}throw new U}static decodeDigit(e){let t=qe.MAX_AVG_VARIANCE,n=-1,r=qe.PATTERNS.length;for(let o=0;o<r;o++){let a=qe.PATTERNS[o],u=dt.patternMatchVariance(e,a,qe.MAX_INDIVIDUAL_VARIANCE);u<t?(t=u,n=o):u===t&&(n=-1)}if(n>=0)return n%10;throw new U}}qe.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],qe.MAX_AVG_VARIANCE=.38,qe.MAX_INDIVIDUAL_VARIANCE=.5,qe.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],qe.START_PATTERN=Int32Array.from([1,1,1,1]),qe.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class st extends dt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,n,r=0,o=Int32Array.from([0,0,0]);for(;!t;){o=Int32Array.from([0,0,0]),n=st.findGuardPattern(e,r,!1,this.START_END_PATTERN,o);let a=n[0];r=n[1];let u=a-(r-a);u>=0&&(t=e.isRange(u,a,!1))}return n}static checkChecksum(e){return st.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return st.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let o=e.charAt(r).charCodeAt(0)-48;if(o<0||o>9)throw new L;n+=o}n*=3;for(let r=t-2;r>=0;r-=2){let o=e.charAt(r).charCodeAt(0)-48;if(o<0||o>9)throw new L;n+=o}return(1e3-n)%10}static decodeEnd(e,t){return st.findGuardPattern(e,t,!1,st.START_END_PATTERN,new Int32Array(st.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,o){let a=e.getSize();t=n?e.getNextUnset(t):e.getNextSet(t);let u=0,f=t,g=r.length,m=n;for(let E=t;E<a;E++)if(e.get(E)!==m)o[u]++;else{if(u===g-1){if(dt.patternMatchVariance(o,r,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return Int32Array.from([f,E]);f+=o[0]+o[1];let v=o.slice(2,o.length-1);for(let I=0;I<u-1;I++)o[I]=v[I];o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,m=!m}throw new U}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let o=this.MAX_AVG_VARIANCE,a=-1,u=r.length;for(let f=0;f<u;f++){let g=r[f],m=dt.patternMatchVariance(t,g,st.MAX_INDIVIDUAL_VARIANCE);m<o&&(o=m,a=f)}if(a>=0)return a;throw new U}}st.MAX_AVG_VARIANCE=.48,st.MAX_INDIVIDUAL_VARIANCE=.7,st.START_END_PATTERN=Int32Array.from([1,1,1]),st.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),st.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),st.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class tr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,o=this.decodeMiddle(t,n,r),a=r.toString(),u=tr.parseExtensionString(a),f=[new de((n[0]+n[1])/2,e),new de(o,e)],g=new Ue(a,null,0,f,oe.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&g.putAllMetadata(u),g}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let o=e.getSize(),a=t[1],u=0;for(let g=0;g<5&&a<o;g++){let m=st.decodeDigit(e,r,a,st.L_AND_G_PATTERNS);n+=String.fromCharCode(48+m%10);for(let E of r)a+=E;m>=10&&(u|=1<<4-g),g!==4&&(a=e.getNextSet(a),a=e.getNextUnset(a))}if(n.length!==5)throw new U;let f=this.determineCheckDigit(u);if(tr.extensionChecksum(n.toString())!==f)throw new U;return a}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new U}static parseExtensionString(e){if(e.length!==5)return null;let t=tr.parseExtension5String(e);return t==null?null:new Map([[He.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let n=parseInt(e.substring(1)),r=(n/100).toString(),o=n%100,a=o<10?"0"+o:o.toString();return t+r+"."+a}}class Li{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,o=this.decodeMiddle(t,n,r),a=r.toString(),u=Li.parseExtensionString(a),f=[new de((n[0]+n[1])/2,e),new de(o,e)],g=new Ue(a,null,0,f,oe.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&g.putAllMetadata(u),g}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let o=e.getSize(),a=t[1],u=0;for(let f=0;f<2&&a<o;f++){let g=st.decodeDigit(e,r,a,st.L_AND_G_PATTERNS);n+=String.fromCharCode(48+g%10);for(let m of r)a+=m;g>=10&&(u|=1<<1-f),f!==1&&(a=e.getNextSet(a),a=e.getNextUnset(a))}if(n.length!==2)throw new U;if(parseInt(n.toString())%4!==u)throw new U;return a}static parseExtensionString(e){return e.length!==2?null:new Map([[He.ISSUE_NUMBER,parseInt(e)]])}}class lo{static decodeRow(e,t,n){let r=st.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new tr().decodeRow(e,t,r)}catch{return new Li().decodeRow(e,t,r)}}}lo.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Be extends st{constructor(){super(),this.decodeRowStringBuffer="",Be.L_AND_G_PATTERNS=Be.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Be.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[t.length-r-1];Be.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=Be.findStartGuardPattern(t),o=n==null?null:n.get($.NEED_RESULT_POINT_CALLBACK);if(o!=null){const Z=new de((r[0]+r[1])/2,e);o.foundPossibleResultPoint(Z)}let a=this.decodeMiddle(t,r,this.decodeRowStringBuffer),u=a.rowOffset,f=a.resultString;if(o!=null){const Z=new de(u,e);o.foundPossibleResultPoint(Z)}let g=this.decodeEnd(t,u);if(o!=null){const Z=new de((g[0]+g[1])/2,e);o.foundPossibleResultPoint(Z)}let m=g[1],E=m+(m-g[0]);if(E>=t.getSize()||!t.isRange(m,E,!1))throw new U;let v=f.toString();if(v.length<8)throw new L;if(!Be.checkChecksum(v))throw new B;let I=(r[1]+r[0])/2,N=(g[1]+g[0])/2,D=this.getBarcodeFormat(),F=[new de(I,e),new de(N,e)],W=new Ue(v,null,0,F,D,new Date().getTime()),ee=0;try{let Z=lo.decodeRow(e,t,g[1]);W.putMetadata(He.UPC_EAN_EXTENSION,Z.getText()),W.putAllMetadata(Z.getResultMetadata()),W.addResultPoints(Z.getResultPoints()),ee=Z.getText().length}catch{}let ne=n==null?null:n.get($.ALLOWED_EAN_EXTENSIONS);if(ne!=null){let Z=!1;for(let Re in ne)if(ee.toString()===Re){Z=!0;break}if(!Z)throw new U}return W}decodeEnd(e,t){return Be.findGuardPattern(e,t,!1,Be.START_END_PATTERN,new Int32Array(Be.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Be.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Be.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let o=e.charAt(r).charCodeAt(0)-48;if(o<0||o>9)throw new L;n+=o}n*=3;for(let r=t-2;r>=0;r-=2){let o=e.charAt(r).charCodeAt(0)-48;if(o<0||o>9)throw new L;n+=o}return(1e3-n)%10}}class _n extends Be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let o=e.getSize(),a=t[1],u=0;for(let g=0;g<6&&a<o;g++){let m=Be.decodeDigit(e,r,a,Be.L_AND_G_PATTERNS);n+=String.fromCharCode(48+m%10);for(let E of r)a+=E;m>=10&&(u|=1<<5-g)}n=_n.determineFirstDigit(n,u),a=Be.findGuardPattern(e,a,!0,Be.MIDDLE_PATTERN,new Int32Array(Be.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<6&&a<o;g++){let m=Be.decodeDigit(e,r,a,Be.L_PATTERNS);n+=String.fromCharCode(48+m);for(let E of r)a+=E}return{rowOffset:a,resultString:n}}getBarcodeFormat(){return oe.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode(48+n)+e,e;throw new U}}_n.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class co extends Be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let o=e.getSize(),a=t[1];for(let f=0;f<4&&a<o;f++){let g=Be.decodeDigit(e,r,a,Be.L_PATTERNS);n+=String.fromCharCode(48+g);for(let m of r)a+=m}a=Be.findGuardPattern(e,a,!0,Be.MIDDLE_PATTERN,new Int32Array(Be.MIDDLE_PATTERN.length).fill(0))[1];for(let f=0;f<4&&a<o;f++){let g=Be.decodeDigit(e,r,a,Be.L_PATTERNS);n+=String.fromCharCode(48+g);for(let m of r)a+=m}return{rowOffset:a,resultString:n}}getBarcodeFormat(){return oe.EAN_8}}class uo extends Be{constructor(){super(...arguments),this.ean13Reader=new _n}getBarcodeFormat(){return oe.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if(t.charAt(0)==="0"){let n=new Ue(t.substring(1),null,null,e.getResultPoints(),oe.UPC_A);return e.getResultMetadata()!=null&&n.putAllMetadata(e.getResultMetadata()),n}else throw new U}reset(){this.ean13Reader.reset()}}class Qt extends Be{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(g=>g);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const o=e.getSize();let a=t[1],u=0;for(let g=0;g<6&&a<o;g++){const m=Qt.decodeDigit(e,r,a,Qt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+m%10);for(let E of r)a+=E;m>=10&&(u|=1<<5-g)}let f=Qt.determineNumSysAndCheckDigit(n,u);return{rowOffset:a,resultString:f}}decodeEnd(e,t){return Qt.findGuardPatternWithoutCounters(e,t,!0,Qt.MIDDLE_END_PATTERN)}checkChecksum(e){return Be.checkChecksum(Qt.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r]){let o=String.fromCharCode(48+n),a=String.fromCharCode(48+r);return o+e+a}throw U.getNotFoundInstance()}getBarcodeFormat(){return oe.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(o=>o.charCodeAt(0)),n=new Ee;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r);break}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}Qt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ki extends dt{constructor(e){super();let t=e==null?null:e.get($.POSSIBLE_FORMATS),n=[];d(t)?(n.push(new _n),n.push(new uo),n.push(new co),n.push(new Qt)):(t.indexOf(oe.EAN_13)>-1&&n.push(new _n),t.indexOf(oe.UPC_A)>-1&&n.push(new uo),t.indexOf(oe.EAN_8)>-1&&n.push(new co),t.indexOf(oe.UPC_E)>-1&&n.push(new Qt)),this.readers=n}decodeRow(e,t,n){for(let r of this.readers)try{const o=r.decodeRow(e,t,n),a=o.getBarcodeFormat()===oe.EAN_13&&o.getText().charAt(0)==="0",u=n==null?null:n.get($.POSSIBLE_FORMATS),f=u==null||u.includes(oe.UPC_A);if(a&&f){const g=o.getRawBytes(),m=new Ue(o.getText().substring(1),g,g?g.length:null,o.getResultPoints(),oe.UPC_A);return m.putAllMetadata(o.getResultMetadata()),m}return o}catch{}throw new U}reset(){for(let e of this.readers)e.reset()}}class yt extends dt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(dt.patternMatchVariance(e,t[n],yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE)return n;throw new U}static count(e){return Ie.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let o=1;o<e.length;o++)t[o]>r&&(r=t[o],n=o);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let o=1;o<e.length;o++)t[o]<r&&(r=t[o],n=o);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t+e[2]+e[3],r=t/n;if(r>=yt.MIN_FINDER_PATTERN_RATIO&&r<=yt.MAX_FINDER_PATTERN_RATIO){let o=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;for(let u of e)u>a&&(a=u),u<o&&(o=u);return a<10*o}return!1}}yt.MAX_AVG_VARIANCE=.2,yt.MAX_INDIVIDUAL_VARIANCE=.45,yt.MIN_FINDER_PATTERN_RATIO=9.5/12,yt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Fn{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Fn))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Rr{constructor(e,t,n,r,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new de(n,o)),this.resultPoints.push(new de(r,o))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Rr))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class tn{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let f of e)r+=f;let o=0,a=0,u=e.length;for(let f=0;f<u-1;f++){let g;for(g=1,a|=1<<f;g<e[f];g++,a&=~(1<<f)){let m=tn.combins(r-g-1,u-f-2);if(n&&a===0&&r-g-(u-f-1)>=u-f-1&&(m-=tn.combins(r-g-(u-f),u-f-2)),u-f-1>1){let E=0;for(let v=r-g-(u-f-2);v>t;v--)E+=tn.combins(r-g-v-1,u-f-3);m-=E*(u-1-f)}else r-g>t&&m--;o+=m}r-=g}return o}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let o=1,a=1;for(let u=e;u>n;u--)o*=u,a<=r&&(o/=a,a++);for(;a<=r;)o/=a,a++;return o}}class Ec{static buildBitArray(e){let t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);let n=12*t,r=new Y(n),o=0,u=e[0].getRightChar().getValue();for(let f=11;f>=0;--f)u&1<<f&&r.set(o),o++;for(let f=1;f<e.length;++f){let g=e[f],m=g.getLeftChar().getValue();for(let E=11;E>=0;--E)m&1<<E&&r.set(o),o++;if(g.getRightChar()!=null){let E=g.getRightChar().getValue();for(let v=11;v>=0;--v)E&1<<v&&r.set(o),o++}}return r}}class Tn{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Fi{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Nt extends Fi{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===Nt.FNC1}}Nt.FNC1="$";class On extends Fi{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class zt extends Fi{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new L;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===zt.FNC1}isSecondDigitFNC1(){return this.secondDigit===zt.FNC1}isAnyFNC1(){return this.firstDigit===zt.FNC1||this.secondDigit===zt.FNC1}}zt.FNC1=10;class ce{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new U;let t=e.substring(0,2);for(let o of ce.TWO_DIGIT_DATA_LENGTH)if(o[0]===t)return o[1]===ce.VARIABLE_LENGTH?ce.processVariableAI(2,o[2],e):ce.processFixedAI(2,o[1],e);if(e.length<3)throw new U;let n=e.substring(0,3);for(let o of ce.THREE_DIGIT_DATA_LENGTH)if(o[0]===n)return o[1]===ce.VARIABLE_LENGTH?ce.processVariableAI(3,o[2],e):ce.processFixedAI(3,o[1],e);for(let o of ce.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(o[0]===n)return o[1]===ce.VARIABLE_LENGTH?ce.processVariableAI(4,o[2],e):ce.processFixedAI(4,o[1],e);if(e.length<4)throw new U;let r=e.substring(0,4);for(let o of ce.FOUR_DIGIT_DATA_LENGTH)if(o[0]===r)return o[1]===ce.VARIABLE_LENGTH?ce.processVariableAI(4,o[2],e):ce.processFixedAI(4,o[1],e);throw new U}static processFixedAI(e,t,n){if(n.length<e)throw new U;let r=n.substring(0,e);if(n.length<e+t)throw new U;let o=n.substring(e,e+t),a=n.substring(e+t),u="("+r+")"+o,f=ce.parseFieldsInGeneralPurpose(a);return f==null?u:u+f}static processVariableAI(e,t,n){let r=n.substring(0,e),o;n.length<e+t?o=n.length:o=e+t;let a=n.substring(e,o),u=n.substring(o),f="("+r+")"+a,g=ce.parseFieldsInGeneralPurpose(u);return g==null?f:f+g}}ce.VARIABLE_LENGTH=[],ce.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ce.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ce.VARIABLE_LENGTH,20],["22",ce.VARIABLE_LENGTH,29],["30",ce.VARIABLE_LENGTH,8],["37",ce.VARIABLE_LENGTH,8],["90",ce.VARIABLE_LENGTH,30],["91",ce.VARIABLE_LENGTH,30],["92",ce.VARIABLE_LENGTH,30],["93",ce.VARIABLE_LENGTH,30],["94",ce.VARIABLE_LENGTH,30],["95",ce.VARIABLE_LENGTH,30],["96",ce.VARIABLE_LENGTH,30],["97",ce.VARIABLE_LENGTH,3],["98",ce.VARIABLE_LENGTH,30],["99",ce.VARIABLE_LENGTH,30]],ce.THREE_DIGIT_DATA_LENGTH=[["240",ce.VARIABLE_LENGTH,30],["241",ce.VARIABLE_LENGTH,30],["242",ce.VARIABLE_LENGTH,6],["250",ce.VARIABLE_LENGTH,30],["251",ce.VARIABLE_LENGTH,30],["253",ce.VARIABLE_LENGTH,17],["254",ce.VARIABLE_LENGTH,20],["400",ce.VARIABLE_LENGTH,30],["401",ce.VARIABLE_LENGTH,30],["402",17],["403",ce.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ce.VARIABLE_LENGTH,20],["421",ce.VARIABLE_LENGTH,15],["422",3],["423",ce.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ce.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ce.VARIABLE_LENGTH,15],["391",ce.VARIABLE_LENGTH,18],["392",ce.VARIABLE_LENGTH,15],["393",ce.VARIABLE_LENGTH,18],["703",ce.VARIABLE_LENGTH,30]],ce.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ce.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ce.VARIABLE_LENGTH,20],["8003",ce.VARIABLE_LENGTH,30],["8004",ce.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ce.VARIABLE_LENGTH,30],["8008",ce.VARIABLE_LENGTH,12],["8018",18],["8020",ce.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ce.VARIABLE_LENGTH,70],["8200",ce.VARIABLE_LENGTH,70]];class Vn{constructor(e){this.buffer=new Ee,this.information=e}decodeAllCodes(e,t){let n=t,r=null;do{let o=this.decodeGeneralPurposeField(n,r),a=ce.parseFieldsInGeneralPurpose(o.getNewString());if(a!=null&&e.append(a),o.isRemaining()?r=""+o.getRemainingValue():r=null,n===o.getNewPosition())break;n=o.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let o=this.extractNumericValueFromBitArray(e,4);return o===0?new zt(this.information.getSize(),zt.FNC1,zt.FNC1):new zt(this.information.getSize(),o-1,zt.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),n=(t-8)/11,r=(t-8)%11;return new zt(e+7,n,r)}extractNumericValueFromBitArray(e,t){return Vn.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let o=0;o<n;++o)e.get(t+o)&&(r|=1<<n-o-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return n!=null&&n.isRemaining()?new On(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new On(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),!(n!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return e.isSecondDigitFNC1()?t=new On(this.current.getPosition(),this.buffer.toString()):t=new On(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Tn(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new On(this.current.getPosition(),this.buffer.toString());return new Tn(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Tn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new On(this.current.getPosition(),this.buffer.toString());return new Tn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Tn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new On(this.current.getPosition(),this.buffer.toString());return new Tn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Tn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Nt(e+5,Nt.FNC1);if(t>=5&&t<15)return new Nt(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Nt(e+7,""+(n+1));if(n>=90&&n<116)return new Nt(e+7,""+(n+7));let r=this.extractNumericValueFromBitArray(e,8),o;switch(r){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new L}return new Nt(e+8,o)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Nt(e+5,Nt.FNC1);if(t>=5&&t<15)return new Nt(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Nt(e+6,""+(n+33));let r;switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new ze("Decoding invalid alphanumeric value: "+n)}return new Nt(e+6,r)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class Vi{constructor(e){this.information=e,this.generalDecoder=new Vn(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Rt extends Vi{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);o/100===0&&e.append("0"),o/10===0&&e.append("0"),e.append(o)}Rt.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let o=e.charAt(r+t).charCodeAt(0)-48;n+=r&1?o:3*o}n=10-n%10,n===10&&(n=0),e.append(n)}}Rt.GTIN_SIZE=40;class Un extends Rt{constructor(e){super(e)}parseInformation(){let e=new Ee;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Un.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,Un.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Un.HEADER_SIZE+44)}}Un.HEADER_SIZE=4;class Mr extends Vi{constructor(e){super(e)}parseInformation(){let e=new Ee;return this.getGeneralDecoder().decodeAllCodes(e,Mr.HEADER_SIZE)}}Mr.HEADER_SIZE=5;class Dr extends Rt{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let o=this.checkWeight(r),a=1e5;for(let u=0;u<5;++u)o/a===0&&e.append("0"),a/=10;e.append(o)}}class nn extends Dr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=nn.HEADER_SIZE+Dr.GTIN_SIZE+nn.WEIGHT_SIZE)throw new U;let e=new Ee;return this.encodeCompressedGtin(e,nn.HEADER_SIZE),this.encodeCompressedWeight(e,nn.HEADER_SIZE+Dr.GTIN_SIZE,nn.WEIGHT_SIZE),e.toString()}}nn.HEADER_SIZE=5,nn.WEIGHT_SIZE=15;class Ac extends nn{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class yc extends nn{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class rn extends Rt{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<rn.HEADER_SIZE+Rt.GTIN_SIZE)throw new U;let e=new Ee;this.encodeCompressedGtin(e,rn.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(rn.HEADER_SIZE+Rt.GTIN_SIZE,rn.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(rn.HEADER_SIZE+Rt.GTIN_SIZE+rn.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}rn.HEADER_SIZE=8,rn.LAST_DIGIT_SIZE=2;class _t extends Rt{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<_t.HEADER_SIZE+Rt.GTIN_SIZE)throw new U;let e=new Ee;this.encodeCompressedGtin(e,_t.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(_t.HEADER_SIZE+Rt.GTIN_SIZE,_t.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(_t.HEADER_SIZE+Rt.GTIN_SIZE+_t.LAST_DIGIT_SIZE,_t.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(_t.HEADER_SIZE+Rt.GTIN_SIZE+_t.LAST_DIGIT_SIZE+_t.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}_t.HEADER_SIZE=8,_t.LAST_DIGIT_SIZE=2,_t.FIRST_THREE_DIGITS_SIZE=10;class tt extends Dr{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new U;let e=new Ee;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(n==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let o=n%12+1;n/=12;let a=n;a/10==0&&e.append("0"),e.append(a),o/10==0&&e.append("0"),e.append(o),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;function fo(C){try{if(C.get(1))return new Un(C);if(!C.get(2))return new Mr(C);switch(Vn.extractNumericValueFromBitArray(C,1,4)){case 4:return new Ac(C);case 5:return new yc(C)}switch(Vn.extractNumericValueFromBitArray(C,1,5)){case 12:return new rn(C);case 13:return new _t(C)}switch(Vn.extractNumericValueFromBitArray(C,1,7)){case 56:return new tt(C,"310","11");case 57:return new tt(C,"320","11");case 58:return new tt(C,"310","13");case 59:return new tt(C,"320","13");case 60:return new tt(C,"310","15");case 61:return new tt(C,"320","15");case 62:return new tt(C,"310","17");case 63:return new tt(C,"320","17")}}catch(e){throw console.log(e),new ze("unknown decoder: "+C)}}class Cn{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof Cn?Cn.equalsOrNull(e.leftchar,t.leftchar)&&Cn.equalsOrNull(e.rightchar,t.rightchar)&&Cn.equalsOrNull(e.finderpattern,t.finderpattern):!1}static equalsOrNull(e,t){return e===null?t===null:Cn.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ui{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof Ui?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((r,o)=>{t.forEach(a=>{r.getLeftChar().getValue()===a.getLeftChar().getValue()&&r.getRightChar().getValue()===a.getRightChar().getValue()&&r.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(n=!0)})}),n}}class q extends yt{constructor(e){super(...arguments),this.pairs=new Array(q.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return q.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,q.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(o){if(o instanceof U){if(!this.pairs.length)throw new U;n=!0}}if(this.checkChecksum())return this.pairs;let r;if(this.rows.length?r=!0:r=!1,this.storeRow(e,!1),r){let o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new U}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let r=this.rows[n];this.pairs.length=0;for(let a of e)this.pairs.push(a.getPairs());if(this.pairs.push(r.getPairs()),!q.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let o=new Array(e);o.push(r);try{return this.checkRows(o,n+1)}catch(a){this.verbose&&console.log(a)}}throw new U}static isValidSequence(e){for(let t of q.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,o=!1;for(;n<this.rows.length;){let a=this.rows[n];if(a.getRowNumber()>e){o=a.isEquivalent(this.pairs);break}r=a.isEquivalent(this.pairs),n++}o||r||q.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new Ui(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length){for(let r of n.getPairs())for(let o of e)if(Cn.equals(r,o))break}}static isPartialRow(e,t){for(let n of t){let r=!0;for(let o of e){let a=!1;for(let u of n.getPairs())if(o.equals(u)){a=!0;break}if(!a){r=!1;break}}if(r)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=Ec.buildBitArray(e),r=fo(t).parseInformation(),o=e[0].getFinderPattern().getResultPoints(),a=e[e.length-1].getFinderPattern().getResultPoints(),u=[o[0],o[1],a[0],a[1]];return new Ue(r,null,null,u,oe.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(n==null)return!1;let r=n.getChecksumPortion(),o=2;for(let u=1;u<this.pairs.size();++u){let f=this.pairs.get(u);r+=f.getLeftChar().getChecksumPortion(),o++;let g=f.getRightChar();g!=null&&(r+=g.getChecksumPortion(),o++)}return r%=211,211*(o-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r=t.length%2==0;this.startFromEven&&(r=!r);let o,a=!0,u=-1;do this.findNextPair(e,t,u),o=this.parseFoundFinderPattern(e,n,r),o==null?u=q.getNextSecondBar(e,this.startEnd[0]):a=!1;while(a);let f=this.decodeDataCharacter(e,o,r,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new U;let g;try{g=this.decodeDataCharacter(e,o,r,!1)}catch(m){g=null,this.verbose&&console.log(m)}return new Cn(f,g,o,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let o=e.getSize(),a;n>=0?a=n:this.isEmptyPair(t)?a=0:a=t[t.length-1].getFinderPattern().getStartEnd()[1];let u=t.length%2!=0;this.startFromEven&&(u=!u);let f=!1;for(;a<o&&(f=!e.get(a),!!f);)a++;let g=0,m=a;for(let E=a;E<o;E++)if(e.get(E)!=f)r[g]++;else{if(g==3){if(u&&q.reverseCounters(r),q.isFinderPattern(r)){this.startEnd[0]=m,this.startEnd[1]=E;return}u&&q.reverseCounters(r),m+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,g--}else g++;r[g]=1,f=!f}throw new U}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,o,a;if(n){let g=this.startEnd[0]-1;for(;g>=0&&!e.get(g);)g--;g++,r=this.startEnd[0]-g,o=g,a=this.startEnd[1]}else o=this.startEnd[0],a=e.getNextUnset(this.startEnd[1]+1),r=a-this.startEnd[1];let u=this.getDecodeFinderCounters();T.arraycopy(u,0,u,1,u.length-1),u[0]=r;let f;try{f=this.parseFinderValue(u,q.FINDER_PATTERNS)}catch{return null}return new Rr(f,[o,a],o,a,t)}decodeDataCharacter(e,t,n,r){let o=this.getDataCharacterCounters();for(let Ke=0;Ke<o.length;Ke++)o[Ke]=0;if(r)q.recordPatternInReverse(e,t.getStartEnd()[0],o);else{q.recordPattern(e,t.getStartEnd()[1],o);for(let Ke=0,Et=o.length-1;Ke<Et;Ke++,Et--){let Ft=o[Ke];o[Ke]=o[Et],o[Et]=Ft}}let a=17,u=Ie.sum(new Int32Array(o))/a,f=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(u-f)/f>.3)throw new U;let g=this.getOddCounts(),m=this.getEvenCounts(),E=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(let Ke=0;Ke<o.length;Ke++){let Et=1*o[Ke]/u,Ft=Et+.5;if(Ft<1){if(Et<.3)throw new U;Ft=1}else if(Ft>8){if(Et>8.7)throw new U;Ft=8}let Xn=Ke/2;Ke&1?(m[Xn]=Ft,v[Xn]=Et-Ft):(g[Xn]=Ft,E[Xn]=Et-Ft)}this.adjustOddEvenCounts(a);let I=4*t.getValue()+(n?0:2)+(r?0:1)-1,N=0,D=0;for(let Ke=g.length-1;Ke>=0;Ke--){if(q.isNotA1left(t,n,r)){let Et=q.WEIGHTS[I][2*Ke];D+=g[Ke]*Et}N+=g[Ke]}let F=0;for(let Ke=m.length-1;Ke>=0;Ke--)if(q.isNotA1left(t,n,r)){let Et=q.WEIGHTS[I][2*Ke+1];F+=m[Ke]*Et}let W=D+F;if(N&1||N>13||N<4)throw new U;let ee=(13-N)/2,ne=q.SYMBOL_WIDEST[ee],Z=9-ne,Re=tn.getRSSvalue(g,ne,!0),ye=tn.getRSSvalue(m,Z,!1),Dt=q.EVEN_TOTAL_SUBSET[ee],Jt=q.GSUM[ee],Pt=Re*Dt+ye+Jt;return new Fn(Pt,W)}static isNotA1left(e,t,n){return!(e.getValue()==0&&t&&n)}adjustOddEvenCounts(e){let t=Ie.sum(new Int32Array(this.getOddCounts())),n=Ie.sum(new Int32Array(this.getEvenCounts())),r=!1,o=!1;t>13?o=!0:t<4&&(r=!0);let a=!1,u=!1;n>13?u=!0:n<4&&(a=!0);let f=t+n-e,g=(t&1)==1,m=(n&1)==0;if(f==1)if(g){if(m)throw new U;o=!0}else{if(!m)throw new U;u=!0}else if(f==-1)if(g){if(m)throw new U;r=!0}else{if(!m)throw new U;a=!0}else if(f==0){if(g){if(!m)throw new U;t<n?(r=!0,u=!0):(o=!0,a=!0)}else if(m)throw new U}else throw new U;if(r){if(o)throw new U;q.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&q.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(u)throw new U;q.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&q.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}q.SYMBOL_WIDEST=[7,5,4,3,1],q.EVEN_TOTAL_SUBSET=[4,20,52,104,204],q.GSUM=[0,348,1388,2948,3988],q.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],q.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],q.FINDER_PAT_A=0,q.FINDER_PAT_B=1,q.FINDER_PAT_C=2,q.FINDER_PAT_D=3,q.FINDER_PAT_E=4,q.FINDER_PAT_F=5,q.FINDER_PATTERN_SEQUENCES=[[q.FINDER_PAT_A,q.FINDER_PAT_A],[q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B],[q.FINDER_PAT_A,q.FINDER_PAT_C,q.FINDER_PAT_B,q.FINDER_PAT_D],[q.FINDER_PAT_A,q.FINDER_PAT_E,q.FINDER_PAT_B,q.FINDER_PAT_D,q.FINDER_PAT_C],[q.FINDER_PAT_A,q.FINDER_PAT_E,q.FINDER_PAT_B,q.FINDER_PAT_D,q.FINDER_PAT_D,q.FINDER_PAT_F],[q.FINDER_PAT_A,q.FINDER_PAT_E,q.FINDER_PAT_B,q.FINDER_PAT_D,q.FINDER_PAT_E,q.FINDER_PAT_F,q.FINDER_PAT_F],[q.FINDER_PAT_A,q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B,q.FINDER_PAT_C,q.FINDER_PAT_C,q.FINDER_PAT_D,q.FINDER_PAT_D],[q.FINDER_PAT_A,q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B,q.FINDER_PAT_C,q.FINDER_PAT_C,q.FINDER_PAT_D,q.FINDER_PAT_E,q.FINDER_PAT_E],[q.FINDER_PAT_A,q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B,q.FINDER_PAT_C,q.FINDER_PAT_C,q.FINDER_PAT_D,q.FINDER_PAT_E,q.FINDER_PAT_F,q.FINDER_PAT_F],[q.FINDER_PAT_A,q.FINDER_PAT_A,q.FINDER_PAT_B,q.FINDER_PAT_B,q.FINDER_PAT_C,q.FINDER_PAT_D,q.FINDER_PAT_D,q.FINDER_PAT_E,q.FINDER_PAT_E,q.FINDER_PAT_F,q.FINDER_PAT_F]],q.MAX_PAIRS=11;class vc extends Fn{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ot extends yt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);ot.addOrTally(this.possibleLeftPairs,r),t.reverse();let o=this.decodePair(t,!0,e,n);ot.addOrTally(this.possibleRightPairs,o),t.reverse();for(let a of this.possibleLeftPairs)if(a.getCount()>1){for(let u of this.possibleRightPairs)if(u.getCount()>1&&ot.checkChecksum(a,u))return ot.constructResult(a,u)}throw new U}static addOrTally(e,t){if(t==null)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),o=new Ee;for(let g=13-r.length;g>0;g--)o.append("0");o.append(r);let a=0;for(let g=0;g<13;g++){let m=o.charAt(g).charCodeAt(0)-48;a+=g&1?m:3*m}a=10-a%10,a===10&&(a=0),o.append(a.toString());let u=e.getFinderPattern().getResultPoints(),f=t.getFinderPattern().getResultPoints();return new Ue(o.toString(),null,0,[u[0],u[1],f[0],f[1]],oe.RSS_14,new Date().getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let o=this.findFinderPattern(e,t),a=this.parseFoundFinderPattern(e,n,t,o),u=r==null?null:r.get($.NEED_RESULT_POINT_CALLBACK);if(u!=null){let m=(o[0]+o[1])/2;t&&(m=e.getSize()-1-m),u.foundPossibleResultPoint(new de(m,n))}let f=this.decodeDataCharacter(e,a,!0),g=this.decodeDataCharacter(e,a,!1);return new vc(1597*f.getValue()+g.getValue(),f.getChecksumPortion()+4*g.getChecksumPortion(),a)}catch{return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let F=0;F<r.length;F++)r[F]=0;if(n)dt.recordPatternInReverse(e,t.getStartEnd()[0],r);else{dt.recordPattern(e,t.getStartEnd()[1]+1,r);for(let F=0,W=r.length-1;F<W;F++,W--){let ee=r[F];r[F]=r[W],r[W]=ee}}let o=n?16:15,a=Ie.sum(new Int32Array(r))/o,u=this.getOddCounts(),f=this.getEvenCounts(),g=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors();for(let F=0;F<r.length;F++){let W=r[F]/a,ee=Math.floor(W+.5);ee<1?ee=1:ee>8&&(ee=8);let ne=Math.floor(F/2);F&1?(f[ne]=ee,m[ne]=W-ee):(u[ne]=ee,g[ne]=W-ee)}this.adjustOddEvenCounts(n,o);let E=0,v=0;for(let F=u.length-1;F>=0;F--)v*=9,v+=u[F],E+=u[F];let I=0,N=0;for(let F=f.length-1;F>=0;F--)I*=9,I+=f[F],N+=f[F];let D=v+3*I;if(n){if(E&1||E>12||E<4)throw new U;let F=(12-E)/2,W=ot.OUTSIDE_ODD_WIDEST[F],ee=9-W,ne=tn.getRSSvalue(u,W,!1),Z=tn.getRSSvalue(f,ee,!0),Re=ot.OUTSIDE_EVEN_TOTAL_SUBSET[F],ye=ot.OUTSIDE_GSUM[F];return new Fn(ne*Re+Z+ye,D)}else{if(N&1||N>10||N<4)throw new U;let F=(10-N)/2,W=ot.INSIDE_ODD_WIDEST[F],ee=9-W,ne=tn.getRSSvalue(u,W,!0),Z=tn.getRSSvalue(f,ee,!1),Re=ot.INSIDE_ODD_TOTAL_SUBSET[F],ye=ot.INSIDE_GSUM[F];return new Fn(Z*Re+ne+ye,D)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),o=!1,a=0;for(;a<r&&(o=!e.get(a),t!==o);)a++;let u=0,f=a;for(let g=a;g<r;g++)if(e.get(g)!==o)n[u]++;else{if(u===3){if(yt.isFinderPattern(n))return[f,g];f+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,u--}else u++;n[u]=1,o=!o}throw new U}parseFoundFinderPattern(e,t,n,r){let o=e.get(r[0]),a=r[0]-1;for(;a>=0&&o!==e.get(a);)a--;a++;const u=r[0]-a,f=this.getDecodeFinderCounters(),g=new Int32Array(f.length);T.arraycopy(f,0,g,1,f.length-1),g[0]=u;const m=this.parseFinderValue(g,ot.FINDER_PATTERNS);let E=a,v=r[1];return n&&(E=e.getSize()-1-E,v=e.getSize()-1-v),new Rr(m,[a,r[1]],E,v,t)}adjustOddEvenCounts(e,t){let n=Ie.sum(new Int32Array(this.getOddCounts())),r=Ie.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1,u=!1,f=!1;e?(n>12?a=!0:n<4&&(o=!0),r>12?f=!0:r<4&&(u=!0)):(n>11?a=!0:n<5&&(o=!0),r>10?f=!0:r<4&&(u=!0));let g=n+r-t,m=(n&1)===(e?1:0),E=(r&1)===1;if(g===1)if(m){if(E)throw new U;a=!0}else{if(!E)throw new U;f=!0}else if(g===-1)if(m){if(E)throw new U;o=!0}else{if(!E)throw new U;u=!0}else if(g===0){if(m){if(!E)throw new U;n<r?(o=!0,f=!0):(a=!0,u=!0)}else if(E)throw new U}else throw new U;if(o){if(a)throw new U;yt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&yt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(f)throw new U;yt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&yt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ot.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ot.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ot.OUTSIDE_GSUM=[0,161,961,2015,2715],ot.INSIDE_GSUM=[0,336,1036,1516],ot.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ot.INSIDE_ODD_WIDEST=[2,4,6,8],ot.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Hn extends dt{constructor(e,t){super(),this.readers=[],this.verbose=t===!0;const n=e?e.get($.POSSIBLE_FORMATS):null,r=e&&e.get($.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;n?((n.includes(oe.EAN_13)||n.includes(oe.UPC_A)||n.includes(oe.EAN_8)||n.includes(oe.UPC_E))&&this.readers.push(new ki(e)),n.includes(oe.CODE_39)&&this.readers.push(new ht(r)),n.includes(oe.CODE_128)&&this.readers.push(new ie),n.includes(oe.ITF)&&this.readers.push(new qe),n.includes(oe.RSS_14)&&this.readers.push(new ot),n.includes(oe.RSS_EXPANDED)&&this.readers.push(new q(this.verbose))):(this.readers.push(new ki(e)),this.readers.push(new ht),this.readers.push(new ki(e)),this.readers.push(new ie),this.readers.push(new qe),this.readers.push(new ot),this.readers.push(new q(this.verbose)))}decodeRow(e,t,n){for(let r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch{}throw new U}reset(){this.readers.forEach(e=>e.reset())}}class Sc extends Qe{constructor(e=500,t){super(new Hn(t),e,t)}}class We{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Le{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Me{constructor(e,t,n,r,o,a){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=o,this.ecBlocks=a;let u=0;const f=a.getECCodewords(),g=a.getECBlocks();for(let m of g)u+=m.getCount()*(m.getDataCodewords()+f);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(e&1||t&1)throw new L;for(let n of Me.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new Me(1,10,10,8,8,new We(5,new Le(1,3))),new Me(2,12,12,10,10,new We(7,new Le(1,5))),new Me(3,14,14,12,12,new We(10,new Le(1,8))),new Me(4,16,16,14,14,new We(12,new Le(1,12))),new Me(5,18,18,16,16,new We(14,new Le(1,18))),new Me(6,20,20,18,18,new We(18,new Le(1,22))),new Me(7,22,22,20,20,new We(20,new Le(1,30))),new Me(8,24,24,22,22,new We(24,new Le(1,36))),new Me(9,26,26,24,24,new We(28,new Le(1,44))),new Me(10,32,32,14,14,new We(36,new Le(1,62))),new Me(11,36,36,16,16,new We(42,new Le(1,86))),new Me(12,40,40,18,18,new We(48,new Le(1,114))),new Me(13,44,44,20,20,new We(56,new Le(1,144))),new Me(14,48,48,22,22,new We(68,new Le(1,174))),new Me(15,52,52,24,24,new We(42,new Le(2,102))),new Me(16,64,64,14,14,new We(56,new Le(2,140))),new Me(17,72,72,16,16,new We(36,new Le(4,92))),new Me(18,80,80,18,18,new We(48,new Le(4,114))),new Me(19,88,88,20,20,new We(56,new Le(4,144))),new Me(20,96,96,22,22,new We(68,new Le(4,174))),new Me(21,104,104,24,24,new We(56,new Le(6,136))),new Me(22,120,120,18,18,new We(68,new Le(6,175))),new Me(23,132,132,20,20,new We(62,new Le(8,163))),new Me(24,144,144,22,22,new We(62,new Le(8,156),new Le(2,155))),new Me(25,8,18,6,16,new We(7,new Le(1,5))),new Me(26,8,32,6,14,new We(11,new Le(1,10))),new Me(27,12,26,10,24,new We(14,new Le(1,16))),new Me(28,12,36,10,16,new We(18,new Le(1,22))),new Me(29,16,36,14,16,new We(24,new Le(1,32))),new Me(30,16,48,14,22,new We(28,new Le(1,49)))]}}Me.VERSIONS=Me.buildVersions();class Hi{constructor(e){const t=e.getHeight();if(t<8||t>144||t&1)throw new L;this.version=Hi.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Te(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return Me.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const o=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth();let u=!1,f=!1,g=!1,m=!1;do if(n===o&&r===0&&!u)e[t++]=this.readCorner1(o,a)&255,n-=2,r+=2,u=!0;else if(n===o-2&&r===0&&a&3&&!f)e[t++]=this.readCorner2(o,a)&255,n-=2,r+=2,f=!0;else if(n===o+4&&r===2&&!(a&7)&&!g)e[t++]=this.readCorner3(o,a)&255,n-=2,r+=2,g=!0;else if(n===o-2&&r===0&&(a&7)===4&&!m)e[t++]=this.readCorner4(o,a)&255,n-=2,r+=2,m=!0;else{do n<o&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,o,a)&255),n-=2,r+=2;while(n>=0&&r<a);n+=1,r+=3;do n>=0&&r<a&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,o,a)&255),n+=2,r-=2;while(n<o&&r>=0);n+=3,r+=1}while(n<o||r<a);if(t!==this.version.getTotalCodewords())throw new L;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let o=0;return this.readModule(e-2,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e-2,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t,n,r)&&(o|=1),o<<=1,this.readModule(e,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e,t,n,r)&&(o|=1),o}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new y("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),a=t/r|0,u=n/o|0,f=a*r,g=u*o,m=new Te(g,f);for(let E=0;E<a;++E){const v=E*r;for(let I=0;I<u;++I){const N=I*o;for(let D=0;D<r;++D){const F=E*(r+2)+1+D,W=v+D;for(let ee=0;ee<o;++ee){const ne=I*(o+2)+1+ee;if(e.get(ne,F)){const Z=N+ee;m.set(Z,W)}}}}}return m}}class ji{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const o=n.getECBlocks();for(let D of o)r+=D.getCount();const a=new Array(r);let u=0;for(let D of o)for(let F=0;F<D.getCount();F++){const W=D.getDataCodewords(),ee=n.getECCodewords()+W;a[u++]=new ji(W,new Uint8Array(ee))}const g=a[0].codewords.length-n.getECCodewords(),m=g-1;let E=0;for(let D=0;D<m;D++)for(let F=0;F<u;F++)a[F].codewords[D]=e[E++];const v=t.getVersionNumber()===24,I=v?8:u;for(let D=0;D<I;D++)a[D].codewords[g-1]=e[E++];const N=a[0].codewords.length;for(let D=g;D<N;D++)for(let F=0;F<u;F++){const W=v?(F+8)%u:F,ee=v&&W>7?D-1:D;a[W].codewords[ee]=e[E++]}if(E!==e.length)throw new y;return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Wi{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new y(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const o=this.bytes;if(n>0){const a=8-n,u=e<a?e:a,f=a-u,g=255>>8-u<<f;t=(o[r]&g)>>f,e-=u,n+=u,n===8&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|o[r]&255,r++,e-=8;if(e>0){const a=8-e,u=255>>a<<a;t=t<<e|(o[r]&u)>>a,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var gt;(function(C){C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE"})(gt||(gt={}));class En{static decode(e){const t=new Wi(e),n=new Ee,r=new Ee,o=new Array;let a=gt.ASCII_ENCODE;do if(a===gt.ASCII_ENCODE)a=this.decodeAsciiSegment(t,n,r);else{switch(a){case gt.C40_ENCODE:this.decodeC40Segment(t,n);break;case gt.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case gt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case gt.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case gt.BASE256_ENCODE:this.decodeBase256Segment(t,n,o);break;default:throw new L}a=gt.ASCII_ENCODE}while(a!==gt.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Wt(e,n.toString(),o.length===0?null:o,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let o=e.readBits(8);if(o===0)throw new L;if(o<=128)return r&&(o+=128),t.append(String.fromCharCode(o-1)),gt.ASCII_ENCODE;if(o===129)return gt.PAD_ENCODE;if(o<=229){const a=o-130;a<10&&t.append("0"),t.append(""+a)}else switch(o){case 230:return gt.C40_ENCODE;case 231:return gt.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:r=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return gt.ANSIX12_ENCODE;case 239:return gt.TEXT_ENCODE;case 240:return gt.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new L;break}}while(e.available()>0);return gt.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let o=0;do{if(e.available()===8)return;const a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),r);for(let u=0;u<3;u++){const f=r[u];switch(o){case 0:if(f<3)o=f+1;else if(f<this.C40_BASIC_SET_CHARS.length){const g=this.C40_BASIC_SET_CHARS[f];n?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):t.append(g)}else throw new L;break;case 1:n?(t.append(String.fromCharCode(f+128)),n=!1):t.append(String.fromCharCode(f)),o=0;break;case 2:if(f<this.C40_SHIFT2_SET_CHARS.length){const g=this.C40_SHIFT2_SET_CHARS[f];n?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):t.append(g)}else switch(f){case 27:t.append("");break;case 30:n=!0;break;default:throw new L}o=0;break;case 3:n?(t.append(String.fromCharCode(f+224)),n=!1):t.append(String.fromCharCode(f+96)),o=0;break;default:throw new L}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],o=0;do{if(e.available()===8)return;const a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),r);for(let u=0;u<3;u++){const f=r[u];switch(o){case 0:if(f<3)o=f+1;else if(f<this.TEXT_BASIC_SET_CHARS.length){const g=this.TEXT_BASIC_SET_CHARS[f];n?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):t.append(g)}else throw new L;break;case 1:n?(t.append(String.fromCharCode(f+128)),n=!1):t.append(String.fromCharCode(f)),o=0;break;case 2:if(f<this.TEXT_SHIFT2_SET_CHARS.length){const g=this.TEXT_SHIFT2_SET_CHARS[f];n?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):t.append(g)}else switch(f){case 27:t.append("");break;case 30:n=!0;break;default:throw new L}o=0;break;case 3:if(f<this.TEXT_SHIFT3_SET_CHARS.length){const g=this.TEXT_SHIFT3_SET_CHARS[f];n?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):t.append(g),o=0}else throw new L;break;default:throw new L}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(e.available()===8)return;const r=e.readBits(8);if(r===254)return;this.parseTwoBytes(r,e.readBits(8),n);for(let o=0;o<3;o++){const a=n[o];switch(a){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(a<14)t.append(String.fromCharCode(a+44));else if(a<40)t.append(String.fromCharCode(a+51));else throw new L;break}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,o=Math.floor(r/1600);n[0]=o,r-=o*1600,o=Math.floor(r/40),n[1]=o,n[2]=r-o*40}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let r=e.readBits(6);if(r===31){const o=8-e.getBitOffset();o!==8&&e.readBits(o);return}r&32||(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const o=this.unrandomize255State(e.readBits(8),r++);let a;if(o===0?a=e.available()/8|0:o<250?a=o:a=250*(o-249)+this.unrandomize255State(e.readBits(8),r++),a<0)throw new L;const u=new Uint8Array(a);for(let f=0;f<a;f++){if(e.available()<8)throw new L;u[f]=this.unrandomize255State(e.readBits(8),r++)}n.push(u);try{t.append(Ae.decode(u,ae.ISO88591))}catch(f){throw new ze("Platform does not support required encoding: "+f.message)}}static unrandomize255State(e,t){const n=149*t%255+1,r=e-n;return r>=0?r:r+256}}En.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],En.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],En.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],En.TEXT_SHIFT2_SET_CHARS=En.C40_SHIFT2_SET_CHARS,En.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ic{constructor(){this.rsDecoder=new Xt(se.DATA_MATRIX_FIELD_256)}decode(e){const t=new Hi(e),n=t.getVersion(),r=t.readCodewords(),o=ji.getDataBlocks(r,n);let a=0;for(let g of o)a+=g.getNumDataCodewords();const u=new Uint8Array(a),f=o.length;for(let g=0;g<f;g++){const m=o[g],E=m.getCodewords(),v=m.getNumDataCodewords();this.correctErrors(E,v);for(let I=0;I<v;I++)u[I*f+g]=E[I]}return En.decode(u)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new B}for(let r=0;r<t;r++)e[r]=n[r]}}class ut{constructor(e){this.image=e,this.rectangleDetector=new dn(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new U;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],o=t[2],a=t[3];let u=this.transitionsBetween(n,a)+1,f=this.transitionsBetween(o,a)+1;(u&1)===1&&(u+=1),(f&1)===1&&(f+=1),4*u<7*f&&4*f<7*u&&(u=f=Math.max(u,f));let g=ut.sampleGrid(this.image,n,r,o,a,u,f);return new Or(g,[n,r,o,a])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),o=(t.getY()-e.getY())/(n+1);return new de(e.getX()+r,e.getY()+o)}static moveAway(e,t,n){let r=e.getX(),o=e.getY();return r<t?r-=1:r+=1,o<n?o-=1:o+=1,new de(r,o)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],o=e[2],a=this.transitionsBetween(t,n),u=this.transitionsBetween(n,r),f=this.transitionsBetween(r,o),g=this.transitionsBetween(o,t),m=a,E=[o,t,n,r];return m>u&&(m=u,E[0]=t,E[1]=n,E[2]=r,E[3]=o),m>f&&(m=f,E[0]=n,E[1]=r,E[2]=o,E[3]=t),m>g&&(E[0]=r,E[1]=o,E[2]=t,E[3]=n),E}detectSolid2(e){let t=e[0],n=e[1],r=e[2],o=e[3],a=this.transitionsBetween(t,o),u=ut.shiftPoint(n,r,(a+1)*4),f=ut.shiftPoint(r,n,(a+1)*4),g=this.transitionsBetween(u,t),m=this.transitionsBetween(f,o);return g<m?(e[0]=t,e[1]=n,e[2]=r,e[3]=o):(e[0]=n,e[1]=r,e[2]=o,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],o=e[3],a=this.transitionsBetween(t,o),u=this.transitionsBetween(n,o),f=ut.shiftPoint(t,n,(u+1)*4),g=ut.shiftPoint(r,n,(a+1)*4);a=this.transitionsBetween(f,o),u=this.transitionsBetween(g,o);let m=new de(o.getX()+(r.getX()-n.getX())/(a+1),o.getY()+(r.getY()-n.getY())/(a+1)),E=new de(o.getX()+(t.getX()-n.getX())/(u+1),o.getY()+(t.getY()-n.getY())/(u+1));if(!this.isValid(m))return this.isValid(E)?E:null;if(!this.isValid(E))return m;let v=this.transitionsBetween(f,m)+this.transitionsBetween(g,m),I=this.transitionsBetween(f,E)+this.transitionsBetween(g,E);return v>I?m:E}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],o=e[3],a=this.transitionsBetween(t,o)+1,u=this.transitionsBetween(r,o)+1,f=ut.shiftPoint(t,n,u*4),g=ut.shiftPoint(r,n,a*4);a=this.transitionsBetween(f,o)+1,u=this.transitionsBetween(g,o)+1,(a&1)===1&&(a+=1),(u&1)===1&&(u+=1);let m=(t.getX()+n.getX()+r.getX()+o.getX())/4,E=(t.getY()+n.getY()+r.getY()+o.getY())/4;t=ut.moveAway(t,m,E),n=ut.moveAway(n,m,E),r=ut.moveAway(r,m,E),o=ut.moveAway(o,m,E);let v,I;return f=ut.shiftPoint(t,n,u*4),f=ut.shiftPoint(f,o,a*4),v=ut.shiftPoint(n,t,u*4),v=ut.shiftPoint(v,r,a*4),g=ut.shiftPoint(r,o,u*4),g=ut.shiftPoint(g,n,a*4),I=ut.shiftPoint(o,r,u*4),I=ut.shiftPoint(I,t,a*4),[f,v,g,I]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,o,a,u){return bn.getInstance().sampleGrid(e,a,u,.5,.5,a-.5,.5,a-.5,u-.5,.5,u-.5,t.getX(),t.getY(),o.getX(),o.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),o=Math.trunc(t.getX()),a=Math.trunc(t.getY()),u=Math.abs(a-r)>Math.abs(o-n);if(u){let D=n;n=r,r=D,D=o,o=a,a=D}let f=Math.abs(o-n),g=Math.abs(a-r),m=-f/2,E=r<a?1:-1,v=n<o?1:-1,I=0,N=this.image.get(u?r:n,u?n:r);for(let D=n,F=r;D!==o;D+=v){let W=this.image.get(u?F:D,u?D:F);if(W!==N&&(I++,N=W),m+=g,m>0){if(F===a)break;F+=E,m-=f}}return I}}class An{constructor(){this.decoder=new Ic}decode(e,t=null){let n,r;if(t!=null&&t.has($.PURE_BARCODE)){const g=An.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(g),r=An.NO_POINTS}else{const g=new ut(e.getBlackMatrix()).detect();n=this.decoder.decode(g.getBits()),r=g.getPoints()}const o=n.getRawBytes(),a=new Ue(n.getText(),o,8*o.length,r,oe.DATA_MATRIX,T.currentTimeMillis()),u=n.getByteSegments();u!=null&&a.putMetadata(He.BYTE_SEGMENTS,u);const f=n.getECLevel();return f!=null&&a.putMetadata(He.ERROR_CORRECTION_LEVEL,f),a}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new U;const r=this.moduleSize(t,e);let o=t[1];const a=n[1];let u=t[0];const g=(n[0]-u+1)/r,m=(a-o+1)/r;if(g<=0||m<=0)throw new U;const E=r/2;o+=E,u+=E;const v=new Te(g,m);for(let I=0;I<m;I++){const N=o+I*r;for(let D=0;D<g;D++)e.get(u+D*r,N)&&v.set(D,I)}return v}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const o=e[1];for(;r<n&&t.get(r,o);)r++;if(r===n)throw new U;const a=r-e[0];if(a===0)throw new U;return a}}An.NO_POINTS=[];class _c extends Qe{constructor(e=500){super(new An,e)}}var jn;(function(C){C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H"})(jn||(jn={}));class $e{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,$e.FOR_BITS.set(n,this),$e.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return $e.L;case"M":return $e.M;case"Q":return $e.Q;case"H":return $e.H;default:throw new A(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof $e))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=$e.FOR_BITS.size)throw new y;return $e.FOR_BITS.get(e)}}$e.FOR_BITS=new Map,$e.FOR_VALUE=new Map,$e.L=new $e(jn.L,"L",1),$e.M=new $e(jn.M,"M",0),$e.Q=new $e(jn.Q,"Q",3),$e.H=new $e(jn.H,"H",2);class vt{constructor(e){this.errorCorrectionLevel=$e.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,t){return G.bitCount(e^t)}static decodeFormatInformation(e,t){const n=vt.doDecodeFormatInformation(e,t);return n!==null?n:vt.doDecodeFormatInformation(e^vt.FORMAT_INFO_MASK_QR,t^vt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const o of vt.FORMAT_INFO_DECODE_LOOKUP){const a=o[0];if(a===e||a===t)return new vt(o[1]);let u=vt.numBitsDiffering(e,a);u<n&&(r=o[1],n=u),e!==t&&(u=vt.numBitsDiffering(t,a),u<n&&(r=o[1],n=u))}return n<=3?new vt(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof vt))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}vt.FORMAT_INFO_MASK_QR=21522,vt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class V{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class S{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class fe{constructor(e,t,...n){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;let r=0;const o=n[0].getECCodewordsPerBlock(),a=n[0].getECBlocks();for(const u of a)r+=u.getCount()*(u.getDataCodewords()+o);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new L;try{return this.getVersionForNumber((e-17)/4)}catch{throw new L}}static getVersionForNumber(e){if(e<1||e>40)throw new y;return fe.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<fe.VERSION_DECODE_INFO.length;r++){const o=fe.VERSION_DECODE_INFO[r];if(o===e)return fe.getVersionForNumber(r+7);const a=vt.numBitsDiffering(e,o);a<t&&(n=r+7,t=a)}return t<=3?fe.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new Te(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const o=this.alignmentPatternCenters[r]-2;for(let a=0;a<n;a++)r===0&&(a===0||a===n-1)||r===n-1&&a===0||t.setRegion(this.alignmentPatternCenters[a]-2,o,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}fe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),fe.VERSIONS=[new fe(1,new Int32Array(0),new V(7,new S(1,19)),new V(10,new S(1,16)),new V(13,new S(1,13)),new V(17,new S(1,9))),new fe(2,Int32Array.from([6,18]),new V(10,new S(1,34)),new V(16,new S(1,28)),new V(22,new S(1,22)),new V(28,new S(1,16))),new fe(3,Int32Array.from([6,22]),new V(15,new S(1,55)),new V(26,new S(1,44)),new V(18,new S(2,17)),new V(22,new S(2,13))),new fe(4,Int32Array.from([6,26]),new V(20,new S(1,80)),new V(18,new S(2,32)),new V(26,new S(2,24)),new V(16,new S(4,9))),new fe(5,Int32Array.from([6,30]),new V(26,new S(1,108)),new V(24,new S(2,43)),new V(18,new S(2,15),new S(2,16)),new V(22,new S(2,11),new S(2,12))),new fe(6,Int32Array.from([6,34]),new V(18,new S(2,68)),new V(16,new S(4,27)),new V(24,new S(4,19)),new V(28,new S(4,15))),new fe(7,Int32Array.from([6,22,38]),new V(20,new S(2,78)),new V(18,new S(4,31)),new V(18,new S(2,14),new S(4,15)),new V(26,new S(4,13),new S(1,14))),new fe(8,Int32Array.from([6,24,42]),new V(24,new S(2,97)),new V(22,new S(2,38),new S(2,39)),new V(22,new S(4,18),new S(2,19)),new V(26,new S(4,14),new S(2,15))),new fe(9,Int32Array.from([6,26,46]),new V(30,new S(2,116)),new V(22,new S(3,36),new S(2,37)),new V(20,new S(4,16),new S(4,17)),new V(24,new S(4,12),new S(4,13))),new fe(10,Int32Array.from([6,28,50]),new V(18,new S(2,68),new S(2,69)),new V(26,new S(4,43),new S(1,44)),new V(24,new S(6,19),new S(2,20)),new V(28,new S(6,15),new S(2,16))),new fe(11,Int32Array.from([6,30,54]),new V(20,new S(4,81)),new V(30,new S(1,50),new S(4,51)),new V(28,new S(4,22),new S(4,23)),new V(24,new S(3,12),new S(8,13))),new fe(12,Int32Array.from([6,32,58]),new V(24,new S(2,92),new S(2,93)),new V(22,new S(6,36),new S(2,37)),new V(26,new S(4,20),new S(6,21)),new V(28,new S(7,14),new S(4,15))),new fe(13,Int32Array.from([6,34,62]),new V(26,new S(4,107)),new V(22,new S(8,37),new S(1,38)),new V(24,new S(8,20),new S(4,21)),new V(22,new S(12,11),new S(4,12))),new fe(14,Int32Array.from([6,26,46,66]),new V(30,new S(3,115),new S(1,116)),new V(24,new S(4,40),new S(5,41)),new V(20,new S(11,16),new S(5,17)),new V(24,new S(11,12),new S(5,13))),new fe(15,Int32Array.from([6,26,48,70]),new V(22,new S(5,87),new S(1,88)),new V(24,new S(5,41),new S(5,42)),new V(30,new S(5,24),new S(7,25)),new V(24,new S(11,12),new S(7,13))),new fe(16,Int32Array.from([6,26,50,74]),new V(24,new S(5,98),new S(1,99)),new V(28,new S(7,45),new S(3,46)),new V(24,new S(15,19),new S(2,20)),new V(30,new S(3,15),new S(13,16))),new fe(17,Int32Array.from([6,30,54,78]),new V(28,new S(1,107),new S(5,108)),new V(28,new S(10,46),new S(1,47)),new V(28,new S(1,22),new S(15,23)),new V(28,new S(2,14),new S(17,15))),new fe(18,Int32Array.from([6,30,56,82]),new V(30,new S(5,120),new S(1,121)),new V(26,new S(9,43),new S(4,44)),new V(28,new S(17,22),new S(1,23)),new V(28,new S(2,14),new S(19,15))),new fe(19,Int32Array.from([6,30,58,86]),new V(28,new S(3,113),new S(4,114)),new V(26,new S(3,44),new S(11,45)),new V(26,new S(17,21),new S(4,22)),new V(26,new S(9,13),new S(16,14))),new fe(20,Int32Array.from([6,34,62,90]),new V(28,new S(3,107),new S(5,108)),new V(26,new S(3,41),new S(13,42)),new V(30,new S(15,24),new S(5,25)),new V(28,new S(15,15),new S(10,16))),new fe(21,Int32Array.from([6,28,50,72,94]),new V(28,new S(4,116),new S(4,117)),new V(26,new S(17,42)),new V(28,new S(17,22),new S(6,23)),new V(30,new S(19,16),new S(6,17))),new fe(22,Int32Array.from([6,26,50,74,98]),new V(28,new S(2,111),new S(7,112)),new V(28,new S(17,46)),new V(30,new S(7,24),new S(16,25)),new V(24,new S(34,13))),new fe(23,Int32Array.from([6,30,54,78,102]),new V(30,new S(4,121),new S(5,122)),new V(28,new S(4,47),new S(14,48)),new V(30,new S(11,24),new S(14,25)),new V(30,new S(16,15),new S(14,16))),new fe(24,Int32Array.from([6,28,54,80,106]),new V(30,new S(6,117),new S(4,118)),new V(28,new S(6,45),new S(14,46)),new V(30,new S(11,24),new S(16,25)),new V(30,new S(30,16),new S(2,17))),new fe(25,Int32Array.from([6,32,58,84,110]),new V(26,new S(8,106),new S(4,107)),new V(28,new S(8,47),new S(13,48)),new V(30,new S(7,24),new S(22,25)),new V(30,new S(22,15),new S(13,16))),new fe(26,Int32Array.from([6,30,58,86,114]),new V(28,new S(10,114),new S(2,115)),new V(28,new S(19,46),new S(4,47)),new V(28,new S(28,22),new S(6,23)),new V(30,new S(33,16),new S(4,17))),new fe(27,Int32Array.from([6,34,62,90,118]),new V(30,new S(8,122),new S(4,123)),new V(28,new S(22,45),new S(3,46)),new V(30,new S(8,23),new S(26,24)),new V(30,new S(12,15),new S(28,16))),new fe(28,Int32Array.from([6,26,50,74,98,122]),new V(30,new S(3,117),new S(10,118)),new V(28,new S(3,45),new S(23,46)),new V(30,new S(4,24),new S(31,25)),new V(30,new S(11,15),new S(31,16))),new fe(29,Int32Array.from([6,30,54,78,102,126]),new V(30,new S(7,116),new S(7,117)),new V(28,new S(21,45),new S(7,46)),new V(30,new S(1,23),new S(37,24)),new V(30,new S(19,15),new S(26,16))),new fe(30,Int32Array.from([6,26,52,78,104,130]),new V(30,new S(5,115),new S(10,116)),new V(28,new S(19,47),new S(10,48)),new V(30,new S(15,24),new S(25,25)),new V(30,new S(23,15),new S(25,16))),new fe(31,Int32Array.from([6,30,56,82,108,134]),new V(30,new S(13,115),new S(3,116)),new V(28,new S(2,46),new S(29,47)),new V(30,new S(42,24),new S(1,25)),new V(30,new S(23,15),new S(28,16))),new fe(32,Int32Array.from([6,34,60,86,112,138]),new V(30,new S(17,115)),new V(28,new S(10,46),new S(23,47)),new V(30,new S(10,24),new S(35,25)),new V(30,new S(19,15),new S(35,16))),new fe(33,Int32Array.from([6,30,58,86,114,142]),new V(30,new S(17,115),new S(1,116)),new V(28,new S(14,46),new S(21,47)),new V(30,new S(29,24),new S(19,25)),new V(30,new S(11,15),new S(46,16))),new fe(34,Int32Array.from([6,34,62,90,118,146]),new V(30,new S(13,115),new S(6,116)),new V(28,new S(14,46),new S(23,47)),new V(30,new S(44,24),new S(7,25)),new V(30,new S(59,16),new S(1,17))),new fe(35,Int32Array.from([6,30,54,78,102,126,150]),new V(30,new S(12,121),new S(7,122)),new V(28,new S(12,47),new S(26,48)),new V(30,new S(39,24),new S(14,25)),new V(30,new S(22,15),new S(41,16))),new fe(36,Int32Array.from([6,24,50,76,102,128,154]),new V(30,new S(6,121),new S(14,122)),new V(28,new S(6,47),new S(34,48)),new V(30,new S(46,24),new S(10,25)),new V(30,new S(2,15),new S(64,16))),new fe(37,Int32Array.from([6,28,54,80,106,132,158]),new V(30,new S(17,122),new S(4,123)),new V(28,new S(29,46),new S(14,47)),new V(30,new S(49,24),new S(10,25)),new V(30,new S(24,15),new S(46,16))),new fe(38,Int32Array.from([6,32,58,84,110,136,162]),new V(30,new S(4,122),new S(18,123)),new V(28,new S(13,46),new S(32,47)),new V(30,new S(48,24),new S(14,25)),new V(30,new S(42,15),new S(32,16))),new fe(39,Int32Array.from([6,26,54,82,110,138,166]),new V(30,new S(20,117),new S(4,118)),new V(28,new S(40,47),new S(7,48)),new V(30,new S(43,24),new S(22,25)),new V(30,new S(10,15),new S(67,16))),new fe(40,Int32Array.from([6,30,58,86,114,142,170]),new V(30,new S(19,118),new S(6,119)),new V(28,new S(18,47),new S(31,48)),new V(30,new S(34,24),new S(34,25)),new V(30,new S(20,15),new S(61,16)))];var pt;(function(C){C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111"})(pt||(pt={}));class Yt{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}Yt.values=new Map([[pt.DATA_MASK_000,new Yt(pt.DATA_MASK_000,(C,e)=>(C+e&1)===0)],[pt.DATA_MASK_001,new Yt(pt.DATA_MASK_001,(C,e)=>(C&1)===0)],[pt.DATA_MASK_010,new Yt(pt.DATA_MASK_010,(C,e)=>e%3===0)],[pt.DATA_MASK_011,new Yt(pt.DATA_MASK_011,(C,e)=>(C+e)%3===0)],[pt.DATA_MASK_100,new Yt(pt.DATA_MASK_100,(C,e)=>(Math.floor(C/2)+Math.floor(e/3)&1)===0)],[pt.DATA_MASK_101,new Yt(pt.DATA_MASK_101,(C,e)=>C*e%6===0)],[pt.DATA_MASK_110,new Yt(pt.DATA_MASK_110,(C,e)=>C*e%6<3)],[pt.DATA_MASK_111,new Yt(pt.DATA_MASK_111,(C,e)=>(C+e+C*e%3&1)===0)]]);class Tc{constructor(e){const t=e.getHeight();if(t<21||(t&3)!==1)throw new L;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let o=0;o<6;o++)e=this.copyBit(o,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let o=5;o>=0;o--)e=this.copyBit(8,o,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let o=t-1;o>=r;o--)n=this.copyBit(8,o,n);for(let o=t-8;o<t;o++)n=this.copyBit(o,8,n);if(this.parsedFormatInfo=vt.decodeFormatInformation(e,n),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return fe.getVersionForNumber(t);let n=0;const r=e-11;for(let a=5;a>=0;a--)for(let u=e-9;u>=r;u--)n=this.copyBit(u,a,n);let o=fe.decodeVersionInformation(n);if(o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;n=0;for(let a=5;a>=0;a--)for(let u=e-9;u>=r;u--)n=this.copyBit(a,u,n);if(o=fe.decodeVersionInformation(n),o!==null&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new L}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=Yt.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const o=t.buildFunctionPattern();let a=!0;const u=new Uint8Array(t.getTotalCodewords());let f=0,g=0,m=0;for(let E=r-1;E>0;E-=2){E===6&&E--;for(let v=0;v<r;v++){const I=a?r-1-v:v;for(let N=0;N<2;N++)o.get(E-N,I)||(m++,g<<=1,this.bitMatrix.get(E-N,I)&&(g|=1),m===8&&(u[f++]=g,m=0,g=0))}a=!a}if(f!==t.getTotalCodewords())throw new L;return u}remask(){if(this.parsedFormatInfo===null)return;const e=Yt.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,o=e.getHeight();r<o;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class Gi{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new y;const r=t.getECBlocksForLevel(n);let o=0;const a=r.getECBlocks();for(const N of a)o+=N.getCount();const u=new Array(o);let f=0;for(const N of a)for(let D=0;D<N.getCount();D++){const F=N.getDataCodewords(),W=r.getECCodewordsPerBlock()+F;u[f++]=new Gi(F,new Uint8Array(W))}const g=u[0].codewords.length;let m=u.length-1;for(;m>=0&&u[m].codewords.length!==g;)m--;m++;const E=g-r.getECCodewordsPerBlock();let v=0;for(let N=0;N<E;N++)for(let D=0;D<f;D++)u[D].codewords[N]=e[v++];for(let N=m;N<f;N++)u[N].codewords[E]=e[v++];const I=u[0].codewords.length;for(let N=E;N<I;N++)for(let D=0;D<f;D++){const F=D<m?N:N+1;u[D].codewords[F]=e[v++]}return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var qt;(function(C){C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI"})(qt||(qt={}));class ge{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,ge.FOR_BITS.set(r,this),ge.FOR_VALUE.set(e,this)}static forBits(e){const t=ge.FOR_BITS.get(e);if(t===void 0)throw new y;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof ge))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}ge.FOR_BITS=new Map,ge.FOR_VALUE=new Map,ge.TERMINATOR=new ge(qt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ge.NUMERIC=new ge(qt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ge.ALPHANUMERIC=new ge(qt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ge.STRUCTURED_APPEND=new ge(qt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ge.BYTE=new ge(qt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ge.ECI=new ge(qt.ECI,"ECI",Int32Array.from([0,0,0]),7),ge.KANJI=new ge(qt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ge.FNC1_FIRST_POSITION=new ge(qt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ge.FNC1_SECOND_POSITION=new ge(qt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ge.HANZI=new ge(qt.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class nt{static decode(e,t,n,r){const o=new Wi(e);let a=new Ee;const u=new Array;let f=-1,g=-1;try{let m=null,E=!1,v;do{if(o.available()<4)v=ge.TERMINATOR;else{const I=o.readBits(4);v=ge.forBits(I)}switch(v){case ge.TERMINATOR:break;case ge.FNC1_FIRST_POSITION:case ge.FNC1_SECOND_POSITION:E=!0;break;case ge.STRUCTURED_APPEND:if(o.available()<16)throw new L;f=o.readBits(8),g=o.readBits(8);break;case ge.ECI:const I=nt.parseECIValue(o);if(m=z.getCharacterSetECIByValue(I),m===null)throw new L;break;case ge.HANZI:const N=o.readBits(4),D=o.readBits(v.getCharacterCountBits(t));N===nt.GB2312_SUBSET&&nt.decodeHanziSegment(o,a,D);break;default:const F=o.readBits(v.getCharacterCountBits(t));switch(v){case ge.NUMERIC:nt.decodeNumericSegment(o,a,F);break;case ge.ALPHANUMERIC:nt.decodeAlphanumericSegment(o,a,F,E);break;case ge.BYTE:nt.decodeByteSegment(o,a,F,m,u,r);break;case ge.KANJI:nt.decodeKanjiSegment(o,a,F);break;default:throw new L}break}}while(v!==ge.TERMINATOR)}catch{throw new L}return new Wt(e,a.toString(),u.length===0?null:u,n===null?null:n.toString(),f,g)}static decodeHanziSegment(e,t,n){if(n*13>e.available())throw new L;const r=new Uint8Array(2*n);let o=0;for(;n>0;){const a=e.readBits(13);let u=a/96<<8&4294967295|a%96;u<959?u+=41377:u+=42657,r[o]=u>>8&255,r[o+1]=u&255,o+=2,n--}try{t.append(Ae.decode(r,ae.GB2312))}catch(a){throw new L(a)}}static decodeKanjiSegment(e,t,n){if(n*13>e.available())throw new L;const r=new Uint8Array(2*n);let o=0;for(;n>0;){const a=e.readBits(13);let u=a/192<<8&4294967295|a%192;u<7936?u+=33088:u+=49472,r[o]=u>>8,r[o+1]=u,o+=2,n--}try{t.append(Ae.decode(r,ae.SHIFT_JIS))}catch(a){throw new L(a)}}static decodeByteSegment(e,t,n,r,o,a){if(8*n>e.available())throw new L;const u=new Uint8Array(n);for(let g=0;g<n;g++)u[g]=e.readBits(8);let f;r===null?f=ae.guessEncoding(u,a):f=r.getName();try{t.append(Ae.decode(u,f))}catch(g){throw new L(g)}o.push(u)}static toAlphaNumericChar(e){if(e>=nt.ALPHANUMERIC_CHARS.length)throw new L;return nt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const o=t.length();for(;n>1;){if(e.available()<11)throw new L;const a=e.readBits(11);t.append(nt.toAlphaNumericChar(Math.floor(a/45))),t.append(nt.toAlphaNumericChar(a%45)),n-=2}if(n===1){if(e.available()<6)throw new L;t.append(nt.toAlphaNumericChar(e.readBits(6)))}if(r)for(let a=o;a<t.length();a++)t.charAt(a)==="%"&&(a<t.length()-1&&t.charAt(a+1)==="%"?t.deleteCharAt(a+1):t.setCharAt(a,""))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new L;const r=e.readBits(10);if(r>=1e3)throw new L;t.append(nt.toAlphaNumericChar(Math.floor(r/100))),t.append(nt.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(nt.toAlphaNumericChar(r%10)),n-=3}if(n===2){if(e.available()<7)throw new L;const r=e.readBits(7);if(r>=100)throw new L;t.append(nt.toAlphaNumericChar(Math.floor(r/10))),t.append(nt.toAlphaNumericChar(r%10))}else if(n===1){if(e.available()<4)throw new L;const r=e.readBits(4);if(r>=10)throw new L;t.append(nt.toAlphaNumericChar(r))}}static parseECIValue(e){const t=e.readBits(8);if(!(t&128))return t&127;if((t&192)===128){const n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){const n=e.readBits(16);return(t&31)<<16&4294967295|n}throw new L}}nt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",nt.GB2312_SUBSET=1;class ho{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Oc{constructor(){this.rsDecoder=new Xt(se.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(Te.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new Tc(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(o){r=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const o=this.decodeBitMatrixParser(n,t);return o.setOther(new ho(!0)),o}catch(o){throw r!==null?r:o}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),o=e.readCodewords(),a=Gi.getDataBlocks(o,n,r);let u=0;for(const m of a)u+=m.getNumDataCodewords();const f=new Uint8Array(u);let g=0;for(const m of a){const E=m.getCodewords(),v=m.getNumDataCodewords();this.correctErrors(E,v);for(let I=0;I<v;I++)f[g++]=E[I]}return nt.decode(f,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new B}for(let r=0;r<t;r++)e[r]=n[r]}}class Xi extends de{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,o=(this.getY()+e)/2,a=(this.estimatedModuleSize+n)/2;return new Xi(r,o,a)}}class Pr{constructor(e,t,n,r,o,a,u){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=o,this.moduleSize=a,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=this.width,r=e+n,o=this.startY+t/2,a=new Int32Array(3),u=this.image;for(let f=0;f<t;f++){const g=o+(f&1?-Math.floor((f+1)/2):Math.floor((f+1)/2));a[0]=0,a[1]=0,a[2]=0;let m=e;for(;m<r&&!u.get(m,g);)m++;let E=0;for(;m<r;){if(u.get(m,g))if(E===1)a[1]++;else if(E===2){if(this.foundPatternCross(a)){const v=this.handlePossibleCenter(a,g,m);if(v!==null)return v}a[0]=a[2],a[1]=1,a[2]=0,E=1}else a[++E]++;else E===1&&E++,a[E]++;m++}if(this.foundPatternCross(a)){const v=this.handlePossibleCenter(a,g,r);if(v!==null)return v}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new U}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const o=this.image,a=o.getHeight(),u=this.crossCheckStateCount;u[0]=0,u[1]=0,u[2]=0;let f=e;for(;f>=0&&o.get(t,f)&&u[1]<=n;)u[1]++,f--;if(f<0||u[1]>n)return NaN;for(;f>=0&&!o.get(t,f)&&u[0]<=n;)u[0]++,f--;if(u[0]>n)return NaN;for(f=e+1;f<a&&o.get(t,f)&&u[1]<=n;)u[1]++,f++;if(f===a||u[1]>n)return NaN;for(;f<a&&!o.get(t,f)&&u[2]<=n;)u[2]++,f++;if(u[2]>n)return NaN;const g=u[0]+u[1]+u[2];return 5*Math.abs(g-r)>=2*r?NaN:this.foundPatternCross(u)?Pr.centerFromEnd(u,f):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],o=Pr.centerFromEnd(e,n),a=this.crossCheckVertical(t,o,2*e[1],r);if(!isNaN(a)){const u=(e[0]+e[1]+e[2])/3;for(const g of this.possibleCenters)if(g.aboutEquals(u,a,o))return g.combineEstimate(a,o,u);const f=new Xi(o,a,u);this.possibleCenters.push(f),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(f)}return null}}class zi extends de{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,r===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,o=(this.count*this.getX()+t)/r,a=(this.count*this.getY()+e)/r,u=(this.count*this.estimatedModuleSize+n)/r;return new zi(o,a,u,r)}}class Nc{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class mt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=e!=null&&e.get($.TRY_HARDER)!==void 0,n=e!=null&&e.get($.PURE_BARCODE)!==void 0,r=this.image,o=r.getHeight(),a=r.getWidth();let u=Math.floor(3*o/(4*mt.MAX_MODULES));(u<mt.MIN_SKIP||t)&&(u=mt.MIN_SKIP);let f=!1;const g=new Int32Array(5);for(let E=u-1;E<o&&!f;E+=u){g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0;let v=0;for(let I=0;I<a;I++)if(r.get(I,E))(v&1)===1&&v++,g[v]++;else if(v&1)g[v]++;else if(v===4)if(mt.foundPatternCross(g)){if(this.handlePossibleCenter(g,E,I,n)===!0)if(u=2,this.hasSkipped===!0)f=this.haveMultiplyConfirmedCenters();else{const D=this.findRowSkip();D>g[2]&&(E+=D-g[2]-u,I=a-1)}else{g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,v=3;continue}v=0,g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0}else g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,v=3;else g[++v]++;mt.foundPatternCross(g)&&this.handlePossibleCenter(g,E,a,n)===!0&&(u=g[0],this.hasSkipped&&(f=this.haveMultiplyConfirmedCenters()))}const m=this.selectBestPatterns();return de.orderBestPatterns(m),new Nc(m)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let o=0;o<5;o++){const a=e[o];if(a===0)return!1;t+=a}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const o=this.getCrossCheckStateCount();let a=0;const u=this.image;for(;e>=a&&t>=a&&u.get(t-a,e-a);)o[2]++,a++;if(e<a||t<a)return!1;for(;e>=a&&t>=a&&!u.get(t-a,e-a)&&o[1]<=n;)o[1]++,a++;if(e<a||t<a||o[1]>n)return!1;for(;e>=a&&t>=a&&u.get(t-a,e-a)&&o[0]<=n;)o[0]++,a++;if(o[0]>n)return!1;const f=u.getHeight(),g=u.getWidth();for(a=1;e+a<f&&t+a<g&&u.get(t+a,e+a);)o[2]++,a++;if(e+a>=f||t+a>=g)return!1;for(;e+a<f&&t+a<g&&!u.get(t+a,e+a)&&o[3]<n;)o[3]++,a++;if(e+a>=f||t+a>=g||o[3]>=n)return!1;for(;e+a<f&&t+a<g&&u.get(t+a,e+a)&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return!1;const m=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(m-r)<2*r&&mt.foundPatternCross(o)}crossCheckVertical(e,t,n,r){const o=this.image,a=o.getHeight(),u=this.getCrossCheckStateCount();let f=e;for(;f>=0&&o.get(t,f);)u[2]++,f--;if(f<0)return NaN;for(;f>=0&&!o.get(t,f)&&u[1]<=n;)u[1]++,f--;if(f<0||u[1]>n)return NaN;for(;f>=0&&o.get(t,f)&&u[0]<=n;)u[0]++,f--;if(u[0]>n)return NaN;for(f=e+1;f<a&&o.get(t,f);)u[2]++,f++;if(f===a)return NaN;for(;f<a&&!o.get(t,f)&&u[3]<n;)u[3]++,f++;if(f===a||u[3]>=n)return NaN;for(;f<a&&o.get(t,f)&&u[4]<n;)u[4]++,f++;if(u[4]>=n)return NaN;const g=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(g-r)>=2*r?NaN:mt.foundPatternCross(u)?mt.centerFromEnd(u,f):NaN}crossCheckHorizontal(e,t,n,r){const o=this.image,a=o.getWidth(),u=this.getCrossCheckStateCount();let f=e;for(;f>=0&&o.get(f,t);)u[2]++,f--;if(f<0)return NaN;for(;f>=0&&!o.get(f,t)&&u[1]<=n;)u[1]++,f--;if(f<0||u[1]>n)return NaN;for(;f>=0&&o.get(f,t)&&u[0]<=n;)u[0]++,f--;if(u[0]>n)return NaN;for(f=e+1;f<a&&o.get(f,t);)u[2]++,f++;if(f===a)return NaN;for(;f<a&&!o.get(f,t)&&u[3]<n;)u[3]++,f++;if(f===a||u[3]>=n)return NaN;for(;f<a&&o.get(f,t)&&u[4]<n;)u[4]++,f++;if(u[4]>=n)return NaN;const g=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(g-r)>=r?NaN:mt.foundPatternCross(u)?mt.centerFromEnd(u,f):NaN}handlePossibleCenter(e,t,n,r){const o=e[0]+e[1]+e[2]+e[3]+e[4];let a=mt.centerFromEnd(e,n),u=this.crossCheckVertical(t,Math.floor(a),e[2],o);if(!isNaN(u)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(u),e[2],o),!isNaN(a)&&(!r||this.crossCheckDiagonal(Math.floor(u),Math.floor(a),e[2],o)))){const f=o/7;let g=!1;const m=this.possibleCenters;for(let E=0,v=m.length;E<v;E++){const I=m[E];if(I.aboutEquals(f,u,a)){m[E]=I.combineEstimate(u,a,f),g=!0;break}}if(!g){const E=new zi(a,u,f);m.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const n of this.possibleCenters)if(n.getCount()>=mt.CENTER_QUORUM)if(t==null)t=n;else return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-n.getX())-Math.abs(t.getY()-n.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const a of this.possibleCenters)a.getCount()>=mt.CENTER_QUORUM&&(e++,t+=a.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let o=0;for(const a of this.possibleCenters)o+=Math.abs(a.getEstimatedModuleSize()-r);return o<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new U;const t=this.possibleCenters;let n;if(e>3){let r=0,o=0;for(const f of this.possibleCenters){const g=f.getEstimatedModuleSize();r+=g,o+=g*g}n=r/e;let a=Math.sqrt(o/e-n*n);t.sort((f,g)=>{const m=Math.abs(g.getEstimatedModuleSize()-n),E=Math.abs(f.getEstimatedModuleSize()-n);return m<E?-1:m>E?1:0});const u=Math.max(.2*n,a);for(let f=0;f<t.length&&t.length>3;f++){const g=t[f];Math.abs(g.getEstimatedModuleSize()-n)>u&&(t.splice(f,1),f--)}}if(t.length>3){let r=0;for(const o of t)r+=o.getEstimatedModuleSize();n=r/t.length,t.sort((o,a)=>{if(a.getCount()===o.getCount()){const u=Math.abs(a.getEstimatedModuleSize()-n),f=Math.abs(o.getEstimatedModuleSize()-n);return u<f?1:u>f?-1:0}else return a.getCount()-o.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}mt.CENTER_QUORUM=2,mt.MIN_SKIP=3,mt.MAX_MODULES=57;class nr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get($.NEED_RESULT_POINT_CALLBACK);const n=new mt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(n)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),o=this.calculateModuleSize(t,n,r);if(o<1)throw new U("No pattern found in proccess finder.");const a=nr.computeDimension(t,n,r,o),u=fe.getProvisionalVersionForDimension(a),f=u.getDimensionForVersion()-7;let g=null;if(u.getAlignmentPatternCenters().length>0){const I=n.getX()-t.getX()+r.getX(),N=n.getY()-t.getY()+r.getY(),D=1-3/f,F=Math.floor(t.getX()+D*(I-t.getX())),W=Math.floor(t.getY()+D*(N-t.getY()));for(let ee=4;ee<=16;ee<<=1)try{g=this.findAlignmentInRegion(o,F,W,ee);break}catch(ne){if(!(ne instanceof U))throw ne}}const m=nr.createTransform(t,n,r,g,a),E=nr.sampleGrid(this.image,m,a);let v;return g===null?v=[r,t,n]:v=[r,t,n,g],new Or(E,v)}static createTransform(e,t,n,r,o){const a=o-3.5;let u,f,g,m;return r!==null?(u=r.getX(),f=r.getY(),g=a-3,m=g):(u=t.getX()-e.getX()+n.getX(),f=t.getY()-e.getY()+n.getY(),g=a,m=a),$t.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,g,m,3.5,a,e.getX(),e.getY(),t.getX(),t.getY(),u,f,n.getX(),n.getY())}static sampleGrid(e,t,n){return bn.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const o=Ie.round(de.distance(e,t)/r),a=Ie.round(de.distance(e,n)/r);let u=Math.floor((o+a)/2)+7;switch(u&3){case 0:u++;break;case 2:u--;break;case 3:throw new U("Dimensions could be not found.")}return u}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let o=this.sizeOfBlackWhiteBlackRun(e,t,n,r),a=1,u=e-(n-e);u<0?(a=e/(e-u),u=0):u>=this.image.getWidth()&&(a=(this.image.getWidth()-1-e)/(u-e),u=this.image.getWidth()-1);let f=Math.floor(t-(r-t)*a);return a=1,f<0?(a=t/(t-f),f=0):f>=this.image.getHeight()&&(a=(this.image.getHeight()-1-t)/(f-t),f=this.image.getHeight()-1),u=Math.floor(e+(u-e)*a),o+=this.sizeOfBlackWhiteBlackRun(e,t,u,f),o-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const o=Math.abs(r-t)>Math.abs(n-e);if(o){let I=e;e=t,t=I,I=n,n=r,r=I}const a=Math.abs(n-e),u=Math.abs(r-t);let f=-a/2;const g=e<n?1:-1,m=t<r?1:-1;let E=0;const v=n+g;for(let I=e,N=t;I!==v;I+=g){const D=o?N:I,F=o?I:N;if(E===1===this.image.get(D,F)){if(E===2)return Ie.distance(I,N,e,t);E++}if(f+=u,f>0){if(N===r)break;N+=m,f-=a}}return E===2?Ie.distance(n+g,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const o=Math.floor(r*e),a=Math.max(0,t-o),u=Math.min(this.image.getWidth()-1,t+o);if(u-a<e*3)throw new U("Alignment top exceeds estimated module size.");const f=Math.max(0,n-o),g=Math.min(this.image.getHeight()-1,n+o);if(g-f<e*3)throw new U("Alignment bottom exceeds estimated module size.");return new Pr(this.image,a,f,u-a,g-f,e,this.resultPointCallback).find()}}class yn{constructor(){this.decoder=new Oc}getDecoder(){return this.decoder}decode(e,t){let n,r;if(t!=null&&t.get($.PURE_BARCODE)!==void 0){const f=yn.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(f,t),r=yn.NO_POINTS}else{const f=new nr(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(f.getBits(),t),r=f.getPoints()}n.getOther()instanceof ho&&n.getOther().applyMirroredCorrection(r);const o=new Ue(n.getText(),n.getRawBytes(),void 0,r,oe.QR_CODE,void 0),a=n.getByteSegments();a!==null&&o.putMetadata(He.BYTE_SEGMENTS,a);const u=n.getECLevel();return u!==null&&o.putMetadata(He.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(o.putMetadata(He.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),o.putMetadata(He.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),o}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new U;const r=this.moduleSize(t,e);let o=t[1],a=n[1],u=t[0],f=n[0];if(u>=f||o>=a)throw new U;if(a-o!==f-u&&(f=u+(a-o),f>=e.getWidth()))throw new U;const g=Math.round((f-u+1)/r),m=Math.round((a-o+1)/r);if(g<=0||m<=0)throw new U;if(m!==g)throw new U;const E=Math.floor(r/2);o+=E,u+=E;const v=u+Math.floor((g-1)*r)-f;if(v>0){if(v>E)throw new U;u-=v}const I=o+Math.floor((m-1)*r)-a;if(I>0){if(I>E)throw new U;o-=I}const N=new Te(g,m);for(let D=0;D<m;D++){const F=o+Math.floor(D*r);for(let W=0;W<g;W++)e.get(u+Math.floor(W*r),F)&&N.set(W,D)}return N}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let o=e[0],a=e[1],u=!0,f=0;for(;o<r&&a<n;){if(u!==t.get(o,a)){if(++f===5)break;u=!u}o++,a++}if(o===r||a===n)throw new U;return(o-e[0])/7}}yn.NO_POINTS=new Array;class be{PDF417Common(){}static getBitCountSum(e){return Ie.sum(e)}static toIntArray(e){if(e==null||!e.length)return be.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=H.binarySearch(be.SYMBOL_TABLE,e&262143);return t<0?-1:(be.CODEWORD_TABLE[t]-1)%be.NUMBER_OF_CODEWORDS}}be.NUMBER_OF_CODEWORDS=929,be.MAX_CODEWORDS_IN_BARCODE=be.NUMBER_OF_CODEWORDS-1,be.MIN_ROWS_IN_BARCODE=3,be.MAX_ROWS_IN_BARCODE=90,be.MODULES_IN_CODEWORD=17,be.MODULES_IN_STOP_PATTERN=18,be.BARS_IN_MODULE=8,be.EMPTY_INT_ARRAY=new Int32Array([]),be.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),be.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Rc{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class _e{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),o=_e.detect(n,r);return o.length||(r=r.clone(),r.rotate180(),o=_e.detect(n,r)),new Rc(r,o)}static detect(e,t){const n=new Array;let r=0,o=0,a=!1;for(;r<t.getHeight();){const u=_e.findVertices(t,r,o);if(u[0]==null&&u[3]==null){if(!a)break;a=!1,o=0;for(const f of n)f[1]!=null&&(r=Math.trunc(Math.max(r,f[1].getY()))),f[3]!=null&&(r=Math.max(r,Math.trunc(f[3].getY())));r+=_e.ROW_STEP;continue}if(a=!0,n.push(u),!e)break;u[2]!=null?(o=Math.trunc(u[2].getX()),r=Math.trunc(u[2].getY())):(o=Math.trunc(u[4].getX()),r=Math.trunc(u[4].getY()))}return n}static findVertices(e,t,n){const r=e.getHeight(),o=e.getWidth(),a=new Array(8);return _e.copyToResult(a,_e.findRowsWithPattern(e,r,o,t,n,_e.START_PATTERN),_e.INDEXES_START_PATTERN),a[4]!=null&&(n=Math.trunc(a[4].getX()),t=Math.trunc(a[4].getY())),_e.copyToResult(a,_e.findRowsWithPattern(e,r,o,t,n,_e.STOP_PATTERN),_e.INDEXES_STOP_PATTERN),a}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,o,a){const u=new Array(4);let f=!1;const g=new Int32Array(a.length);for(;r<t;r+=_e.ROW_STEP){let E=_e.findGuardPattern(e,o,r,n,!1,a,g);if(E!=null){for(;r>0;){const v=_e.findGuardPattern(e,o,--r,n,!1,a,g);if(v!=null)E=v;else{r++;break}}u[0]=new de(E[0],r),u[1]=new de(E[1],r),f=!0;break}}let m=r+1;if(f){let E=0,v=Int32Array.from([Math.trunc(u[0].getX()),Math.trunc(u[1].getX())]);for(;m<t;m++){const I=_e.findGuardPattern(e,v[0],m,n,!1,a,g);if(I!=null&&Math.abs(v[0]-I[0])<_e.MAX_PATTERN_DRIFT&&Math.abs(v[1]-I[1])<_e.MAX_PATTERN_DRIFT)v=I,E=0;else{if(E>_e.SKIPPED_ROW_COUNT_MAX)break;E++}}m-=E+1,u[2]=new de(v[0],m),u[3]=new de(v[1],m)}return m-r<_e.BARCODE_MIN_HEIGHT&&H.fill(u,null),u}static findGuardPattern(e,t,n,r,o,a,u){H.fillWithin(u,0,u.length,0);let f=t,g=0;for(;e.get(f,n)&&f>0&&g++<_e.MAX_PIXEL_DRIFT;)f--;let m=f,E=0,v=a.length;for(let I=o;m<r;m++)if(e.get(m,n)!==I)u[E]++;else{if(E===v-1){if(_e.patternMatchVariance(u,a,_e.MAX_INDIVIDUAL_VARIANCE)<_e.MAX_AVG_VARIANCE)return new Int32Array([f,m]);f+=u[0]+u[1],T.arraycopy(u,2,u,0,E-1),u[E-1]=0,u[E]=0,E--}else E++;u[E]=1,I=!I}return E===v-1&&_e.patternMatchVariance(u,a,_e.MAX_INDIVIDUAL_VARIANCE)<_e.MAX_AVG_VARIANCE?new Int32Array([f,m-1]):null}static patternMatchVariance(e,t,n){let r=e.length,o=0,a=0;for(let g=0;g<r;g++)o+=e[g],a+=t[g];if(o<a)return 1/0;let u=o/a;n*=u;let f=0;for(let g=0;g<r;g++){let m=e[g],E=t[g]*u,v=m>E?m-E:E-m;if(v>n)return 1/0;f+=v}return f/o}}_e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),_e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),_e.MAX_AVG_VARIANCE=.42,_e.MAX_INDIVIDUAL_VARIANCE=.8,_e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),_e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),_e.MAX_PIXEL_DRIFT=3,_e.MAX_PATTERN_DRIFT=5,_e.SKIPPED_ROW_COUNT_MAX=25,_e.ROW_STEP=5,_e.BARCODE_MIN_HEIGHT=10;class bt{constructor(e,t){if(t.length===0)throw new y;this.field=e;let n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),T.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let r=0;for(let o of this.coefficients)r=this.field.add(r,o);return r}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let a=t;t=n,n=a}let r=new Int32Array(n.length),o=n.length-t.length;T.arraycopy(n,0,r,0,o);for(let a=o;a<n.length;a++)r[a]=this.field.add(t[a-o],n[a]);return new bt(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new y("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof bt?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new bt(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,o=r.length,a=new Int32Array(n+o-1);for(let u=0;u<n;u++){let f=t[u];for(let g=0;g<o;g++)a[u+g]=this.field.add(a[u+g],this.field.multiply(f,r[g]))}return new bt(this.field,a)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new bt(this.field,t)}multiplyScalar(e){if(e===0)return new bt(this.field,new Int32Array([0]));if(e===1)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new bt(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new y;if(t===0)return new bt(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let o=0;o<n;o++)r[o]=this.field.multiply(this.coefficients[o],t);return new bt(this.field,r)}toString(){let e=new Ee;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Mc{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new y;return this.logTable[e]}inverse(e){if(e===0)throw new le;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Yi extends Mc{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new bt(this,new Int32Array([0])),this.one=new bt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new y;if(t===0)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new bt(this,n)}}Yi.PDF417_GF=new Yi(be.NUMBER_OF_CODEWORDS,3);class go{constructor(){this.field=Yi.PDF417_GF}decode(e,t,n){let r=new bt(this.field,e),o=new Int32Array(t),a=!1;for(let N=t;N>0;N--){let D=r.evaluateAt(this.field.exp(N));o[t-N]=D,D!==0&&(a=!0)}if(!a)return 0;let u=this.field.getOne();if(n!=null)for(const N of n){let D=this.field.exp(e.length-1-N),F=new bt(this.field,new Int32Array([this.field.subtract(0,D),1]));u=u.multiply(F)}let f=new bt(this.field,o),g=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),f,t),m=g[0],E=g[1],v=this.findErrorLocations(m),I=this.findErrorMagnitudes(E,m,v);for(let N=0;N<v.length;N++){let D=e.length-1-this.field.log(v[N]);if(D<0)throw B.getChecksumInstance();e[D]=this.field.subtract(e[D],I[N])}return v.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let v=e;e=t,t=v}let r=e,o=t,a=this.field.getZero(),u=this.field.getOne();for(;o.getDegree()>=Math.round(n/2);){let v=r,I=a;if(r=o,a=u,r.isZero())throw B.getChecksumInstance();o=v;let N=this.field.getZero(),D=r.getCoefficient(r.getDegree()),F=this.field.inverse(D);for(;o.getDegree()>=r.getDegree()&&!o.isZero();){let W=o.getDegree()-r.getDegree(),ee=this.field.multiply(o.getCoefficient(o.getDegree()),F);N=N.add(this.field.buildMonomial(W,ee)),o=o.subtract(r.multiplyByMonomial(W,ee))}u=N.multiply(a).subtract(I).negative()}let f=u.getCoefficient(0);if(f===0)throw B.getChecksumInstance();let g=this.field.inverse(f),m=u.multiply(g),E=o.multiply(g);return[m,E]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let o=1;o<this.field.getSize()&&r<t;o++)e.evaluateAt(o)===0&&(n[r]=this.field.inverse(o),r++);if(r!==t)throw B.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),o=new Int32Array(r);for(let g=1;g<=r;g++)o[r-g]=this.field.multiply(g,t.getCoefficient(g));let a=new bt(this.field,o),u=n.length,f=new Int32Array(u);for(let g=0;g<u;g++){let m=this.field.inverse(n[g]),E=this.field.subtract(0,e.evaluateAt(m)),v=this.field.inverse(a.evaluateAt(m));f[g]=this.field.multiply(E,v)}return f}}class Nn{constructor(e,t,n,r,o){e instanceof Nn?this.constructor_2(e):this.constructor_1(e,t,n,r,o)}constructor_1(e,t,n,r,o){const a=t==null||n==null,u=r==null||o==null;if(a&&u)throw new U;a?(t=new de(0,r.getY()),n=new de(0,o.getY())):u&&(r=new de(e.getWidth()-1,t.getY()),o=new de(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),o.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return e==null?t:t==null?e:new Nn(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,o=this.bottomLeft,a=this.topRight,u=this.bottomRight;if(e>0){let f=n?this.topLeft:this.topRight,g=Math.trunc(f.getY()-e);g<0&&(g=0);let m=new de(f.getX(),g);n?r=m:a=m}if(t>0){let f=n?this.bottomLeft:this.bottomRight,g=Math.trunc(f.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);let m=new de(f.getX(),g);n?o=m:u=m}return new Nn(this.image,r,o,a,u)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Dc{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class rr{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(a,u,f,g,m,E){if(a==="%%")return"%";if(t[++n]===void 0)return;a=g?parseInt(g.substr(1)):void 0;let v=m?parseInt(m.substr(1)):void 0,I;switch(E){case"s":I=t[n];break;case"c":I=t[n][0];break;case"f":I=parseFloat(t[n]).toFixed(a);break;case"p":I=parseFloat(t[n]).toPrecision(a);break;case"e":I=parseFloat(t[n]).toExponential(a);break;case"x":I=parseInt(t[n]).toString(v||16);break;case"d":I=parseFloat(parseInt(t[n],v||10).toPrecision(a)).toFixed(0);break}I=typeof I=="object"?JSON.stringify(I):(+I).toString(v);let N=parseInt(f),D=f&&f[0]+""=="0"?"0":" ";for(;I.length<N;)I=u!==void 0?I+D:D+I;return I}let o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,r)}format(e,...t){this.buffer+=rr.form(e,t)}toString(){return this.buffer}}class ir{constructor(e){this.boundingBox=new Nn(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(t!=null)return t;for(let n=1;n<ir.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],t!=null)||(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],t!=null)))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new rr;let t=0;for(const n of this.codewords){if(n==null){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue())}return e.toString()}}ir.MAX_NEARBY_DISTANCE=5;class sr{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const o={getKey:()=>n,getValue:()=>r};o.getValue()>e?(e=o.getValue(),t=[],t.push(o.getKey())):o.getValue()===e&&t.push(o.getKey())}return be.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class xo extends ir{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(r.getY())),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=-1,g=1,m=0;for(let E=a;E<u;E++){if(t[E]==null)continue;let v=t[E],I=v.getRowNumber()-f;if(I===0)m++;else if(I===1)g=Math.max(g,m),m=1,f=v.getRowNumber();else if(I<0||v.getRowNumber()>=e.getRowCount()||I>E)t[E]=null;else{let N;g>2?N=(g-2)*I:N=I;let D=N>=E;for(let F=1;F<=N&&!D;F++)D=t[E-F]!=null;D?t[E]=null:(f=v.getRowNumber(),m=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(n!=null){let r=n.getRowNumber();if(r>=t.length)continue;t[r]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.imageRowToCodewordIndex(Math.trunc(r.getY())),u=this.getCodewords(),f=-1;for(let g=o;g<a;g++){if(u[g]==null)continue;let m=u[g];m.setRowNumberAsRowIndicatorColumn();let E=m.getRowNumber()-f;E===0||(E===1?f=m.getRowNumber():m.getRowNumber()>=e.getRowCount()?u[g]=null:f=m.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new sr,n=new sr,r=new sr,o=new sr;for(let u of e){if(u==null)continue;u.setRowNumberAsRowIndicatorColumn();let f=u.getValue()%30,g=u.getRowNumber();switch(this._isLeft||(g+=2),g%3){case 0:n.setValue(f*3+1);break;case 1:o.setValue(f/3),r.setValue(f%3);break;case 2:t.setValue(f+1);break}}if(t.getValue().length===0||n.getValue().length===0||r.getValue().length===0||o.getValue().length===0||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<be.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>be.MAX_ROWS_IN_BARCODE)return null;let a=new Dc(t.getValue()[0],n.getValue()[0],r.getValue()[0],o.getValue()[0]);return this.removeIncorrectCodewords(e,a),a}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(e[n]==null)continue;let o=r.getValue()%30,a=r.getRowNumber();if(a>t.getRowCount()){e[n]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:o*3+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:(Math.trunc(o/3)!==t.getErrorCorrectionLevel()||o%3!==t.getRowCountLowerPart())&&(e[n]=null);break;case 2:o+1!==t.getColumnCount()&&(e[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class or{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=be.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let n=this.detectionResultColumns[t].getCodewords();for(let r=0;r<n.length;r++)n[r]!=null&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(let r=1;r<=this.barcodeColumnCount;r++){let o=this.detectionResultColumns[r].getCodewords()[n];o!=null&&(o.setRowNumber(e[n].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),o=0;for(let a=this.barcodeColumnCount+1;a>0&&o<this.ADJUST_ROW_NUMBER_SKIP;a--){let u=this.detectionResultColumns[a].getCodewords()[n];u!=null&&(o=or.adjustRowNumberIfValid(r,o,u),u.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),o=0;for(let a=1;a<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;a++){let u=this.detectionResultColumns[a].getCodewords()[n];u!=null&&(o=or.adjustRowNumberIfValid(r,o,u),u.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],o=this.detectionResultColumns[e-1].getCodewords(),a=o;this.detectionResultColumns[e+1]!=null&&(a=this.detectionResultColumns[e+1].getCodewords());let u=new Array(14);u[2]=o[t],u[3]=a[t],t>0&&(u[0]=n[t-1],u[4]=o[t-1],u[5]=a[t-1]),t>1&&(u[8]=n[t-2],u[10]=o[t-2],u[11]=a[t-2]),t<n.length-1&&(u[1]=n[t+1],u[6]=o[t+1],u[7]=a[t+1]),t<n.length-2&&(u[9]=n[t+2],u[12]=o[t+2],u[13]=a[t+2]);for(let f of u)if(or.adjustRowNumber(r,f))return}static adjustRowNumber(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new rr;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let r=0;r<this.barcodeColumnCount+2;r++){if(this.detectionResultColumns[r]==null){t.format("    |   ");continue}let o=this.detectionResultColumns[r].getCodewords()[n];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()}}class ar{constructor(e,t,n,r){this.rowNumber=ar.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==ar.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}ar.BARCODE_ROW_UNKNOWN=-1;class Mt{static initialize(){for(let e=0;e<be.SYMBOL_TABLE.length;e++){let t=be.SYMBOL_TABLE[e],n=t&1;for(let r=0;r<be.BARS_IN_MODULE;r++){let o=0;for(;(t&1)===n;)o+=1,t>>=1;n=t&1,Mt.RATIOS_TABLE[e]||(Mt.RATIOS_TABLE[e]=new Array(be.BARS_IN_MODULE)),Mt.RATIOS_TABLE[e][be.BARS_IN_MODULE-r-1]=Math.fround(o/be.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=Mt.getDecodedCodewordValue(Mt.sampleBitCounts(e));return t!==-1?t:Mt.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=Ie.sum(e),n=new Int32Array(be.BARS_IN_MODULE),r=0,o=0;for(let a=0;a<be.MODULES_IN_CODEWORD;a++){let u=t/(2*be.MODULES_IN_CODEWORD)+a*t/be.MODULES_IN_CODEWORD;o+e[r]<=u&&(o+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=Mt.getBitValue(e);return be.getCodeword(t)===-1?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=Ie.sum(e),n=new Array(be.BARS_IN_MODULE);if(t>1)for(let a=0;a<n.length;a++)n[a]=Math.fround(e[a]/t);let r=Tr.MAX_VALUE,o=-1;this.bSymbolTableReady||Mt.initialize();for(let a=0;a<Mt.RATIOS_TABLE.length;a++){let u=0,f=Mt.RATIOS_TABLE[a];for(let g=0;g<be.BARS_IN_MODULE;g++){let m=Math.fround(f[g]-n[g]);if(u+=Math.fround(m*m),u>=r)break}u<r&&(r=u,o=be.SYMBOL_TABLE[a])}return o}}Mt.bSymbolTableReady=!1,Mt.RATIOS_TABLE=new Array(be.SYMBOL_TABLE.length).map(C=>new Array(be.BARS_IN_MODULE));class po{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class mo{static parseLong(e,t=void 0){return parseInt(e,t)}}class wo extends p{}wo.kind="NullPointerException";class Pc{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(e==null)throw new wo;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new M;if(n===0)return;for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class Bc extends p{}class Lc extends Pc{constructor(e=32){if(super(),this.count=0,e<0)throw new y("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let n=this.buf.length<<1;if(n-e<0&&(n=e),n<0){if(e<0)throw new Bc;n=G.MAX_VALUE}this.buf=H.copyOfUint8Array(this.buf,n)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new M;this.ensureCapacity(this.count+n),T.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return H.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Ye;(function(C){C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ye||(Ye={}));function bo(){if(typeof window<"u")return window.BigInt||null;if(typeof ur<"u")return ur.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Br;function vn(C){if(typeof Br>"u"&&(Br=bo()),Br===null)throw new Error("BigInt is not supported!");return Br(C)}function kc(){let C=[];C[0]=vn(1);let e=vn(900);C[1]=e;for(let t=2;t<16;t++)C[t]=C[t-1]*e;return C}class j{static decode(e,t){let n=new Ee(""),r=z.ISO8859_1;n.enableDecoding(r);let o=1,a=e[o++],u=new po;for(;o<e[0];){switch(a){case j.TEXT_COMPACTION_MODE_LATCH:o=j.textCompaction(e,o,n);break;case j.BYTE_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH_6:o=j.byteCompaction(a,e,r,o,n);break;case j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o++]);break;case j.NUMERIC_COMPACTION_MODE_LATCH:o=j.numericCompaction(e,o,n);break;case j.ECI_CHARSET:z.getCharacterSetECIByValue(e[o++]);break;case j.ECI_GENERAL_PURPOSE:o+=2;break;case j.ECI_USER_DEFINED:o++;break;case j.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=j.decodeMacroBlock(e,o,u);break;case j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case j.MACRO_PDF417_TERMINATOR:throw new L;default:o--,o=j.textCompaction(e,o,n);break}if(o<e.length)a=e[o++];else throw L.getFormatInstance()}if(n.length()===0)throw L.getFormatInstance();let f=new Wt(null,n.toString(),null,t);return f.setOther(u),f}static decodeMacroBlock(e,t,n){if(t+j.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw L.getFormatInstance();let r=new Int32Array(j.NUMBER_OF_SEQUENCE_CODEWORDS);for(let u=0;u<j.NUMBER_OF_SEQUENCE_CODEWORDS;u++,t++)r[u]=e[t];n.setSegmentIndex(G.parseInt(j.decodeBase900toBase10(r,j.NUMBER_OF_SEQUENCE_CODEWORDS)));let o=new Ee;t=j.textCompaction(e,t,o),n.setFileId(o.toString());let a=-1;for(e[t]===j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=t+1);t<e[0];)switch(e[t]){case j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case j.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let u=new Ee;t=j.textCompaction(e,t+1,u),n.setFileName(u.toString());break;case j.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let f=new Ee;t=j.textCompaction(e,t+1,f),n.setSender(f.toString());break;case j.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let g=new Ee;t=j.textCompaction(e,t+1,g),n.setAddressee(g.toString());break;case j.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let m=new Ee;t=j.numericCompaction(e,t+1,m),n.setSegmentCount(G.parseInt(m.toString()));break;case j.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let E=new Ee;t=j.numericCompaction(e,t+1,E),n.setTimestamp(mo.parseLong(E.toString()));break;case j.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let v=new Ee;t=j.numericCompaction(e,t+1,v),n.setChecksum(G.parseInt(v.toString()));break;case j.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let I=new Ee;t=j.numericCompaction(e,t+1,I),n.setFileSize(mo.parseLong(I.toString()));break;default:throw L.getFormatInstance()}break;case j.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(a!==-1){let u=t-a;n.isLastSegment()&&u--,n.setOptionalData(H.copyOfRange(e,a,a+u))}return t}static textCompaction(e,t,n){let r=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),a=0,u=!1;for(;t<e[0]&&!u;){let f=e[t++];if(f<j.TEXT_COMPACTION_MODE_LATCH)r[a]=f/30,r[a+1]=f%30,a+=2;else switch(f){case j.TEXT_COMPACTION_MODE_LATCH:r[a++]=j.TEXT_COMPACTION_MODE_LATCH;break;case j.BYTE_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH_6:case j.NUMERIC_COMPACTION_MODE_LATCH:case j.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case j.MACRO_PDF417_TERMINATOR:t--,u=!0;break;case j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[a]=j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,f=e[t++],o[a]=f,a++;break}}return j.decodeTextCompaction(r,o,a,n),t}static decodeTextCompaction(e,t,n,r){let o=Ye.ALPHA,a=Ye.ALPHA,u=0;for(;u<n;){let f=e[u],g="";switch(o){case Ye.ALPHA:if(f<26)g=String.fromCharCode(65+f);else switch(f){case 26:g=" ";break;case j.LL:o=Ye.LOWER;break;case j.ML:o=Ye.MIXED;break;case j.PS:a=o,o=Ye.PUNCT_SHIFT;break;case j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[u]);break;case j.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.LOWER:if(f<26)g=String.fromCharCode(97+f);else switch(f){case 26:g=" ";break;case j.AS:a=o,o=Ye.ALPHA_SHIFT;break;case j.ML:o=Ye.MIXED;break;case j.PS:a=o,o=Ye.PUNCT_SHIFT;break;case j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[u]);break;case j.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.MIXED:if(f<j.PL)g=j.MIXED_CHARS[f];else switch(f){case j.PL:o=Ye.PUNCT;break;case 26:g=" ";break;case j.LL:o=Ye.LOWER;break;case j.AL:o=Ye.ALPHA;break;case j.PS:a=o,o=Ye.PUNCT_SHIFT;break;case j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[u]);break;case j.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.PUNCT:if(f<j.PAL)g=j.PUNCT_CHARS[f];else switch(f){case j.PAL:o=Ye.ALPHA;break;case j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[u]);break;case j.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.ALPHA_SHIFT:if(o=a,f<26)g=String.fromCharCode(65+f);else switch(f){case 26:g=" ";break;case j.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.PUNCT_SHIFT:if(o=a,f<j.PAL)g=j.PUNCT_CHARS[f];else switch(f){case j.PAL:o=Ye.ALPHA;break;case j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[u]);break;case j.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break}g!==""&&r.append(g),u++}}static byteCompaction(e,t,n,r,o){let a=new Lc,u=0,f=0,g=!1;switch(e){case j.BYTE_COMPACTION_MODE_LATCH:let m=new Int32Array(6),E=t[r++];for(;r<t[0]&&!g;)switch(m[u++]=E,f=900*f+E,E=t[r++],E){case j.TEXT_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH:case j.NUMERIC_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH_6:case j.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case j.MACRO_PDF417_TERMINATOR:r--,g=!0;break;default:if(u%5===0&&u>0){for(let v=0;v<6;++v)a.write(Number(vn(f)>>vn(8*(5-v))));f=0,u=0}break}r===t[0]&&E<j.TEXT_COMPACTION_MODE_LATCH&&(m[u++]=E);for(let v=0;v<u;v++)a.write(m[v]);break;case j.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!g;){let v=t[r++];if(v<j.TEXT_COMPACTION_MODE_LATCH)u++,f=900*f+v;else switch(v){case j.TEXT_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH:case j.NUMERIC_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH_6:case j.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case j.MACRO_PDF417_TERMINATOR:r--,g=!0;break}if(u%5===0&&u>0){for(let I=0;I<6;++I)a.write(Number(vn(f)>>vn(8*(5-I))));f=0,u=0}}break}return o.append(Ae.decode(a.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,o=!1,a=new Int32Array(j.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!o;){let u=e[t++];if(t===e[0]&&(o=!0),u<j.TEXT_COMPACTION_MODE_LATCH)a[r]=u,r++;else switch(u){case j.TEXT_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH:case j.BYTE_COMPACTION_MODE_LATCH_6:case j.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case j.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(r%j.MAX_NUMERIC_CODEWORDS===0||u===j.NUMERIC_COMPACTION_MODE_LATCH||o)&&r>0&&(n.append(j.decodeBase900toBase10(a,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=vn(0);for(let o=0;o<t;o++)n+=j.EXP900[t-o-1]*vn(e[o]);let r=n.toString();if(r.charAt(0)!=="1")throw new L;return r.substring(1)}}j.TEXT_COMPACTION_MODE_LATCH=900,j.BYTE_COMPACTION_MODE_LATCH=901,j.NUMERIC_COMPACTION_MODE_LATCH=902,j.BYTE_COMPACTION_MODE_LATCH_6=924,j.ECI_USER_DEFINED=925,j.ECI_GENERAL_PURPOSE=926,j.ECI_CHARSET=927,j.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,j.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,j.MACRO_PDF417_TERMINATOR=922,j.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,j.MAX_NUMERIC_CODEWORDS=15,j.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,j.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,j.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,j.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,j.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,j.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,j.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,j.PL=25,j.LL=27,j.AS=27,j.ML=28,j.AL=28,j.PS=29,j.PAL=29,j.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,j.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",j.EXP900=bo()?kc():[],j.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ne{constructor(){}static decode(e,t,n,r,o,a,u){let f=new Nn(e,t,n,r,o),g=null,m=null,E;for(let N=!0;;N=!1){if(t!=null&&(g=Ne.getRowIndicatorColumn(e,f,t,!0,a,u)),r!=null&&(m=Ne.getRowIndicatorColumn(e,f,r,!1,a,u)),E=Ne.merge(g,m),E==null)throw U.getNotFoundInstance();let D=E.getBoundingBox();if(N&&D!=null&&(D.getMinY()<f.getMinY()||D.getMaxY()>f.getMaxY()))f=D;else break}E.setBoundingBox(f);let v=E.getBarcodeColumnCount()+1;E.setDetectionResultColumn(0,g),E.setDetectionResultColumn(v,m);let I=g!=null;for(let N=1;N<=v;N++){let D=I?N:v-N;if(E.getDetectionResultColumn(D)!==void 0)continue;let F;D===0||D===v?F=new xo(f,D===0):F=new ir(f),E.setDetectionResultColumn(D,F);let W=-1,ee=W;for(let ne=f.getMinY();ne<=f.getMaxY();ne++){if(W=Ne.getStartColumn(E,D,ne,I),W<0||W>f.getMaxX()){if(ee===-1)continue;W=ee}let Z=Ne.detectCodeword(e,f.getMinX(),f.getMaxX(),I,W,ne,a,u);Z!=null&&(F.setCodeword(ne,Z),ee=W,a=Math.min(a,Z.getWidth()),u=Math.max(u,Z.getWidth()))}}return Ne.createDecoderResult(E)}static merge(e,t){if(e==null&&t==null)return null;let n=Ne.getBarcodeMetadata(e,t);if(n==null)return null;let r=Nn.merge(Ne.adjustBoundingBox(e),Ne.adjustBoundingBox(t));return new or(n,r)}static adjustBoundingBox(e){if(e==null)return null;let t=e.getRowHeights();if(t==null)return null;let n=Ne.getMax(t),r=0;for(let u of t)if(r+=n-u,u>0)break;let o=e.getCodewords();for(let u=0;r>0&&o[u]==null;u++)r--;let a=0;for(let u=t.length-1;u>=0&&(a+=n-t[u],!(t[u]>0));u--);for(let u=o.length-1;a>0&&o[u]==null;u--)a--;return e.getBoundingBox().addMissingRows(r,a,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();let r;return t==null||(r=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,o,a){let u=new xo(t,r);for(let f=0;f<2;f++){let g=f===0?1:-1,m=Math.trunc(Math.trunc(n.getX()));for(let E=Math.trunc(Math.trunc(n.getY()));E<=t.getMaxY()&&E>=t.getMinY();E+=g){let v=Ne.detectCodeword(e,0,e.getWidth(),r,m,E,o,a);v!=null&&(u.setCodeword(E,v),r?m=v.getStartX():m=v.getEndX())}}return u}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-Ne.getNumberOfECCodeWords(e.getBarcodeECLevel());if(r.length===0){if(o<1||o>be.MAX_CODEWORDS_IN_BARCODE)throw U.getNotFoundInstance();n.setValue(o)}else r[0]!==o&&n.setValue(o)}static createDecoderResult(e){let t=Ne.createBarcodeMatrix(e);Ne.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],a=new Array;for(let f=0;f<e.getBarcodeRowCount();f++)for(let g=0;g<e.getBarcodeColumnCount();g++){let m=t[f][g+1].getValue(),E=f*e.getBarcodeColumnCount()+g;m.length===0?n.push(E):m.length===1?r[E]=m[0]:(a.push(E),o.push(m))}let u=new Array(o.length);for(let f=0;f<u.length;f++)u[f]=o[f];return Ne.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,be.toIntArray(n),be.toIntArray(a),u)}static createDecoderResultFromAmbiguousValues(e,t,n,r,o){let a=new Int32Array(r.length),u=100;for(;u-- >0;){for(let f=0;f<a.length;f++)t[r[f]]=o[f][a[f]];try{return Ne.decodeCodewords(t,e,n)}catch(f){if(!(f instanceof B))throw f}if(a.length===0)throw B.getChecksumInstance();for(let f=0;f<a.length;f++)if(a[f]<o[f].length-1){a[f]++;break}else if(a[f]=0,f===a.length-1)throw B.getChecksumInstance()}throw B.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let o=0;o<t[r].length;o++)t[r][o]=new sr;let n=0;for(let r of e.getDetectionResultColumns()){if(r!=null){for(let o of r.getCodewords())if(o!=null){let a=o.getRowNumber();if(a>=0){if(a>=t.length)continue;t[a][n].setValue(o.getValue())}}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let o=r?1:-1,a=null;if(Ne.isValidBarcodeColumn(e,t-o)&&(a=e.getDetectionResultColumn(t-o).getCodeword(n)),a!=null)return r?a.getEndX():a.getStartX();if(a=e.getDetectionResultColumn(t).getCodewordNearby(n),a!=null)return r?a.getStartX():a.getEndX();if(Ne.isValidBarcodeColumn(e,t-o)&&(a=e.getDetectionResultColumn(t-o).getCodewordNearby(n)),a!=null)return r?a.getEndX():a.getStartX();let u=0;for(;Ne.isValidBarcodeColumn(e,t-o);){t-=o;for(let f of e.getDetectionResultColumn(t).getCodewords())if(f!=null)return(r?f.getEndX():f.getStartX())+o*u*(f.getEndX()-f.getStartX());u++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,o,a,u,f){o=Ne.adjustCodewordStartColumn(e,t,n,r,o,a);let g=Ne.getModuleBitCount(e,t,n,r,o,a);if(g==null)return null;let m,E=Ie.sum(g);if(r)m=o+E;else{for(let N=0;N<g.length/2;N++){let D=g[N];g[N]=g[g.length-1-N],g[g.length-1-N]=D}m=o,o=m-E}if(!Ne.checkCodewordSkew(E,u,f))return null;let v=Mt.getDecodedValue(g),I=be.getCodeword(v);return I===-1?null:new ar(o,m,Ne.getCodewordBucketNumber(v),I)}static getModuleBitCount(e,t,n,r,o,a){let u=o,f=new Int32Array(8),g=0,m=r?1:-1,E=r;for(;(r?u<n:u>=t)&&g<f.length;)e.get(u,a)===E?(f[g]++,u+=m):(g++,E=!E);return g===f.length||u===(r?n:t)&&g===f.length-1?f:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,o,a){let u=o,f=r?-1:1;for(let g=0;g<2;g++){for(;(r?u>=t:u<n)&&r===e.get(u,a);){if(Math.abs(o-u)>Ne.CODEWORD_SKEW_SIZE)return o;u+=f}f=-f,r=!r}return u}static checkCodewordSkew(e,t,n){return t-Ne.CODEWORD_SKEW_SIZE<=e&&e<=n+Ne.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(e.length===0)throw L.getFormatInstance();let r=1<<t+1,o=Ne.correctErrors(e,n,r);Ne.verifyCodewordCount(e,r);let a=j.decode(e,""+t);return a.setErrorsCorrected(o),a.setErasures(n.length),a}static correctErrors(e,t,n){if(t!=null&&t.length>n/2+Ne.MAX_ERRORS||n<0||n>Ne.MAX_EC_CODEWORDS)throw B.getChecksumInstance();return Ne.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw L.getFormatInstance();let n=e[0];if(n>e.length)throw L.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw L.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((e&1)!==n&&(n=e&1,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return Ne.getCodewordBucketNumber(Ne.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new rr;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let o=e[n][r];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()}}Ne.CODEWORD_SKEW_SIZE=2,Ne.MAX_ERRORS=3,Ne.MAX_EC_CODEWORDS=512,Ne.errorCorrection=new go;class Ct{decode(e,t=null){let n=Ct.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw U.getNotFoundInstance();return n[0]}decodeMultiple(e,t=null){try{return Ct.decode(e,t,!0)}catch(n){throw n instanceof L||n instanceof B?U.getNotFoundInstance():n}}static decode(e,t,n){const r=new Array,o=_e.detectMultiple(e,t,n);for(const a of o.getPoints()){const u=Ne.decode(o.getBits(),a[4],a[5],a[6],a[7],Ct.getMinCodewordWidth(a),Ct.getMaxCodewordWidth(a)),f=new Ue(u.getText(),u.getRawBytes(),void 0,a,oe.PDF_417);f.putMetadata(He.ERROR_CORRECTION_LEVEL,u.getECLevel());const g=u.getOther();g!=null&&f.putMetadata(He.PDF417_EXTRA_METADATA,g),r.push(f)}return r.map(a=>a)}static getMaxWidth(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return e==null||t==null?G.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(Ct.getMaxWidth(e[0],e[4]),Ct.getMaxWidth(e[6],e[2])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN),Math.max(Ct.getMaxWidth(e[1],e[5]),Ct.getMaxWidth(e[7],e[3])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(Ct.getMinWidth(e[0],e[4]),Ct.getMinWidth(e[6],e[2])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN),Math.min(Ct.getMinWidth(e[1],e[5]),Ct.getMinWidth(e[7],e[3])*be.MODULES_IN_CODEWORD/be.MODULES_IN_STOP_PATTERN)))}reset(){}}class Lr extends p{}Lr.kind="ReaderException";class Co{constructor(e,t){this.verbose=e===!0,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const t=!d(e)&&e.get($.TRY_HARDER)===!0,n=d(e)?null:e.get($.POSSIBLE_FORMATS),r=new Array;if(!d(n)){const o=n.some(a=>a===oe.UPC_A||a===oe.UPC_E||a===oe.EAN_13||a===oe.EAN_8||a===oe.CODABAR||a===oe.CODE_39||a===oe.CODE_93||a===oe.CODE_128||a===oe.ITF||a===oe.RSS_14||a===oe.RSS_EXPANDED);o&&!t&&r.push(new Hn(e,this.verbose)),n.includes(oe.QR_CODE)&&r.push(new yn),n.includes(oe.DATA_MATRIX)&&r.push(new An),n.includes(oe.AZTEC)&&r.push(new Nr),n.includes(oe.PDF_417)&&r.push(new Ct),o&&t&&r.push(new Hn(e,this.verbose))}r.length===0&&(t||r.push(new Hn(e,this.verbose)),r.push(new yn),r.push(new An),r.push(new Nr),r.push(new Ct),t&&r.push(new Hn(e,this.verbose))),this.readers=r}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Lr("No readers where selected, nothing can be read.");for(const t of this.readers)try{return t.decode(e,this.hints)}catch(n){if(n instanceof Lr)continue}throw new U("No MultiFormat Readers were able to detect the code.")}}class Fc extends Qe{constructor(e=null,t=500){const n=new Co;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class Vc extends Qe{constructor(e=500){super(new Ct,e)}}class Uc extends Qe{constructor(e=500){super(new yn,e)}}var qi;(function(C){C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION"})(qi||(qi={}));var xt=qi;class Zi{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Q(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let o=t.length;o<=e;o++){const a=n.multiply(new Q(r,Int32Array.from([1,r.exp(o-1+r.getGeneratorBase())])));t.push(a),n=a}}return t[e]}encode(e,t){if(t===0)throw new y("No error correction bytes");const n=e.length-t;if(n<=0)throw new y("No data bytes provided");const r=this.buildGenerator(t),o=new Int32Array(n);T.arraycopy(e,0,o,0,n);let a=new Q(this.field,o);a=a.multiplyByMonomial(t,1);const f=a.divide(r)[1].getCoefficients(),g=t-f.length;for(let m=0;m<g;m++)e[n+m]=0;T.arraycopy(f,0,e,n+g,f.length)}}class at{constructor(){}static applyMaskPenaltyRule1(e){return at.applyMaskPenaltyRule1Internal(e,!0)+at.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),o=e.getHeight();for(let a=0;a<o-1;a++){const u=n[a];for(let f=0;f<r-1;f++){const g=u[f];g===u[f+1]&&g===n[a+1][f]&&g===n[a+1][f+1]&&t++}}return at.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),o=e.getHeight();for(let a=0;a<o;a++)for(let u=0;u<r;u++){const f=n[a];u+6<r&&f[u]===1&&f[u+1]===0&&f[u+2]===1&&f[u+3]===1&&f[u+4]===1&&f[u+5]===0&&f[u+6]===1&&(at.isWhiteHorizontal(f,u-4,u)||at.isWhiteHorizontal(f,u+7,u+11))&&t++,a+6<o&&n[a][u]===1&&n[a+1][u]===0&&n[a+2][u]===1&&n[a+3][u]===1&&n[a+4][u]===1&&n[a+5][u]===0&&n[a+6][u]===1&&(at.isWhiteVertical(n,u,a-4,a)||at.isWhiteVertical(n,u,a+7,a+11))&&t++}return t*at.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(e[r]===1)return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let o=n;o<r;o++)if(e[o][t]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),o=e.getHeight();for(let f=0;f<o;f++){const g=n[f];for(let m=0;m<r;m++)g[m]===1&&t++}const a=e.getHeight()*e.getWidth();return Math.floor(Math.abs(t*2-a)*10/a)*at.N4}static getDataMaskBit(e,t,n){let r,o;switch(e){case 0:r=n+t&1;break;case 1:r=n&1;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:o=n*t,r=(o&1)+o%3;break;case 6:o=n*t,r=(o&1)+o%3&1;break;case 7:o=n*t,r=o%3+(n+t&1)&1;break;default:throw new y("Invalid mask pattern: "+e)}return r===0}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),a=e.getArray();for(let u=0;u<r;u++){let f=0,g=-1;for(let m=0;m<o;m++){const E=t?a[u][m]:a[m][u];E===g?f++:(f>=5&&(n+=at.N1+(f-5)),f=1,g=E)}f>=5&&(n+=at.N1+(f-5))}return n}}at.N1=3,at.N2=3,at.N3=40,at.N4=10;class kr{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)H.fill(t,e)}equals(e){if(!(e instanceof kr))return!1;const t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const o=this.bytes[n],a=t.bytes[n];for(let u=0,f=this.width;u<f;++u)if(o[u]!==a[u])return!1}return!0}toString(){const e=new Ee;for(let t=0,n=this.height;t<n;++t){const r=this.bytes[t];for(let o=0,a=this.width;o<a;++o)switch(r[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Rn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Ee;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Rn.NUM_MASK_PATTERNS}}Rn.NUM_MASK_PATTERNS=8;class Ze extends p{}Ze.kind="WriterException";class me{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,o){me.clearMatrix(o),me.embedBasicPatterns(n,o),me.embedTypeInfo(t,r,o),me.maybeEmbedVersionInfo(n,o),me.embedDataBits(e,r,o)}static embedBasicPatterns(e,t){me.embedPositionDetectionPatternsAndSeparators(t),me.embedDarkDotAtLeftBottomCorner(t),me.maybeEmbedPositionAdjustmentPatterns(e,t),me.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new Y;me.makeTypeInfoBits(e,t,r);for(let o=0,a=r.getSize();o<a;++o){const u=r.get(r.getSize()-1-o),f=me.TYPE_INFO_COORDINATES[o],g=f[0],m=f[1];if(n.setBoolean(g,m,u),o<8){const E=n.getWidth()-o-1;n.setBoolean(E,8,u)}else{const v=n.getHeight()-7+(o-8);n.setBoolean(8,v,u)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new Y;me.makeVersionInfoBits(e,n);let r=6*3-1;for(let o=0;o<6;++o)for(let a=0;a<3;++a){const u=n.get(r);r--,t.setBoolean(o,t.getHeight()-11+a,u),t.setBoolean(t.getHeight()-11+a,o,u)}}static embedDataBits(e,t,n){let r=0,o=-1,a=n.getWidth()-1,u=n.getHeight()-1;for(;a>0;){for(a===6&&(a-=1);u>=0&&u<n.getHeight();){for(let f=0;f<2;++f){const g=a-f;if(!me.isEmpty(n.get(g,u)))continue;let m;r<e.getSize()?(m=e.get(r),++r):m=!1,t!==255&&at.getDataMaskBit(t,g,u)&&(m=!m),n.setBoolean(g,u,m)}u+=o}o=-o,u+=o,a-=2}if(r!==e.getSize())throw new Ze("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-G.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(t===0)throw new y("0 polynomial");const n=me.findMSBSet(t);for(e<<=n-1;me.findMSBSet(e)>=n;)e^=t<<me.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!Rn.isValidMaskPattern(t))throw new Ze("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const o=me.calculateBCHCode(r,me.TYPE_INFO_POLY);n.appendBits(o,10);const a=new Y;if(a.appendBits(me.TYPE_INFO_MASK_PATTERN,15),n.xor(a),n.getSize()!==15)throw new Ze("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=me.calculateBCHCode(e.getVersionNumber(),me.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new Ze("should not happen but we got: "+t.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;me.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),me.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Ze;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!me.isEmpty(n.get(e+r,t)))throw new Ze;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!me.isEmpty(n.get(e,t+r)))throw new Ze;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const o=me.POSITION_ADJUSTMENT_PATTERN[r];for(let a=0;a<5;++a)n.setNumber(e+a,t+r,o[a])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const o=me.POSITION_DETECTION_PATTERN[r];for(let a=0;a<7;++a)n.setNumber(e+a,t+r,o[a])}}static embedPositionDetectionPatternsAndSeparators(e){const t=me.POSITION_DETECTION_PATTERN[0].length;me.embedPositionDetectionPattern(0,0,e),me.embedPositionDetectionPattern(e.getWidth()-t,0,e),me.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;me.embedHorizontalSeparationPattern(0,n-1,e),me.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),me.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;me.embedVerticalSeparationPattern(r,0,e),me.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),me.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=me.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let o=0,a=r.length;o!==a;o++){const u=r[o];if(u>=0)for(let f=0;f!==a;f++){const g=r[f];g>=0&&me.isEmpty(t.get(g,u))&&me.embedPositionAdjustmentPattern(g-2,u-2,t)}}}}me.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),me.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),me.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),me.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),me.VERSION_INFO_POLY=7973,me.TYPE_INFO_POLY=1335,me.TYPE_INFO_MASK_PATTERN=21522;class Hc{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Je{constructor(){}static calculateMaskPenalty(e){return at.applyMaskPenaltyRule1(e)+at.applyMaskPenaltyRule2(e)+at.applyMaskPenaltyRule3(e)+at.applyMaskPenaltyRule4(e)}static encode(e,t,n=null){let r=Je.DEFAULT_BYTE_MODE_ENCODING;const o=n!==null&&n.get(xt.CHARACTER_SET)!==void 0;o&&(r=n.get(xt.CHARACTER_SET).toString());const a=this.chooseMode(e,r),u=new Y;if(a===ge.BYTE&&(o||Je.DEFAULT_BYTE_MODE_ENCODING!==r)){const ne=z.getCharacterSetECIByName(r);ne!==void 0&&this.appendECI(ne,u)}this.appendModeInfo(a,u);const f=new Y;this.appendBytes(e,a,f,r);let g;if(n!==null&&n.get(xt.QR_VERSION)!==void 0){const ne=Number.parseInt(n.get(xt.QR_VERSION).toString(),10);g=fe.getVersionForNumber(ne);const Z=this.calculateBitsNeeded(a,u,f,g);if(!this.willFit(Z,g,t))throw new Ze("Data too big for requested version")}else g=this.recommendVersion(t,a,u,f);const m=new Y;m.appendBitArray(u);const E=a===ge.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(E,g,a,m),m.appendBitArray(f);const v=g.getECBlocksForLevel(t),I=g.getTotalCodewords()-v.getTotalECCodewords();this.terminateBits(I,m);const N=this.interleaveWithECBytes(m,g.getTotalCodewords(),I,v.getNumBlocks()),D=new Rn;D.setECLevel(t),D.setMode(a),D.setVersion(g);const F=g.getDimensionForVersion(),W=new kr(F,F),ee=this.chooseMaskPattern(N,t,g,W);return D.setMaskPattern(ee),me.buildMatrix(N,t,g,ee,W),D.setMatrix(W),D}static recommendVersion(e,t,n,r){const o=this.calculateBitsNeeded(t,n,r,fe.getVersionForNumber(1)),a=this.chooseVersion(o,e),u=this.calculateBitsNeeded(t,n,r,a);return this.chooseVersion(u,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<Je.ALPHANUMERIC_TABLE.length?Je.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(z.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return ge.KANJI;let n=!1,r=!1;for(let o=0,a=e.length;o<a;++o){const u=e.charAt(o);if(Je.isDigit(u))n=!0;else if(this.getAlphanumericCode(u.charCodeAt(0))!==-1)r=!0;else return ge.BYTE}return r?ge.ALPHANUMERIC:n?ge.NUMERIC:ge.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=Ae.encode(e,z.SJIS)}catch{return!1}const n=t.length;if(n%2!==0)return!1;for(let r=0;r<n;r+=2){const o=t[r]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let o=Number.MAX_SAFE_INTEGER,a=-1;for(let u=0;u<Rn.NUM_MASK_PATTERNS;u++){me.buildMatrix(e,t,n,u,r);let f=this.calculateMaskPenalty(r);f<o&&(o=f,a=u)}return a}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=fe.getVersionForNumber(n);if(Je.willFit(e,r,t))return r}throw new Ze("Data too big")}static willFit(e,t,n){const r=t.getTotalCodewords(),a=t.getECBlocksForLevel(n).getTotalECCodewords(),u=r-a,f=(e+7)/8;return u>=f}static terminateBits(e,t){const n=e*8;if(t.getSize()>n)throw new Ze("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let a=0;a<4&&t.getSize()<n;++a)t.appendBit(!1);const r=t.getSize()&7;if(r>0)for(let a=r;a<8;a++)t.appendBit(!1);const o=e-t.getSizeInBytes();for(let a=0;a<o;++a)t.appendBits(a&1?17:236,8);if(t.getSize()!==n)throw new Ze("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,o,a){if(r>=n)throw new Ze("Block ID too large");const u=e%n,f=n-u,g=Math.floor(e/n),m=g+1,E=Math.floor(t/n),v=E+1,I=g-E,N=m-v;if(I!==N)throw new Ze("EC bytes mismatch");if(n!==f+u)throw new Ze("RS blocks mismatch");if(e!==(E+I)*f+(v+N)*u)throw new Ze("Total bytes mismatch");r<f?(o[0]=E,a[0]=I):(o[0]=v,a[0]=N)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new Ze("Number of bits and data bytes does not match");let o=0,a=0,u=0;const f=new Array;for(let m=0;m<r;++m){const E=new Int32Array(1),v=new Int32Array(1);Je.getNumDataBytesAndNumECBytesForBlockID(t,n,r,m,E,v);const I=E[0],N=new Uint8Array(I);e.toBytes(8*o,N,0,I);const D=Je.generateECBytes(N,v[0]);f.push(new Hc(N,D)),a=Math.max(a,I),u=Math.max(u,D.length),o+=E[0]}if(n!==o)throw new Ze("Data bytes does not match offset");const g=new Y;for(let m=0;m<a;++m)for(const E of f){const v=E.getDataBytes();m<v.length&&g.appendBits(v[m],8)}for(let m=0;m<u;++m)for(const E of f){const v=E.getErrorCorrectionBytes();m<v.length&&g.appendBits(v[m],8)}if(t!==g.getSizeInBytes())throw new Ze("Interleaving error: "+t+" and "+g.getSizeInBytes()+" differ.");return g}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let a=0;a<n;a++)r[a]=e[a]&255;new Zi(se.QR_CODE_FIELD_256).encode(r,t);const o=new Uint8Array(t);for(let a=0;a<t;a++)o[a]=r[n+a];return o}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const o=n.getCharacterCountBits(t);if(e>=1<<o)throw new Ze(e+" is bigger than "+((1<<o)-1));r.appendBits(e,o)}static appendBytes(e,t,n,r){switch(t){case ge.NUMERIC:Je.appendNumericBytes(e,n);break;case ge.ALPHANUMERIC:Je.appendAlphanumericBytes(e,n);break;case ge.BYTE:Je.append8BitBytes(e,n,r);break;case ge.KANJI:Je.appendKanjiBytes(e,n);break;default:throw new Ze("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=Je.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const o=Je.getDigit(e.charAt(r));if(r+2<n){const a=Je.getDigit(e.charAt(r+1)),u=Je.getDigit(e.charAt(r+2));t.appendBits(o*100+a*10+u,10),r+=3}else if(r+1<n){const a=Je.getDigit(e.charAt(r+1));t.appendBits(o*10+a,7),r+=2}else t.appendBits(o,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const o=Je.getAlphanumericCode(e.charCodeAt(r));if(o===-1)throw new Ze;if(r+1<n){const a=Je.getAlphanumericCode(e.charCodeAt(r+1));if(a===-1)throw new Ze;t.appendBits(o*45+a,11),r+=2}else t.appendBits(o,6),r++}}static append8BitBytes(e,t,n){let r;try{r=Ae.encode(e,n)}catch(o){throw new Ze(o)}for(let o=0,a=r.length;o!==a;o++){const u=r[o];t.appendBits(u,8)}}static appendKanjiBytes(e,t){let n;try{n=Ae.encode(e,z.SJIS)}catch(o){throw new Ze(o)}const r=n.length;for(let o=0;o<r;o+=2){const a=n[o]&255,u=n[o+1]&255,f=a<<8&4294967295|u;let g=-1;if(f>=33088&&f<=40956?g=f-33088:f>=57408&&f<=60351&&(g=f-49472),g===-1)throw new Ze("Invalid byte sequence");const m=(g>>8)*192+(g&255);t.appendBits(m,13)}}static appendECI(e,t){t.appendBits(ge.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Je.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Je.DEFAULT_BYTE_MODE_ENCODING=z.UTF8.getName();class Mn{write(e,t,n,r=null){if(e.length===0)throw new y("Found empty contents");if(t<0||n<0)throw new y("Requested dimensions are too small: "+t+"x"+n);let o=$e.L,a=Mn.QUIET_ZONE_SIZE;r!==null&&(r.get(xt.ERROR_CORRECTION)!==void 0&&(o=$e.fromString(r.get(xt.ERROR_CORRECTION).toString())),r.get(xt.MARGIN)!==void 0&&(a=Number.parseInt(r.get(xt.MARGIN).toString(),10)));const u=Je.encode(e,o,r);return this.renderResult(u,t,n,a)}writeToDom(e,t,n,r,o=null){typeof e=="string"&&(e=document.querySelector(e));const a=this.write(t,n,r,o);e&&e.appendChild(a)}renderResult(e,t,n,r){const o=e.getMatrix();if(o===null)throw new ze;const a=o.getWidth(),u=o.getHeight(),f=a+r*2,g=u+r*2,m=Math.max(t,f),E=Math.max(n,g),v=Math.min(Math.floor(m/f),Math.floor(E/g)),I=Math.floor((m-a*v)/2),N=Math.floor((E-u*v)/2),D=this.createSVGElement(m,E);for(let F=0,W=N;F<u;F++,W+=v)for(let ee=0,ne=I;ee<a;ee++,ne+=v)if(o.get(ee,F)===1){const Z=this.createSvgRectElement(ne,W,v,v);D.appendChild(Z)}return D}createSVGElement(e,t){const n=document.createElementNS(Mn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const o=document.createElementNS(Mn.SVG_NS,"rect");return o.setAttributeNS(null,"x",e.toString()),o.setAttributeNS(null,"y",t.toString()),o.setAttributeNS(null,"height",n.toString()),o.setAttributeNS(null,"width",r.toString()),o.setAttributeNS(null,"fill","#000000"),o}}Mn.QUIET_ZONE_SIZE=4,Mn.SVG_NS="http://www.w3.org/2000/svg";class Wn{encode(e,t,n,r,o){if(e.length===0)throw new y("Found empty contents");if(t!==oe.QR_CODE)throw new y("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new y(`Requested dimensions are too small: ${n}x${r}`);let a=$e.L,u=Wn.QUIET_ZONE_SIZE;o!==null&&(o.get(xt.ERROR_CORRECTION)!==void 0&&(a=$e.fromString(o.get(xt.ERROR_CORRECTION).toString())),o.get(xt.MARGIN)!==void 0&&(u=Number.parseInt(o.get(xt.MARGIN).toString(),10)));const f=Je.encode(e,a,o);return Wn.renderResult(f,n,r,u)}static renderResult(e,t,n,r){const o=e.getMatrix();if(o===null)throw new ze;const a=o.getWidth(),u=o.getHeight(),f=a+r*2,g=u+r*2,m=Math.max(t,f),E=Math.max(n,g),v=Math.min(Math.floor(m/f),Math.floor(E/g)),I=Math.floor((m-a*v)/2),N=Math.floor((E-u*v)/2),D=new Te(m,E);for(let F=0,W=N;F<u;F++,W+=v)for(let ee=0,ne=I;ee<a;ee++,ne+=v)o.get(ee,F)===1&&D.setRegion(ne,W,v,v);return D}}Wn.QUIET_ZONE_SIZE=4;class jc{encode(e,t,n,r,o){let a;switch(t){case oe.QR_CODE:a=new Wn;break;default:throw new y("No encoder available for format "+t)}return a.encode(e,t,n,r,o)}}class sn extends Xe{constructor(e,t,n,r,o,a,u,f){if(super(a,u),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=o,r+a>t||o+u>n)throw new y("Crop rectangle does not fit within image data.");f&&this.reverseHorizontal(a,u)}getRow(e,t){if(e<0||e>=this.getHeight())throw new y("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return T.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return T.arraycopy(this.yuvData,o,r,0,n),r;for(let a=0;a<t;a++){const u=a*e;T.arraycopy(this.yuvData,o,r,u,e),o+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new sn(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/sn.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/sn.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let o=this.top*this.dataWidth+this.left;for(let a=0;a<t;a++){const u=a*e;for(let f=0;f<e;f++){const g=r[o+f*sn.THUMBNAIL_SCALE_FACTOR]&255;n[u+f]=4278190080|g*65793}o+=this.dataWidth*sn.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/sn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/sn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,o=this.top*this.dataWidth+this.left;r<t;r++,o+=this.dataWidth){const a=o+e/2;for(let u=o,f=o+e-1;u<a;u++,f--){const g=n[u];n[u]=n[f],n[f]=g}}}invert(){return new rt(this)}}sn.THUMBNAIL_SCALE_FACTOR=2;class Ki extends Xe{constructor(e,t,n,r,o,a,u){if(super(t,n),this.dataWidth=r,this.dataHeight=o,this.left=a,this.top=u,e.BYTES_PER_ELEMENT===4){const f=t*n,g=new Uint8ClampedArray(f);for(let m=0;m<f;m++){const E=e[m],v=E>>16&255,I=E>>7&510,N=E&255;g[m]=(v+I+N)/4&255}this.luminances=g}else this.luminances=e;if(r===void 0&&(this.dataWidth=t),o===void 0&&(this.dataHeight=n),a===void 0&&(this.left=0),u===void 0&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new y("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new y("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return T.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return T.arraycopy(this.luminances,o,r,0,n),r;for(let a=0;a<t;a++){const u=a*e;T.arraycopy(this.luminances,o,r,u,e),o+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Ki(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new rt(this)}}class Eo extends z{static forName(e){return this.getCharacterSetECIByName(e)}}class $i{}$i.ISO_8859_1=z.ISO8859_1;class Ao{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class yo{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Wc{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Gn extends Wc{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Gn(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Gn(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+G.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Qi extends Gn{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(n===0||n===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):n===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Qi(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Gc(C,e,t){return new Qi(C,e,t)}function lr(C,e,t){return new Gn(C,e,t)}const Xc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Sn=0,Fr=1,Zt=2,vo=3,on=4,zc=new Gn(null,0,0),Ji=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Yc(C){for(let e of C)H.fill(e,-1);return C[Sn][on]=0,C[Fr][on]=0,C[Fr][Sn]=28,C[vo][on]=0,C[Zt][on]=0,C[Zt][Sn]=15,C}const So=Yc(H.createInt32Array(6,6));class an{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let a=Ji[this.mode][e];r=lr(r,a&65535,a>>16),n+=a>>16}let o=e===Zt?4:5;return r=lr(r,t,o),new an(r,e,0,n+o)}shiftAndAppend(e,t){let n=this.token,r=this.mode===Zt?4:5;return n=lr(n,So[this.mode][e],r),n=lr(n,t,5),new an(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===on||this.mode===Zt){let u=Ji[n][Sn];t=lr(t,u&65535,u>>16),r+=u>>16,n=Sn}let o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new an(t,n,this.binaryShiftByteCount+1,r+o);return a.binaryShiftByteCount===2078&&(a=a.endBinaryShift(e+1)),a}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let t=this.token;return t=Gc(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new an(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Ji[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=an.calculateBinaryShiftCost(e)-an.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;r!==null;r=r.getPrevious())t.unshift(r);let n=new Y;for(const r of t)r.appendTo(n,e);return n}toString(){return ae.format("%s bits=%d bytes=%d",Xc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}an.INITIAL_STATE=new an(zc,Sn,0,0);function qc(C){const e=ae.getCharCode(" "),t=ae.getCharCode("."),n=ae.getCharCode(",");C[Sn][e]=1;const r=ae.getCharCode("Z"),o=ae.getCharCode("A");for(let v=o;v<=r;v++)C[Sn][v]=v-o+2;C[Fr][e]=1;const a=ae.getCharCode("z"),u=ae.getCharCode("a");for(let v=u;v<=a;v++)C[Fr][v]=v-u+2;C[Zt][e]=1;const f=ae.getCharCode("9"),g=ae.getCharCode("0");for(let v=g;v<=f;v++)C[Zt][v]=v-g+2;C[Zt][n]=12,C[Zt][t]=13;const m=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let v=0;v<m.length;v++)C[vo][ae.getCharCode(m[v])]=v;const E=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let v=0;v<E.length;v++)ae.getCharCode(E[v])>0&&(C[on][ae.getCharCode(E[v])]=v);return C}const es=qc(H.createInt32Array(5,256));class cr{constructor(e){this.text=e}encode(){const e=ae.getCharCode(" "),t=ae.getCharCode(`
`);let n=yo.singletonList(an.INITIAL_STATE);for(let o=0;o<this.text.length;o++){let a,u=o+1<this.text.length?this.text[o+1]:0;switch(this.text[o]){case ae.getCharCode("\r"):a=u===t?2:0;break;case ae.getCharCode("."):a=u===e?3:0;break;case ae.getCharCode(","):a=u===e?4:0;break;case ae.getCharCode(":"):a=u===e?5:0;break;default:a=0}a>0?(n=cr.updateStateListForPair(n,o,a),o++):n=this.updateStateListForChar(n,o)}return yo.min(n,(o,a)=>o.getBitCount()-a.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return cr.simplifyStates(n)}updateStateForChar(e,t,n){let r=this.text[t]&255,o=es[e.getMode()][r]>0,a=null;for(let u=0;u<=on;u++){let f=es[u][r];if(f>0){if(a==null&&(a=e.endBinaryShift(t)),!o||u===e.getMode()||u===Zt){const g=a.latchAndAppend(u,f);n.push(g)}if(!o&&So[e.getMode()][u]>=0){const g=a.shiftAndAppend(u,f);n.push(g)}}}if(e.getBinaryShiftByteCount()>0||es[e.getMode()][r]===0){let u=e.addBinaryShiftChar(t);n.push(u)}}static updateStateListForPair(e,t,n){const r=[];for(let o of e)this.updateStateForPair(o,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let o=e.endBinaryShift(t);if(r.push(o.latchAndAppend(on,n)),e.getMode()!==on&&r.push(o.shiftAndAppend(on,n)),n===3||n===4){let a=o.latchAndAppend(Zt,16-n).latchAndAppend(Zt,1);r.push(a)}if(e.getBinaryShiftByteCount()>0){let a=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(a)}}static simplifyStates(e){let t=[];for(const n of e){let r=!0;for(const o of t){if(o.isBetterThanOrEqualTo(n)){r=!1;break}n.isBetterThanOrEqualTo(o)&&(t=t.filter(a=>a!==o))}r&&t.push(n)}return t}}class Pe{constructor(){}static encodeBytes(e){return Pe.encode(e,Pe.DEFAULT_EC_PERCENT,Pe.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r=new cr(e).encode(),o=G.truncDivision(r.getSize()*t,100)+11,a=r.getSize()+o,u,f,g,m,E;if(n!==Pe.DEFAULT_AZTEC_LAYERS){if(u=n<0,f=Math.abs(n),f>(u?Pe.MAX_NB_BITS_COMPACT:Pe.MAX_NB_BITS))throw new y(ae.format("Illegal value %s for layers",n));g=Pe.totalBitsInLayer(f,u),m=Pe.WORD_SIZE[f];let Z=g-g%m;if(E=Pe.stuffBits(r,m),E.getSize()+o>Z)throw new y("Data to large for user specified layer");if(u&&E.getSize()>m*64)throw new y("Data to large for user specified layer")}else{m=0,E=null;for(let Z=0;;Z++){if(Z>Pe.MAX_NB_BITS)throw new y("Data too large for an Aztec code");if(u=Z<=3,f=u?Z+1:Z,g=Pe.totalBitsInLayer(f,u),a>g)continue;(E==null||m!==Pe.WORD_SIZE[f])&&(m=Pe.WORD_SIZE[f],E=Pe.stuffBits(r,m));let Re=g-g%m;if(!(u&&E.getSize()>m*64)&&E.getSize()+o<=Re)break}}let v=Pe.generateCheckWords(E,g,m),I=E.getSize()/m,N=Pe.generateModeMessage(u,f,I),D=(u?11:14)+f*4,F=new Int32Array(D),W;if(u){W=D;for(let Z=0;Z<F.length;Z++)F[Z]=Z}else{W=D+1+2*G.truncDivision(G.truncDivision(D,2)-1,15);let Z=G.truncDivision(D,2),Re=G.truncDivision(W,2);for(let ye=0;ye<Z;ye++){let Dt=ye+G.truncDivision(ye,15);F[Z-ye-1]=Re-Dt-1,F[Z+ye]=Re+Dt+1}}let ee=new Te(W);for(let Z=0,Re=0;Z<f;Z++){let ye=(f-Z)*4+(u?9:12);for(let Dt=0;Dt<ye;Dt++){let Jt=Dt*2;for(let Pt=0;Pt<2;Pt++)v.get(Re+Jt+Pt)&&ee.set(F[Z*2+Pt],F[Z*2+Dt]),v.get(Re+ye*2+Jt+Pt)&&ee.set(F[Z*2+Dt],F[D-1-Z*2-Pt]),v.get(Re+ye*4+Jt+Pt)&&ee.set(F[D-1-Z*2-Pt],F[D-1-Z*2-Dt]),v.get(Re+ye*6+Jt+Pt)&&ee.set(F[D-1-Z*2-Dt],F[Z*2+Pt])}Re+=ye*8}if(Pe.drawModeMessage(ee,u,W,N),u)Pe.drawBullsEye(ee,G.truncDivision(W,2),5);else{Pe.drawBullsEye(ee,G.truncDivision(W,2),7);for(let Z=0,Re=0;Z<G.truncDivision(D,2)-1;Z+=15,Re+=16)for(let ye=G.truncDivision(W,2)&1;ye<W;ye+=2)ee.set(G.truncDivision(W,2)-Re,ye),ee.set(G.truncDivision(W,2)+Re,ye),ee.set(ye,G.truncDivision(W,2)-Re),ee.set(ye,G.truncDivision(W,2)+Re)}let ne=new Ao;return ne.setCompact(u),ne.setSize(W),ne.setLayers(f),ne.setCodeWords(I),ne.setMatrix(ee),ne}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let o=t-r;o<=t+r;o++)e.set(o,t-r),e.set(o,t+r),e.set(t-r,o),e.set(t+r,o);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new Y;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=Pe.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=Pe.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let o=G.truncDivision(n,2);if(t)for(let a=0;a<7;a++){let u=o-3+a;r.get(a)&&e.set(u,o-5),r.get(a+7)&&e.set(o+5,u),r.get(20-a)&&e.set(u,o+5),r.get(27-a)&&e.set(o-5,u)}else for(let a=0;a<10;a++){let u=o-5+a+G.truncDivision(a,5);r.get(a)&&e.set(u,o-7),r.get(a+10)&&e.set(o+7,u),r.get(29-a)&&e.set(u,o+7),r.get(39-a)&&e.set(o-7,u)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,o=new Zi(Pe.getGF(n)),a=G.truncDivision(t,n),u=Pe.bitsToWords(e,n,a);o.encode(u,a-r);let f=t%n,g=new Y;g.appendBits(0,f);for(const m of Array.from(u))g.appendBits(m,n);return g}static bitsToWords(e,t,n){let r=new Int32Array(n),o,a;for(o=0,a=e.getSize()/t;o<a;o++){let u=0;for(let f=0;f<t;f++)u|=e.get(o*t+f)?1<<t-f-1:0;r[o]=u}return r}static getGF(e){switch(e){case 4:return se.AZTEC_PARAM;case 6:return se.AZTEC_DATA_6;case 8:return se.AZTEC_DATA_8;case 10:return se.AZTEC_DATA_10;case 12:return se.AZTEC_DATA_12;default:throw new y("Unsupported word size "+e)}}static stuffBits(e,t){let n=new Y,r=e.getSize(),o=(1<<t)-2;for(let a=0;a<r;a+=t){let u=0;for(let f=0;f<t;f++)(a+f>=r||e.get(a+f))&&(u|=1<<t-1-f);(u&o)===o?(n.appendBits(u&o,t),a--):u&o?n.appendBits(u,t):(n.appendBits(u|1,t),a--)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}Pe.DEFAULT_EC_PERCENT=33,Pe.DEFAULT_AZTEC_LAYERS=0,Pe.MAX_NB_BITS=32,Pe.MAX_NB_BITS_COMPACT=4,Pe.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Vr{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,o){let a=$i.ISO_8859_1,u=Pe.DEFAULT_EC_PERCENT,f=Pe.DEFAULT_AZTEC_LAYERS;return o!=null&&(o.has(xt.CHARACTER_SET)&&(a=Eo.forName(o.get(xt.CHARACTER_SET).toString())),o.has(xt.ERROR_CORRECTION)&&(u=G.parseInt(o.get(xt.ERROR_CORRECTION).toString())),o.has(xt.AZTEC_LAYERS)&&(f=G.parseInt(o.get(xt.AZTEC_LAYERS).toString()))),Vr.encodeLayers(e,t,n,r,a,u,f)}static encodeLayers(e,t,n,r,o,a,u){if(t!==oe.AZTEC)throw new y("Can only encode AZTEC, but got "+t);let f=Pe.encode(ae.getBytes(e,o),a,u);return Vr.renderResult(f,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(r==null)throw new ze;let o=r.getWidth(),a=r.getHeight(),u=Math.max(t,o),f=Math.max(n,a),g=Math.min(u/o,f/a),m=(u-o*g)/2,E=(f-a*g)/2,v=new Te(u,f);for(let I=0,N=E;I<a;I++,N+=g)for(let D=0,F=m;D<o;D++,F+=g)r.get(D,I)&&v.setRegion(F,N,g,g);return v}}l.AbstractExpandedDecoder=Vi,l.ArgumentException=A,l.ArithmeticException=le,l.AztecCode=Ao,l.AztecCodeReader=Nr,l.AztecCodeWriter=Vr,l.AztecDecoder=je,l.AztecDetector=ao,l.AztecDetectorResult=so,l.AztecEncoder=Pe,l.AztecHighLevelEncoder=cr,l.AztecPoint=It,l.BarcodeFormat=oe,l.Binarizer=R,l.BinaryBitmap=P,l.BitArray=Y,l.BitMatrix=Te,l.BitSource=Wi,l.BrowserAztecCodeReader=Cc,l.BrowserBarcodeReader=Sc,l.BrowserCodeReader=Qe,l.BrowserDatamatrixCodeReader=_c,l.BrowserMultiFormatReader=Fc,l.BrowserPDF417Reader=Vc,l.BrowserQRCodeReader=Uc,l.BrowserQRCodeSvgWriter=Mn,l.CharacterSetECI=z,l.ChecksumException=B,l.Code128Reader=ie,l.Code39Reader=ht,l.DataMatrixDecodedBitStreamParser=En,l.DataMatrixReader=An,l.DecodeHintType=$,l.DecoderResult=Wt,l.DefaultGridSampler=oo,l.DetectorResult=Or,l.EAN13Reader=_n,l.EncodeHintType=xt,l.Exception=p,l.FormatException=L,l.GenericGF=se,l.GenericGFPoly=Q,l.GlobalHistogramBinarizer=pe,l.GridSampler=Bi,l.GridSamplerInstance=bn,l.HTMLCanvasElementLuminanceSource=Ce,l.HybridBinarizer=J,l.ITFReader=qe,l.IllegalArgumentException=y,l.IllegalStateException=ze,l.InvertedLuminanceSource=rt,l.LuminanceSource=Xe,l.MathUtils=Ie,l.MultiFormatOneDReader=Hn,l.MultiFormatReader=Co,l.MultiFormatWriter=jc,l.NotFoundException=U,l.OneDReader=dt,l.PDF417DecodedBitStreamParser=j,l.PDF417DecoderErrorCorrection=go,l.PDF417Reader=Ct,l.PDF417ResultMetadata=po,l.PerspectiveTransform=$t,l.PlanarYUVLuminanceSource=sn,l.QRCodeByteMatrix=kr,l.QRCodeDataMask=Yt,l.QRCodeDecodedBitStreamParser=nt,l.QRCodeDecoderErrorCorrectionLevel=$e,l.QRCodeDecoderFormatInformation=vt,l.QRCodeEncoder=Je,l.QRCodeEncoderQRCode=Rn,l.QRCodeMaskUtil=at,l.QRCodeMatrixUtil=me,l.QRCodeMode=ge,l.QRCodeReader=yn,l.QRCodeVersion=fe,l.QRCodeWriter=Wn,l.RGBLuminanceSource=Ki,l.RSS14Reader=ot,l.RSSExpandedReader=q,l.ReaderException=Lr,l.ReedSolomonDecoder=Xt,l.ReedSolomonEncoder=Zi,l.ReedSolomonException=Se,l.Result=Ue,l.ResultMetadataType=He,l.ResultPoint=de,l.StringUtils=ae,l.UnsupportedOperationException=Ve,l.VideoInputDevice=Kt,l.WhiteRectangleDetector=dn,l.WriterException=Ze,l.ZXingArrays=H,l.ZXingCharset=Eo,l.ZXingInteger=G,l.ZXingStandardCharsets=$i,l.ZXingStringBuilder=Ee,l.ZXingStringEncoding=Ae,l.ZXingSystem=T,l.createAbstractExpandedDecoder=fo,Object.defineProperty(l,"__esModule",{value:!0})})})(Ms,Ms.exports);var et=Ms.exports;const cg=$c(et),ug=Qc({__proto__:null,default:cg},[et]);var Ca=function(){function s(i,l,d){if(this.formatMap=new Map([[ue.QR_CODE,et.BarcodeFormat.QR_CODE],[ue.AZTEC,et.BarcodeFormat.AZTEC],[ue.CODABAR,et.BarcodeFormat.CODABAR],[ue.CODE_39,et.BarcodeFormat.CODE_39],[ue.CODE_93,et.BarcodeFormat.CODE_93],[ue.CODE_128,et.BarcodeFormat.CODE_128],[ue.DATA_MATRIX,et.BarcodeFormat.DATA_MATRIX],[ue.MAXICODE,et.BarcodeFormat.MAXICODE],[ue.ITF,et.BarcodeFormat.ITF],[ue.EAN_13,et.BarcodeFormat.EAN_13],[ue.EAN_8,et.BarcodeFormat.EAN_8],[ue.PDF_417,et.BarcodeFormat.PDF_417],[ue.RSS_14,et.BarcodeFormat.RSS_14],[ue.RSS_EXPANDED,et.BarcodeFormat.RSS_EXPANDED],[ue.UPC_A,et.BarcodeFormat.UPC_A],[ue.UPC_E,et.BarcodeFormat.UPC_E],[ue.UPC_EAN_EXTENSION,et.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ug)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=l,this.logger=d;var c=this.createZXingFormats(i),h=new Map;h.set(et.DecodeHintType.POSSIBLE_FORMATS,c),h.set(et.DecodeHintType.TRY_HARDER,!1),this.hints=h}return s.prototype.decodeAsync=function(i){var l=this;return new Promise(function(d,c){try{d(l.decode(i))}catch(h){c(h)}})},s.prototype.decode=function(i){var l=new et.MultiFormatReader(this.verbose,this.hints),d=new et.HTMLCanvasElementLuminanceSource(i),c=new et.BinaryBitmap(new et.HybridBinarizer(d)),h=l.decode(c);return{text:h.text,format:Kl.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}},s.prototype.createReverseFormatMap=function(){var i=new Map;return this.formatMap.forEach(function(l,d,c){i.set(l,d)}),i},s.prototype.toHtml5QrcodeSupportedFormats=function(i){if(!this.reverseFormatMap.has(i))throw"reverseFormatMap doesn't have ".concat(i);return this.reverseFormatMap.get(i)},s.prototype.createZXingFormats=function(i){for(var l=[],d=0,c=i;d<c.length;d++){var h=c[d];this.formatMap.has(h)?l.push(this.formatMap.get(h)):this.logger.logError("".concat(h," is not supported by")+"ZXingHtml5QrcodeShim")}return l},s.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},s}(),dg=function(s,i,l,d){function c(h){return h instanceof l?h:new l(function(x){x(h)})}return new(l||(l=Promise))(function(h,x){function b(A){try{p(d.next(A))}catch(y){x(y)}}function w(A){try{p(d.throw(A))}catch(y){x(y)}}function p(A){A.done?h(A.value):c(A.value).then(b,w)}p((d=d.apply(s,i||[])).next())})},fg=function(s,i){var l={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},d,c,h,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(p){return function(A){return w([p,A])}}function w(p){if(d)throw new TypeError("Generator is already executing.");for(;x&&(x=0,p[0]&&(l=0)),l;)try{if(d=1,c&&(h=p[0]&2?c.return:p[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,p[1])).done)return h;switch(c=0,h&&(p=[p[0]&2,h.value]),p[0]){case 0:case 1:h=p;break;case 4:return l.label++,{value:p[1],done:!1};case 5:l.label++,c=p[1],p=[0];continue;case 7:p=l.ops.pop(),l.trys.pop();continue;default:if(h=l.trys,!(h=h.length>0&&h[h.length-1])&&(p[0]===6||p[0]===2)){l=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){l.label=p[1];break}if(p[0]===6&&l.label<h[1]){l.label=h[1],h=p;break}if(h&&l.label<h[2]){l.label=h[2],l.ops.push(p);break}h[2]&&l.ops.pop(),l.trys.pop();continue}p=i.call(s,l)}catch(A){p=[6,A],c=0}finally{d=h=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Ea=function(){function s(i,l,d){if(this.formatMap=new Map([[ue.QR_CODE,"qr_code"],[ue.AZTEC,"aztec"],[ue.CODABAR,"codabar"],[ue.CODE_39,"code_39"],[ue.CODE_93,"code_93"],[ue.CODE_128,"code_128"],[ue.DATA_MATRIX,"data_matrix"],[ue.ITF,"itf"],[ue.EAN_13,"ean_13"],[ue.EAN_8,"ean_8"],[ue.PDF_417,"pdf417"],[ue.UPC_A,"upc_a"],[ue.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!s.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=l,this.logger=d;var c=this.createBarcodeDetectorFormats(i);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return s.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var i=new BarcodeDetector({formats:["qr_code"]});return typeof i<"u"},s.prototype.decodeAsync=function(i){return dg(this,void 0,void 0,function(){var l,d;return fg(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(i)];case 1:if(l=c.sent(),!l||l.length===0)throw"No barcode or QR code detected.";return d=this.selectLargestBarcode(l),[2,{text:d.rawValue,format:Kl.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}]}})})},s.prototype.selectLargestBarcode=function(i){for(var l=null,d=0,c=0,h=i;c<h.length;c++){var x=h[c],b=x.boundingBox.width*x.boundingBox.height;b>d&&(d=b,l=x)}if(!l)throw"No largest barcode found";return l},s.prototype.createBarcodeDetectorFormats=function(i){for(var l=[],d=0,c=i;d<c.length;d++){var h=c[d];this.formatMap.has(h)?l.push(this.formatMap.get(h)):this.logger.warn("".concat(h," is not supported by")+"BarcodeDetectorDelegate")}return{formats:l}},s.prototype.toHtml5QrcodeSupportedFormats=function(i){if(!this.reverseFormatMap.has(i))throw"reverseFormatMap doesn't have ".concat(i);return this.reverseFormatMap.get(i)},s.prototype.createReverseFormatMap=function(){var i=new Map;return this.formatMap.forEach(function(l,d,c){i.set(l,d)}),i},s.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},s}(),Aa=function(s,i,l,d){function c(h){return h instanceof l?h:new l(function(x){x(h)})}return new(l||(l=Promise))(function(h,x){function b(A){try{p(d.next(A))}catch(y){x(y)}}function w(A){try{p(d.throw(A))}catch(y){x(y)}}function p(A){A.done?h(A.value):c(A.value).then(b,w)}p((d=d.apply(s,i||[])).next())})},ya=function(s,i){var l={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},d,c,h,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(p){return function(A){return w([p,A])}}function w(p){if(d)throw new TypeError("Generator is already executing.");for(;x&&(x=0,p[0]&&(l=0)),l;)try{if(d=1,c&&(h=p[0]&2?c.return:p[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,p[1])).done)return h;switch(c=0,h&&(p=[p[0]&2,h.value]),p[0]){case 0:case 1:h=p;break;case 4:return l.label++,{value:p[1],done:!1};case 5:l.label++,c=p[1],p=[0];continue;case 7:p=l.ops.pop(),l.trys.pop();continue;default:if(h=l.trys,!(h=h.length>0&&h[h.length-1])&&(p[0]===6||p[0]===2)){l=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){l.label=p[1];break}if(p[0]===6&&l.label<h[1]){l.label=h[1],h=p;break}if(h&&l.label<h[2]){l.label=h[2],l.ops.push(p);break}h[2]&&l.ops.pop(),l.trys.pop();continue}p=i.call(s,l)}catch(A){p=[6,A],c=0}finally{d=h=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},hg=function(){function s(i,l,d,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=d,l&&Ea.isSupported()?(this.primaryDecoder=new Ea(i,d,c),this.secondaryDecoder=new Ca(i,d,c)):this.primaryDecoder=new Ca(i,d,c)}return s.prototype.decodeAsync=function(i){return Aa(this,void 0,void 0,function(){var l;return ya(this,function(d){switch(d.label){case 0:l=performance.now(),d.label=1;case 1:return d.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(i)];case 2:return[2,d.sent()];case 3:return this.possiblyLogPerformance(l),[7];case 4:return[2]}})})},s.prototype.decodeRobustlyAsync=function(i){return Aa(this,void 0,void 0,function(){var l,d;return ya(this,function(c){switch(c.label){case 0:l=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(i)];case 2:return[2,c.sent()];case 3:if(d=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(i)];throw d;case 4:return this.possiblyLogPerformance(l),[7];case 5:return[2]}})})},s.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},s.prototype.possiblyLogPerformance=function(i){if(this.verbose){var l=performance.now()-i;this.executionResults.push(l),this.executions++,this.possiblyFlushPerformanceReport()}},s.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var i=0,l=0,d=this.executionResults;l<d.length;l++){var c=d[l];i+=c}var h=i/this.executionResults.length;console.log("".concat(h," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},s}(),to=function(){var s=function(i,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(d[h]=c[h])},s(i,l)};return function(i,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");s(i,l);function d(){this.constructor=i}i.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}(),ci=function(s,i,l,d){function c(h){return h instanceof l?h:new l(function(x){x(h)})}return new(l||(l=Promise))(function(h,x){function b(A){try{p(d.next(A))}catch(y){x(y)}}function w(A){try{p(d.throw(A))}catch(y){x(y)}}function p(A){A.done?h(A.value):c(A.value).then(b,w)}p((d=d.apply(s,i||[])).next())})},ui=function(s,i){var l={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},d,c,h,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(p){return function(A){return w([p,A])}}function w(p){if(d)throw new TypeError("Generator is already executing.");for(;x&&(x=0,p[0]&&(l=0)),l;)try{if(d=1,c&&(h=p[0]&2?c.return:p[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,p[1])).done)return h;switch(c=0,h&&(p=[p[0]&2,h.value]),p[0]){case 0:case 1:h=p;break;case 4:return l.label++,{value:p[1],done:!1};case 5:l.label++,c=p[1],p=[0];continue;case 7:p=l.ops.pop(),l.trys.pop();continue;default:if(h=l.trys,!(h=h.length>0&&h[h.length-1])&&(p[0]===6||p[0]===2)){l=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){l.label=p[1];break}if(p[0]===6&&l.label<h[1]){l.label=h[1],h=p;break}if(h&&l.label<h[2]){l.label=h[2],l.ops.push(p);break}h[2]&&l.ops.pop(),l.trys.pop();continue}p=i.call(s,l)}catch(A){p=[6,A],c=0}finally{d=h=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Ql=function(){function s(i,l){this.name=i,this.track=l}return s.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},s.prototype.apply=function(i){var l={};l[this.name]=i;var d={advanced:[l]};return this.track.applyConstraints(d)},s.prototype.value=function(){var i=this.track.getSettings();if(this.name in i){var l=i[this.name];return l}return null},s}(),gg=function(s){to(i,s);function i(l,d){return s.call(this,l,d)||this}return i.prototype.min=function(){return this.getCapabilities().min},i.prototype.max=function(){return this.getCapabilities().max},i.prototype.step=function(){return this.getCapabilities().step},i.prototype.apply=function(l){var d={};d[this.name]=l;var c={advanced:[d]};return this.track.applyConstraints(c)},i.prototype.getCapabilities=function(){this.failIfNotSupported();var l=this.track.getCapabilities(),d=l[this.name];return{min:d.min,max:d.max,step:d.step}},i.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},i}(Ql),xg=function(s){to(i,s);function i(l){return s.call(this,"zoom",l)||this}return i}(gg),pg=function(s){to(i,s);function i(l){return s.call(this,"torch",l)||this}return i}(Ql),mg=function(){function s(i){this.track=i}return s.prototype.zoomFeature=function(){return new xg(this.track)},s.prototype.torchFeature=function(){return new pg(this.track)},s}(),wg=function(){function s(i,l,d){this.isClosed=!1,this.parentElement=i,this.mediaStream=l,this.callbacks=d,this.surface=this.createVideoElement(this.parentElement.clientWidth),i.append(this.surface)}return s.prototype.createVideoElement=function(i){var l=document.createElement("video");return l.style.width="".concat(i,"px"),l.style.display="block",l.muted=!0,l.setAttribute("muted","true"),l.playsInline=!0,l},s.prototype.setupSurface=function(){var i=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var l=function(){var d=i.surface.clientWidth,c=i.surface.clientHeight;i.callbacks.onRenderSurfaceReady(d,c),i.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.srcObject=this.mediaStream,this.surface.play()},s.create=function(i,l,d,c){return ci(this,void 0,void 0,function(){var h,x;return ui(this,function(b){switch(b.label){case 0:return h=new s(i,l,c),d.aspectRatio?(x={aspectRatio:d.aspectRatio},[4,h.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:b.sent(),b.label=2;case 2:return h.setupSurface(),[2,h]}})})},s.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},s.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},s.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},s.prototype.resume=function(i){this.failIfClosed();var l=this,d=function(){setTimeout(i,200),l.surface.removeEventListener("playing",d)};this.surface.addEventListener("playing",d),this.surface.play()},s.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},s.prototype.getSurface=function(){return this.failIfClosed(),this.surface},s.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},s.prototype.applyVideoConstraints=function(i){return ci(this,void 0,void 0,function(){return ui(this,function(l){if("aspectRatio"in i)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(i)]})})},s.prototype.close=function(){if(this.isClosed)return Promise.resolve();var i=this;return new Promise(function(l,d){var c=i.mediaStream.getVideoTracks(),h=c.length,x=0;i.mediaStream.getVideoTracks().forEach(function(b){i.mediaStream.removeTrack(b),b.stop(),++x,x>=h&&(i.isClosed=!0,i.parentElement.removeChild(i.surface),l())})})},s.prototype.getCapabilities=function(){return new mg(this.getFirstTrackOrFail())},s}(),bg=function(){function s(i){this.mediaStream=i}return s.prototype.render=function(i,l,d){return ci(this,void 0,void 0,function(){return ui(this,function(c){return[2,wg.create(i,this.mediaStream,l,d)]})})},s.create=function(i){return ci(this,void 0,void 0,function(){var l,d;return ui(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return l={audio:!1,video:i},[4,navigator.mediaDevices.getUserMedia(l)];case 1:return d=c.sent(),[2,new s(d)]}})})},s}(),va=function(s,i,l,d){function c(h){return h instanceof l?h:new l(function(x){x(h)})}return new(l||(l=Promise))(function(h,x){function b(A){try{p(d.next(A))}catch(y){x(y)}}function w(A){try{p(d.throw(A))}catch(y){x(y)}}function p(A){A.done?h(A.value):c(A.value).then(b,w)}p((d=d.apply(s,i||[])).next())})},Sa=function(s,i){var l={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},d,c,h,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(p){return function(A){return w([p,A])}}function w(p){if(d)throw new TypeError("Generator is already executing.");for(;x&&(x=0,p[0]&&(l=0)),l;)try{if(d=1,c&&(h=p[0]&2?c.return:p[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,p[1])).done)return h;switch(c=0,h&&(p=[p[0]&2,h.value]),p[0]){case 0:case 1:h=p;break;case 4:return l.label++,{value:p[1],done:!1};case 5:l.label++,c=p[1],p=[0];continue;case 7:p=l.ops.pop(),l.trys.pop();continue;default:if(h=l.trys,!(h=h.length>0&&h[h.length-1])&&(p[0]===6||p[0]===2)){l=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){l.label=p[1];break}if(p[0]===6&&l.label<h[1]){l.label=h[1],h=p;break}if(h&&l.label<h[2]){l.label=h[2],l.ops.push(p);break}h[2]&&l.ops.pop(),l.trys.pop();continue}p=i.call(s,l)}catch(A){p=[6,A],c=0}finally{d=h=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Cg=function(){function s(){}return s.failIfNotSupported=function(){return va(this,void 0,void 0,function(){return Sa(this,function(i){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new s]})})},s.prototype.create=function(i){return va(this,void 0,void 0,function(){return Sa(this,function(l){return[2,bg.create(i)]})})},s}(),Eg=function(s,i,l,d){function c(h){return h instanceof l?h:new l(function(x){x(h)})}return new(l||(l=Promise))(function(h,x){function b(A){try{p(d.next(A))}catch(y){x(y)}}function w(A){try{p(d.throw(A))}catch(y){x(y)}}function p(A){A.done?h(A.value):c(A.value).then(b,w)}p((d=d.apply(s,i||[])).next())})},Ag=function(s,i){var l={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},d,c,h,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(p){return function(A){return w([p,A])}}function w(p){if(d)throw new TypeError("Generator is already executing.");for(;x&&(x=0,p[0]&&(l=0)),l;)try{if(d=1,c&&(h=p[0]&2?c.return:p[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,p[1])).done)return h;switch(c=0,h&&(p=[p[0]&2,h.value]),p[0]){case 0:case 1:h=p;break;case 4:return l.label++,{value:p[1],done:!1};case 5:l.label++,c=p[1],p=[0];continue;case 7:p=l.ops.pop(),l.trys.pop();continue;default:if(h=l.trys,!(h=h.length>0&&h[h.length-1])&&(p[0]===6||p[0]===2)){l=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){l.label=p[1];break}if(p[0]===6&&l.label<h[1]){l.label=h[1],h=p;break}if(h&&l.label<h[2]){l.label=h[2],l.ops.push(p);break}h[2]&&l.ops.pop(),l.trys.pop();continue}p=i.call(s,l)}catch(A){p=[6,A],c=0}finally{d=h=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},yg=function(){function s(){}return s.retrieve=function(){if(navigator.mediaDevices)return s.getCamerasFromMediaDevices();var i=MediaStreamTrack;return MediaStreamTrack&&i.getSources?s.getCamerasFromMediaStreamTrack():s.rejectWithError()},s.rejectWithError=function(){var i=qn.unableToQuerySupportedDevices();return s.isHttpsOrLocalhost()||(i=qn.insecureContextCameraQueryError()),Promise.reject(i)},s.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var i=location.host.split(":")[0];return i==="127.0.0.1"||i==="localhost"},s.getCamerasFromMediaDevices=function(){return Eg(this,void 0,void 0,function(){var i,l,d,c,h,x,b;return Ag(this,function(w){switch(w.label){case 0:return i=function(p){for(var A=p.getVideoTracks(),y=0,P=A;y<P.length;y++){var B=P[y];B.enabled=!1,B.stop(),p.removeTrack(B)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return l=w.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(d=w.sent(),c=[],h=0,x=d;h<x.length;h++)b=x[h],b.kind==="videoinput"&&c.push({id:b.deviceId,label:b.label});return i(l),[2,c]}})})},s.getCamerasFromMediaStreamTrack=function(){return new Promise(function(i,l){var d=function(h){for(var x=[],b=0,w=h;b<w.length;b++){var p=w[b];p.kind==="video"&&x.push({id:p.id,label:p.label})}i(x)},c=MediaStreamTrack;c.getSources(d)})},s}(),lt;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.NOT_STARTED=1]="NOT_STARTED",s[s.SCANNING=2]="SCANNING",s[s.PAUSED=3]="PAUSED"})(lt||(lt={}));var vg=function(){function s(){this.state=lt.NOT_STARTED,this.onGoingTransactionNewState=lt.UNKNOWN}return s.prototype.directTransition=function(i){this.failIfTransitionOngoing(),this.validateTransition(i),this.state=i},s.prototype.startTransition=function(i){return this.failIfTransitionOngoing(),this.validateTransition(i),this.onGoingTransactionNewState=i,this},s.prototype.execute=function(){if(this.onGoingTransactionNewState===lt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var i=this.onGoingTransactionNewState;this.onGoingTransactionNewState=lt.UNKNOWN,this.directTransition(i)},s.prototype.cancel=function(){if(this.onGoingTransactionNewState===lt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=lt.UNKNOWN},s.prototype.getState=function(){return this.state},s.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==lt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},s.prototype.validateTransition=function(i){switch(this.state){case lt.UNKNOWN:throw"Transition from unknown is not allowed";case lt.NOT_STARTED:this.failIfNewStateIs(i,[lt.PAUSED]);break;case lt.SCANNING:break;case lt.PAUSED:break}},s.prototype.failIfNewStateIs=function(i,l){for(var d=0,c=l;d<c.length;d++){var h=c[d];if(i===h)throw"Cannot transition from ".concat(this.state," to ").concat(i)}},s}(),Sg=function(){function s(i){this.stateManager=i}return s.prototype.startTransition=function(i){return this.stateManager.startTransition(i)},s.prototype.directTransition=function(i){this.stateManager.directTransition(i)},s.prototype.getState=function(){return this.stateManager.getState()},s.prototype.canScanFile=function(){return this.stateManager.getState()===lt.NOT_STARTED},s.prototype.isScanning=function(){return this.stateManager.getState()!==lt.NOT_STARTED},s.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===lt.SCANNING},s.prototype.isPaused=function(){return this.stateManager.getState()===lt.PAUSED},s}(),Ig=function(){function s(){}return s.create=function(){return new Sg(new vg)},s}(),_g=function(){var s=function(i,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(d[h]=c[h])},s(i,l)};return function(i,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");s(i,l);function d(){this.constructor=i}i.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}(),Vt=function(s){_g(i,s);function i(){return s!==null&&s.apply(this,arguments)||this}return i.DEFAULT_WIDTH=300,i.DEFAULT_WIDTH_OFFSET=2,i.FILE_SCAN_MIN_HEIGHT=300,i.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,i.MIN_QR_BOX_SIZE=50,i.SHADED_LEFT=1,i.SHADED_RIGHT=2,i.SHADED_TOP=3,i.SHADED_BOTTOM=4,i.SHADED_REGION_ELEMENT_ID="qr-shaded-region",i.VERBOSE=!1,i.BORDER_SHADER_DEFAULT_COLOR="#ffffff",i.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",i}(og),Tg=function(){function s(i,l){this.logger=l,this.fps=Vt.SCAN_DEFAULT_FPS,i?(i.fps&&(this.fps=i.fps),this.disableFlip=i.disableFlip===!0,this.qrbox=i.qrbox,this.aspectRatio=i.aspectRatio,this.videoConstraints=i.videoConstraints):this.disableFlip=Vt.DEFAULT_DISABLE_FLIP}return s.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?$l.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},s.prototype.isShadedBoxEnabled=function(){return!fn(this.qrbox)},s.create=function(i,l){return new s(i,l)},s}(),Og=function(){function s(i,l){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(i))throw"HTML Element with id=".concat(i," not found");this.elementId=i,this.verbose=!1;var d;typeof l=="boolean"?this.verbose=l===!0:l&&(d=l,this.verbose=d.verbose===!0,d.experimentalFeatures),this.logger=new lg(this.verbose),this.qrcode=new hg(this.getSupportedFormats(l),this.getUseBarCodeDetectorIfSupported(d),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Ig.create()}return s.prototype.start=function(i,l,d,c){var h=this;if(!i)throw"cameraIdOrConfig is required";if(!d||typeof d!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;c?x=c:x=this.verbose?this.logger.log:function(){};var b=Tg.create(l,this.logger);this.clearElement();var w=!1;b.videoConstraints&&(b.isMediaStreamConstraintsValid()?w=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=w,A=document.getElementById(this.elementId);A.clientWidth?A.clientWidth:Vt.DEFAULT_WIDTH,A.style.position="relative",this.shouldScan=!0,this.element=A;var y=this,P=this.stateManagerProxy.startTransition(lt.SCANNING);return new Promise(function(B,R){var T=p?b.videoConstraints:y.createVideoConstraints(i);if(!T){P.cancel(),R("videoConstraints should be defined");return}var M={};(!p||b.aspectRatio)&&(M.aspectRatio=b.aspectRatio);var k={onRenderSurfaceReady:function(H,G){y.setupUi(H,G,b),y.isScanning=!0,y.foreverScan(b,d,x)}};Cg.failIfNotSupported().then(function(H){H.create(T).then(function(G){return G.render(h.element,M,k).then(function(Y){y.renderedCamera=Y,P.execute(),B(null)}).catch(function(Y){P.cancel(),R(Y)})}).catch(function(G){P.cancel(),R(qn.errorGettingUserMedia(G))})}).catch(function(H){P.cancel(),R(qn.cameraStreamingNotSupported())})})},s.prototype.pause=function(i){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(lt.PAUSED),this.showPausedState(),(fn(i)||i!==!0)&&(i=!1),i&&this.renderedCamera&&this.renderedCamera.pause()},s.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var i=this,l=function(){i.stateManagerProxy.directTransition(lt.SCANNING),i.hidePausedState()};if(!this.renderedCamera.isPaused()){l();return}this.renderedCamera.resume(function(){l()})},s.prototype.getState=function(){return this.stateManagerProxy.getState()},s.prototype.stop=function(){var i=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var l=this.stateManagerProxy.startTransition(lt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var d=function(){if(i.element){var h=document.getElementById(Vt.SHADED_REGION_ELEMENT_ID);h&&i.element.removeChild(h)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),d(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),l.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},s.prototype.scanFile=function(i,l){return this.scanFileV2(i,l).then(function(d){return d.decodedText})},s.prototype.scanFileV2=function(i,l){var d=this;if(!i||!(i instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(fn(l)&&(l=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,h){d.possiblyCloseLastScanImageFile(),d.clearElement(),d.lastScanImageFile=URL.createObjectURL(i);var x=new Image;x.onload=function(){var b=x.width,w=x.height,p=document.getElementById(d.elementId),A=p.clientWidth?p.clientWidth:Vt.DEFAULT_WIDTH,y=Math.max(p.clientHeight?p.clientHeight:w,Vt.FILE_SCAN_MIN_HEIGHT),P=d.computeCanvasDrawConfig(b,w,A,y);if(l){var B=d.createCanvasElement(A,y,"qr-canvas-visible");B.style.display="inline-block",p.appendChild(B);var R=B.getContext("2d");if(!R)throw"Unable to get 2d context from canvas";R.canvas.width=A,R.canvas.height=y,R.drawImage(x,0,0,b,w,P.x,P.y,P.width,P.height)}var T=Vt.FILE_SCAN_HIDDEN_CANVAS_PADDING,M=Math.max(x.width,P.width),k=Math.max(x.height,P.height),H=M+2*T,G=k+2*T,Y=d.createCanvasElement(H,G);p.appendChild(Y);var re=Y.getContext("2d");if(!re)throw"Unable to get 2d context from canvas";re.canvas.width=H,re.canvas.height=G,re.drawImage(x,0,0,b,w,T,T,M,k);try{d.qrcode.decodeRobustlyAsync(Y).then(function($){c(ba.createFromQrcodeResult($))}).catch(h)}catch($){h("QR code parse error, error = ".concat($))}},x.onerror=h,x.onabort=h,x.onstalled=h,x.onsuspend=h,x.src=URL.createObjectURL(i)})},s.prototype.clear=function(){this.clearElement()},s.getCameras=function(){return yg.retrieve()},s.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},s.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},s.prototype.applyVideoConstraints=function(i){if(i){if(!$l.isMediaStreamConstraintsValid(i,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(i)},s.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},s.prototype.getSupportedFormats=function(i){var l=[ue.QR_CODE,ue.AZTEC,ue.CODABAR,ue.CODE_39,ue.CODE_93,ue.CODE_128,ue.DATA_MATRIX,ue.MAXICODE,ue.ITF,ue.EAN_13,ue.EAN_8,ue.PDF_417,ue.RSS_14,ue.RSS_EXPANDED,ue.UPC_A,ue.UPC_E,ue.UPC_EAN_EXTENSION];if(!i||typeof i=="boolean"||!i.formatsToSupport)return l;if(!Array.isArray(i.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(i.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var d=[],c=0,h=i.formatsToSupport;c<h.length;c++){var x=h[c];sg(x)?d.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(d.length===0)throw"None of formatsToSupport match supported values.";return d},s.prototype.getUseBarCodeDetectorIfSupported=function(i){if(fn(i))return!0;if(!fn(i.useBarCodeDetectorIfSupported))return i.useBarCodeDetectorIfSupported!==!1;if(fn(i.experimentalFeatures))return!0;var l=i.experimentalFeatures;return fn(l.useBarCodeDetectorIfSupported)?!0:l.useBarCodeDetectorIfSupported!==!1},s.prototype.validateQrboxSize=function(i,l,d){var c=this,h=d.qrbox;this.validateQrboxConfig(h);var x=this.toQrdimensions(i,l,h),b=function(p){if(p<Vt.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Vt.MIN_QR_BOX_SIZE,"px.")},w=function(p){return p>i&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=i),p};b(x.width),b(x.height),x.width=w(x.width)},s.prototype.validateQrboxConfig=function(i){if(typeof i!="number"&&typeof i!="function"&&(i.width===void 0||i.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},s.prototype.toQrdimensions=function(i,l,d){if(typeof d=="number")return{width:d,height:d};if(typeof d=="function")try{return d(i,l)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return d},s.prototype.setupUi=function(i,l,d){d.isShadedBoxEnabled()&&this.validateQrboxSize(i,l,d);var c=fn(d.qrbox)?{width:i,height:l}:d.qrbox;this.validateQrboxConfig(c);var h=this.toQrdimensions(i,l,c);h.height>l&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=d.isShadedBoxEnabled()&&h.height<=l,b={x:0,y:0,width:i,height:l},w=x?this.getShadedRegionBounds(i,l,h):b,p=this.createCanvasElement(w.width,w.height),A={willReadFrequently:!0},y=p.getContext("2d",A);y.canvas.width=w.width,y.canvas.height=w.height,this.element.append(p),x&&this.possiblyInsertShadingElement(this.element,i,l,h),this.createScannerPausedUiElement(this.element),this.qrRegion=w,this.context=y,this.canvasElement=p},s.prototype.createScannerPausedUiElement=function(i){var l=document.createElement("div");l.innerText=qn.scannerPaused(),l.style.display="none",l.style.position="absolute",l.style.top="0px",l.style.zIndex="1",l.style.background="rgba(9, 9, 9, 0.46)",l.style.color="#FFECEC",l.style.textAlign="center",l.style.width="100%",i.appendChild(l),this.scannerPausedUiElement=l},s.prototype.scanContext=function(i,l){var d=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return i(c.text,ba.createFromQrcodeResult(c)),d.possiblyUpdateShaders(!0),!0}).catch(function(c){d.possiblyUpdateShaders(!1);var h=qn.codeParseError(c);return l(h,ag.createFrom(h)),!1})},s.prototype.foreverScan=function(i,l,d){var c=this;if(this.shouldScan&&this.renderedCamera){var h=this.renderedCamera.getSurface(),x=h.videoWidth/h.clientWidth,b=h.videoHeight/h.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var w=this.qrRegion.width*x,p=this.qrRegion.height*b,A=this.qrRegion.x*x,y=this.qrRegion.y*b;this.context.drawImage(h,A,y,w,p,0,0,this.qrRegion.width,this.qrRegion.height);var P=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(i,l,d)},c.getTimeoutFps(i.fps))};this.scanContext(l,d).then(function(B){!B&&i.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(l,d).finally(function(){P()})):P()}).catch(function(B){c.logger.logError("Error happend while scanning context",B),P()})}},s.prototype.createVideoConstraints=function(i){if(typeof i=="string")return{deviceId:{exact:i}};if(typeof i=="object"){var l="facingMode",d="deviceId",c={user:!0,environment:!0},h="exact",x=function(R){if(R in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(R,"'")},b=Object.keys(i);if(b.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(b.length," keys");var w=Object.keys(i)[0];if(w!==l&&w!==d)throw"Only '".concat(l,"' and '").concat(d,"' ")+" are supported for 'cameraIdOrConfig'";if(w===l){var p=i.facingMode;if(typeof p=="string"){if(x(p))return{facingMode:p}}else if(typeof p=="object")if(h in p){if(x(p["".concat(h)]))return{facingMode:{exact:p["".concat(h)]}}}else throw"'facingMode' should be string or object with"+" ".concat(h," as key.");else{var A=typeof p;throw"Invalid type of 'facingMode' = ".concat(A)}}else{var y=i.deviceId;if(typeof y=="string")return{deviceId:y};if(typeof y=="object"){if(h in y)return{deviceId:{exact:y["".concat(h)]}};throw"'deviceId' should be string or object with"+" ".concat(h," as key.")}else{var P=typeof y;throw"Invalid type of 'deviceId' = ".concat(P)}}}var B=typeof i;throw"Invalid type of 'cameraIdOrConfig' = ".concat(B)},s.prototype.computeCanvasDrawConfig=function(i,l,d,c){if(i<=d&&l<=c){var h=(d-i)/2,x=(c-l)/2;return{x:h,y:x,width:i,height:l}}else{var b=i,w=l;return i>d&&(l=d/i*l,i=d),l>c&&(i=c/l*i,l=c),this.logger.log("Image downsampled from "+"".concat(b,"X").concat(w)+" to ".concat(i,"X").concat(l,".")),this.computeCanvasDrawConfig(i,l,d,c)}},s.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var i=document.getElementById(this.elementId);i&&(i.innerHTML="")},s.prototype.possiblyUpdateShaders=function(i){this.qrMatch!==i&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(l){l.style.backgroundColor=i?Vt.BORDER_SHADER_MATCH_COLOR:Vt.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=i)},s.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},s.prototype.createCanvasElement=function(i,l,d){var c=i,h=l,x=document.createElement("canvas");return x.style.width="".concat(c,"px"),x.style.height="".concat(h,"px"),x.style.display="none",x.id=fn(d)?"qr-canvas":d,x},s.prototype.getShadedRegionBounds=function(i,l,d){if(d.width>i||d.height>l)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(i-d.width)/2,y:(l-d.height)/2,width:d.width,height:d.height}},s.prototype.possiblyInsertShadingElement=function(i,l,d,c){if(!(l-c.width<1||d-c.height<1)){var h=document.createElement("div");h.style.position="absolute";var x=(l-c.width)/2,b=(d-c.height)/2;if(h.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderTop="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderBottom="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),h.style.boxSizing="border-box",h.style.top="0px",h.style.bottom="0px",h.style.left="0px",h.style.right="0px",h.id="".concat(Vt.SHADED_REGION_ELEMENT_ID),l-c.width<11||d-c.height<11)this.hasBorderShaders=!1;else{var w=5,p=40;this.insertShaderBorders(h,p,w,-w,null,0,!0),this.insertShaderBorders(h,p,w,-w,null,0,!1),this.insertShaderBorders(h,p,w,null,-w,0,!0),this.insertShaderBorders(h,p,w,null,-w,0,!1),this.insertShaderBorders(h,w,p+w,-w,null,-w,!0),this.insertShaderBorders(h,w,p+w,null,-w,-w,!0),this.insertShaderBorders(h,w,p+w,-w,null,-w,!1),this.insertShaderBorders(h,w,p+w,null,-w,-w,!1),this.hasBorderShaders=!0}i.append(h)}},s.prototype.insertShaderBorders=function(i,l,d,c,h,x,b){var w=document.createElement("div");w.style.position="absolute",w.style.backgroundColor=Vt.BORDER_SHADER_DEFAULT_COLOR,w.style.width="".concat(l,"px"),w.style.height="".concat(d,"px"),c!==null&&(w.style.top="".concat(c,"px")),h!==null&&(w.style.bottom="".concat(h,"px")),b?w.style.left="".concat(x,"px"):w.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(w),i.appendChild(w)},s.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},s.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},s.prototype.getTimeoutFps=function(i){return 1e3/i},s}(),Ia;(function(s){s[s.STATUS_DEFAULT=0]="STATUS_DEFAULT",s[s.STATUS_SUCCESS=1]="STATUS_SUCCESS",s[s.STATUS_WARNING=2]="STATUS_WARNING",s[s.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ia||(Ia={}));const Ng=({onScanSuccess:s,onScanError:i,onScanCancel:l})=>{const[d,c]=O.useState(!1),h=async(b,w,p={})=>{try{const A=await b.scanFile(w,!0,p);return console.log("Scan attempt succeeded:",A),A}catch(A){throw console.log("Scan attempt failed:",A),A}},x=async b=>{const w=b.target.files[0];if(!w)return;c(!0);const p=new Og("qr-reader");try{const A=[{},{bindSearchRegion:!0,maxLength:512,minLength:1},{returnDetailedScanResult:!0,maxLength:512,minLength:1},{experimentalFeatures:{useBarCodeDetectorIfSupported:!1},maxLength:512,minLength:1}];for(let y=0;y<A.length;y++)try{console.log(`Attempting scan with config ${y+1}:`,A[y]);const P=await h(p,w,A[y]);if(P){p.clear(),s(P);return}}catch(P){console.log(`Config ${y+1} failed:`,P)}throw new Error("Unable to scan QR code with any configuration")}catch(A){console.error("Final error:",A),i(A)}finally{try{await p.clear()}catch(A){console.error("Error clearing scanner:",A)}c(!1)}};return _.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:_.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[_.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Scan QR Code"}),_.jsxs("div",{className:"space-y-4",children:[_.jsx("div",{id:"qr-reader",style:{display:"none"}}),_.jsx("div",{className:"flex flex-col items-center",children:_.jsxs("label",{className:"w-full flex flex-col items-center px-4 py-6 bg-coral text-blue rounded-lg shadow-lg tracking-wide uppercase border border-blue cursor-pointer hover:bg-blue hover:text-white",children:[_.jsx("span",{className:"mt-2 text-base leading-normal",children:"Select an image"}),_.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:x,disabled:d})]})}),d&&_.jsx("div",{className:"text-center text-gray-600",children:"Processing image..."}),_.jsx("button",{onClick:l,className:"w-full mt-4 px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"Cancel"})]})]})})},Tt={coral:"#F38181",teal:"#4ECAC7",yellow:"#FEC43C"};function Rg(){const[s,i]=O.useState(""),[l,d]=O.useState([]),[c,h]=O.useState([]),[x,b]=O.useState(""),[w,p]=O.useState(""),[A,y]=O.useState(null),[P,B]=O.useState(""),[R,T]=O.useState([]),[M,k]=O.useState(""),[H,G]=O.useState(null);O.useState([]);const[Y,re]=O.useState([]),[$,L]=O.useState(!1),[K,z]=O.useState(!1),[Ve,Ae]=O.useState(!1),[ae,Ee]=O.useState(!1),[Te,U]=O.useState([]),[pe,J]=O.useState(!1),{language:Xe,toggleLanguage:rt}=Sr(),Ce=Ir(Xe);O.useEffect(()=>{(async()=>{try{const[le,se,Se]=await Promise.all([tg(),xa(),fs()]);d(le),h(se),T(Se)}catch(le){console.error("Error loading initial data:",le)}})()},[]),O.useEffect(()=>{(async()=>{try{let le=null;s==="return"?le=M||null:s==="borrow"&&(le=w||null);const se=await gr(le,$),Se=await Promise.all(se.map(async ze=>{try{const Xt=await pa(ze.id);return{...ze,last_reminder_date:Xt?Xt.sent_at:null}}catch(Xt){return console.error(`Failed to fetch reminder for loan_id ${ze.id}:`,Xt),{...ze,last_reminder_date:null}}}));re(Gt(Se))}catch(le){console.error("Error fetching loan history:",le),re([])}})()},[$,s,M,w]);const Kt=l.map(Q=>({value:Q.id,label:Q.parent_name})),Oe=async()=>{J(!0);try{const Q=await Promise.all(Te.map(async Se=>{try{const ze=await ig(Se.id,"Book Return Reminder",{borrower_name:Se.borrower_name,book_title:Se.book_title,borrowed_at:Se.borrowed_at});if(ze.success){console.log(`Reminder sent successfully for loan_id: ${Se.id}`);const Xt=new Date().toISOString().slice(0,19).replace("T"," ");re(je=>je.map(Ie=>Ie.id===Se.id?{...Ie,last_reminder_date:Xt}:Ie));const it=await pa(Se.id);it!=null&&it.sent_at&&re(je=>je.map(Ie=>Ie.id===Se.id?{...Ie,last_reminder_date:it.sent_at}:Ie))}else console.error(`Failed to send reminder for loan_id: ${Se.id} - ${ze.error}`);return{success:ze.success,loanId:Se.id,error:ze.error}}catch(ze){return console.error(`Error sending reminder for loan_id ${Se.id}:`,ze),{success:!1,loanId:Se.id,error:ze.message}}})),le=Q.filter(Se=>Se.success).length,se=Q.filter(Se=>!Se.success);if(le>0&&alert(`Sent ${le} reminders successfully!`),se.length>0){const Se=se.map(ze=>`Loan ID: ${ze.loanId} - ${ze.error}`).join(`
`);alert(`Failed to send ${se.length} reminders.

${Se}`)}U([]),Ee(!1)}catch(Q){console.error("Failed to send reminders:",Q),alert("Failed to send reminders. Please check your email service configuration.")}finally{J(!1)}},Qe=async Q=>{const le=Q.target.checked;L(le);try{let se=null;s==="return"?se=M||null:s==="borrow"&&(se=w||null);const Se=await gr(se,le);re(Gt(Se))}catch(se){console.error("Error fetching loan history:",se),re([])}},Ue=async()=>{Ae(!0),z(!0)},te=async Q=>{try{console.log("Handling scan result..."),z(!1),Ae(!0);const le=await eg(Q);if(le)if(s==="borrow"?(p(Q),y(le)):s==="return"&&(k(Q),G(le),y(le),G(le)),B(le.delivery_status),le.loan_status==="borrowed"){const se=await gr(Q);if(se&&se.length>0){const Se=se[0];alert(`The book "${le.title}" was borrowed by ${Se.borrower_name} on ${Se.borrowed_at}.`)}else alert(`The book "${le.title}" is marked as borrowed, but no loan history is available.`)}else alert(`The book "${le.title}" is available.`);else alert("Book not found for the given QR code.")}catch(le){console.error("Error processing scan result:",le),alert("An error occurred while processing the QR code.")}finally{Ae(!1)}},oe=Q=>{console.error("QR Scan Error:",Q),z(!1),Ae(!1),alert("Failed to scan QR code. Please try again.")},Ot=()=>{z(!1),Ae(!1)},He=async()=>{if(x&&A&&P)try{if((await ng(A.qr_code,x.id,P)).message){alert("Book borrowed successfully!"),y(null),b(null),B("");const le=await xa(),se=await fs(),Se=await gr(null,$);h(le),T(se),re(Gt(Se))}else alert("Error borrowing book.")}catch(Q){console.error("Failed to borrow book:",Q)}else alert("Please select a borrower, book, and book state.")},Wt=async()=>{if(!M){alert("Please select a book to return.");return}try{if((await rg(M)).success){alert("Book returned successfully!"),G(null),k(""),y(null),B("");const le=await fs(),se=await gr(null,$);T(le),re(Gt(se))}else alert("Failed to return the book. Please try again.")}catch(Q){console.error("Error returning book:",Q),alert("An error occurred while returning the book. Please try again.")}},Gt=Q=>Q.sort((le,se)=>!le.return_date&&se.return_date?-1:le.return_date&&!se.return_date?1:new Date(se.loan_start_date)-new Date(le.loan_start_date));return _.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[K&&_.jsx("div",{className:"scanner-modal",children:_.jsx(Ng,{onScanSuccess:te,onScanError:oe,onScanCancel:Ot})}),_.jsxs("div",{className:"flex gap-4 mb-4",children:[_.jsx("div",{className:"absolute top-4 left-4",children:_.jsx("button",{className:"w-12 h-12 flex items-center justify-center rounded-full border border-teal-500 bg-white text-teal-500 shadow-md",onClick:rt,children:Xe==="en"?"HE":"EN"})}),_.jsx("button",{className:`flex-1 py-2 px-4 rounded ${s==="borrow"?"text-white":"text-gray-800"}`,style:{backgroundColor:s==="borrow"?Tt.coral:"transparent",borderColor:Tt.coral,borderWidth:"1px"},onClick:()=>i("borrow"),children:Ce.borrow}),_.jsx("button",{className:`flex-1 py-2 px-4 rounded ${s==="return"?"text-white":"text-gray-800"}`,style:{backgroundColor:s==="return"?Tt.coral:"transparent",borderColor:Tt.coral,borderWidth:"1px"},onClick:()=>i("return"),children:Ce.return})]}),s==="borrow"&&_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"flex gap-4",children:[_.jsx(jh,{options:Kt,placeholder:Ce.borrowed_by,value:x?{value:x.id,label:x.parent_name}:null,onChange:Q=>{if(Q){const le=l.find(se=>se.id===Q.value);b(le)}else b(null)},isClearable:!0,styles:{control:Q=>({...Q,borderColor:Tt.coral,borderRadius:"4px",boxShadow:"none","&:hover":{borderColor:Tt.teal}})},className:"w-full",classNamePrefix:"borrower-select"}),_.jsxs("select",{className:"w-full p-2 border rounded",style:{borderColor:Tt.coral},onChange:Q=>{const le=c.find(se=>se.qr_code===Q.target.value);y(le),p(Q.target.value),le&&B(le.delivery_status||"")},value:w||"",children:[_.jsx("option",{value:"",children:Ce.Select_Book}),c.map(Q=>_.jsx("option",{value:Q.qr_code,children:Q.title},Q.qr_code))]})]}),A&&_.jsxs("select",{className:"w-full p-2 border rounded mt-2",style:{borderColor:Tt.coral},onChange:Q=>B(Q.target.value),value:P,children:[_.jsx("option",{value:"",children:Ce.Select_Book_State}),_.jsx("option",{value:"כמו חדש",children:"כמו חדש"}),_.jsx("option",{value:"מצויין - בלאי בלתי מורגש",children:"מצויין - בלאי בלתי מורגש"}),_.jsx("option",{value:"טוב - בלאי קל",children:"טוב - בלאי קל"})]}),A&&_.jsxs("div",{className:"bg-gray-100 p-4 rounded mt-4",children:[_.jsx("h3",{className:"font-bold text-lg",children:A.title}),_.jsxs("p",{className:"text-sm",children:[Ce.author,": ",A.author]}),_.jsxs("p",{className:"text-sm",children:[Ce.year_of_publication,": ",A.year_of_publication]}),_.jsxs("p",{className:"text-sm",children:[Ce.cover_type,": ",A.cover_type]}),_.jsxs("p",{className:"text-sm",children:[Ce.pages,": ",A.pages]}),_.jsxs("p",{className:"text-sm",children:[Ce.recommended_age,": ",A.recommended_age]}),_.jsxs("p",{className:"text-sm",children:[Ce.Select_Book_State,": ",A.book_condition]})]}),_.jsxs("button",{className:"w-full flex items-center justify-center py-2 px-4 rounded text-white",style:{backgroundColor:Tt.coral},onClick:Ue,children:[_.jsx(Ns,{className:"w-4 h-4 mr-2"}),Ce.ScanQR]}),_.jsx("button",{className:"w-full py-2 px-4 rounded text-white mt-2",style:{backgroundColor:Tt.coral},onClick:He,children:Ce.borrow}),_.jsx("div",{className:`loan-history-container ${Xe==="he"?"rtl":""}`,children:Y.map(Q=>_.jsxs("div",{className:`loan-history-card ${Q.returned_at?"":"active-loan flex items-center"} ${Xe==="he"?"rtl":""}`,children:[_.jsx("div",{className:"loan-history-card-title",children:Q.book_title}),_.jsxs("div",{className:"loan-history-card-detail",children:[Ce.borrowed_by,": ",Q.borrower_name]}),_.jsxs("div",{className:"loan-history-card-detail",children:[Ce.borrow_date,": ",Q.borrowed_at]}),_.jsxs("div",{className:"loan-history-card-detail",children:[Ce.return_date,": ",Q.returned_at||"Not Returned"]}),_.jsxs("div",{className:"loan-history-card-detail",children:[Ce.delivery_status,": ",Q.book_state||"N/A"]})]},Q.id))})]}),s==="return"&&_.jsxs("div",{className:"mt-6",children:[_.jsx("div",{className:"mt-4",children:_.jsxs("select",{value:M||"",onChange:Q=>{const le=Q.target.value;k(le);const se=R.find(Se=>Se.qr_code===le);se&&(y(se),B(se.delivery_status||""))},className:"w-full p-2 border rounded",style:{borderColor:Tt.coral},children:[_.jsx("option",{value:"",children:Ce.Select_Book}),R.map(Q=>_.jsx("option",{value:Q.qr_code,children:Q.title},Q.qr_code))]})}),_.jsxs("div",{className:"mt-4",children:[_.jsxs("button",{className:"w-full flex items-center justify-center py-2 px-4 rounded text-white",style:{backgroundColor:Tt.coral},onClick:Ue,children:[_.jsx(Ns,{className:"w-4 h-4 mr-2"}),Ce.ScanQR]}),_.jsx("button",{className:"w-full py-2 px-4 rounded text-white mt-2",style:{backgroundColor:Tt.coral},onClick:Wt,disabled:!H,children:Ce.return}),_.jsxs("button",{className:"w-full flex items-center justify-center py-2 px-4 rounded text-white mt-2",style:{backgroundColor:Tt.teal},onClick:()=>Ee(!ae),children:[_.jsx(Qh,{className:"w-4 h-4 mr-2"}),Ce.SendReminders]})]}),_.jsx("div",{className:"flex items-center my-4",children:_.jsxs("label",{className:"ml-4 flex items-center",children:[_.jsx("input",{id:"checkbox_showall",type:"checkbox",checked:$,onChange:Qe,className:"mr-2"}),Ce.ShowAllLoans]})}),ae&&Y.filter(Q=>!Q.returned_at).length>0&&_.jsxs("div",{className:"reminder-section bg-gray-100 p-4 rounded-lg mb-4",children:[_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsx("h3",{className:"text-lg font-semibold",children:"Send Reminders"}),_.jsxs("label",{className:"flex items-center",children:[_.jsx("input",{type:"checkbox",checked:Te.length===Y.filter(Q=>!Q.returned_at).length,onChange:Q=>{if(Q.target.checked){const le=Y.filter(se=>!se.returned_at);U(le)}else U([])},className:"mr-2"}),"Select All"]})]}),_.jsx("button",{className:"w-full py-2 px-4 rounded text-white",style:{backgroundColor:Tt.coral},onClick:Oe,disabled:Te.length===0||pe,children:pe?"Sending...":`Send ${Te.length} Reminders`})]}),Y.length>0&&_.jsx("div",{className:`loan-history-container ${Xe==="he"?"rtl":""}`,children:Y.map(Q=>_.jsxs("div",{className:`loan-history-card ${Q.returned_at?"":"active-loan"} ${Xe==="he"?"rtl":""}`,onClick:()=>{if(!Q.returned_at){console.log("Current loan:",Q),console.log("All borrowed books:",R);const le=R.find(se=>(console.log("Comparing book:",{"loan book_id":Q.book_id,"book id":se.id,match:se.id===Q.book_id}),se.id===Q.book_id));console.log("Matching book result:",le),le?(G(le),k(le.qr_code),y(le),B(le.delivery_status||"")):alert("Book not found in borrowed books."),window.scrollTo({top:0,behavior:"smooth"})}},style:{cursor:"pointer"},children:[ae&&!Q.returned_at&&_.jsx("input",{type:"checkbox",checked:Te.some(le=>le.id===Q.id),onChange:le=>{le.target.checked?U([...Te,Q]):U(Te.filter(se=>se.id!==Q.id)),le.stopPropagation()},className:"mr-2 ml-2 flex-shrink-0"}),_.jsxs("div",{className:"flex-grow",children:[_.jsx("div",{className:"loan-history-card-title",children:Q.book_title}),_.jsxs("div",{className:"loan-history-card-detail",children:[Ce.borrowed_by,": ",Q.borrower_name]}),_.jsxs("div",{className:"loan-history-card-detail",children:[Ce.borrow_date,": ",Q.borrowed_at]}),_.jsxs("div",{className:"loan-history-card-detail",children:[Ce.return_date,": ",Q.returned_at||"Not Returned"]}),_.jsxs("div",{className:"loan-history-card-detail",children:[Ce.delivery_status,": ",Q.book_state||"N/A"]}),_.jsxs("div",{className:"loan-history-card-detail",children:[Ce.last_reminder,": ",Q.last_reminder_date||"No Reminders Sent"]})]})]},Q.id))})]})]})}const Jl=navigator.language||"en-US",ec="https://religious-cherianne-dbprops-ef8ee171.koyeb.app",Mg=async(s="desc",i="title",l=!0)=>{try{const d=new URLSearchParams({order_by:s,sort_column:i,include_history:l.toString()});return(await De.get(`${ec}/api/generate_books_report?${d.toString()}`,{headers:{"Accept-Language":Jl},responseType:"blob"})).data}catch(d){throw console.error("Error generating books report:",d),d}},Dg=async(s="desc",i="title",l=!1)=>{try{const d=new URLSearchParams({order_by:s,sort_column:i,include_borrowed:l.toString()});return(await De.get(`${ec}/api/generate_inventory_report?${d.toString()}`,{headers:{"Accept-Language":Jl},responseType:"blob"})).data}catch(d){throw console.error("Error generating inventory report:",d),d}},Pg=()=>{const{language:s,toggleLanguage:i}=Sr(),l=Ir(s),[d,c]=O.useState(!1),[h,x]=O.useState(!0),[b,w]=O.useState("desc"),[p,A]=O.useState(""),[y,P]=O.useState(""),B={inventory:[{value:"title",label:l.book_title},{value:"author",label:l.author},{value:"id",label:l.id},{value:"loan_status",label:l.loan_status}],loans:[{value:"title",label:l.book_title},{value:"author",label:l.author},{value:"id",label:l.id}]},R=async()=>{try{let T;y==="inventory"?T=await Dg(b,p,h):y==="loans"&&(T=await Mg(b,p,d));const M=window.URL.createObjectURL(new Blob([T])),k=document.createElement("a");k.href=M,k.setAttribute("download",`${y}_report.xlsx`),document.body.appendChild(k),k.click()}catch(T){console.error("Error generating report:",T),alert(l.error_generating_report)}};return _.jsxs("div",{className:`report-container ${s==="he"?"rtl":""}`,children:[_.jsx("button",{className:"w-12 h-12 flex items-center justify-center rounded-full border border-teal-500 bg-white text-teal-500 shadow-md absolute top-4 left-4",onClick:i,children:s==="en"?"HE":"EN"}),_.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[_.jsxs("div",{className:"flex items-center justify-center mb-4",children:[_.jsx(qh,{className:"w-6 h-6 mr-2 text-teal-500"}),_.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l.reports})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[_.jsxs("h3",{className:"text-md font-semibold text-teal-600 mb-3 flex items-center",children:[_.jsx(Kh,{className:"w-4 h-4 mr-2"}),l.select_report_type]}),_.jsx("div",{className:"space-y-2",children:["inventory","loans"].map(T=>_.jsx("button",{onClick:()=>P(T),className:`w-full p-2 rounded-lg text-left text-sm ${y===T?"bg-teal-500 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:T==="inventory"?l.inventory_report:l.loans_report},T))})]}),_.jsx("div",{className:`bg-white p-4 rounded-lg border border-gray-100 ${y?"":"opacity-50 pointer-events-none"}`,children:y&&_.jsxs("div",{className:"space-y-3",children:[_.jsxs("h3",{className:"text-md font-semibold text-teal-600 mb-3 flex items-center",children:[_.jsx($h,{className:"w-4 h-4 mr-2"}),l.report_options]}),_.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[y==="loans"&&_.jsxs("div",{className:"flex items-center col-span-2",children:[_.jsx("input",{type:"checkbox",checked:d,onChange:T=>c(T.target.checked),className:"mr-2"}),_.jsx("label",{children:l.include_history})]}),y==="inventory"&&_.jsxs("div",{className:"flex items-center col-span-2",children:[_.jsx("input",{type:"checkbox",checked:h,onChange:T=>x(T.target.checked),className:"mr-2"}),_.jsx("label",{children:l.include_borrowed})]}),_.jsxs("div",{className:"flex flex-col",children:[_.jsx("label",{children:l.sort_by}),_.jsxs("select",{value:p,onChange:T=>A(T.target.value),className:"border rounded-md",children:[_.jsx("option",{value:"",children:l.select_field}),B[y].map(T=>_.jsx("option",{value:T.value,children:T.label},T.value))]})]}),_.jsxs("div",{className:"flex flex-col",children:[_.jsx("label",{children:l.order}),_.jsxs("select",{value:b,onChange:T=>w(T.target.value),className:"border rounded-md",children:[_.jsx("option",{value:"asc",children:l.ascending}),_.jsx("option",{value:"desc",children:l.descending})]})]})]}),_.jsxs("button",{onClick:R,disabled:!p,className:"w-full p-2 bg-teal-500 text-white rounded-md",children:[_.jsx(Zh,{className:"w-4 h-4 mr-2"}),l.generate_report_button]})]})})]})]})]})};function gn(s,i,{checkForDefaultPrevented:l=!0}={}){return function(c){if(s==null||s(c),l===!1||!c.defaultPrevented)return i==null?void 0:i(c)}}function Bg(s,i=[]){let l=[];function d(h,x){const b=O.createContext(x),w=l.length;l=[...l,x];const p=y=>{var k;const{scope:P,children:B,...R}=y,T=((k=P==null?void 0:P[s])==null?void 0:k[w])||b,M=O.useMemo(()=>R,Object.values(R));return _.jsx(T.Provider,{value:M,children:B})};p.displayName=h+"Provider";function A(y,P){var T;const B=((T=P==null?void 0:P[s])==null?void 0:T[w])||b,R=O.useContext(B);if(R)return R;if(x!==void 0)return x;throw new Error(`\`${y}\` must be used within \`${h}\``)}return[p,A]}const c=()=>{const h=l.map(x=>O.createContext(x));return function(b){const w=(b==null?void 0:b[s])||h;return O.useMemo(()=>({[`__scope${s}`]:{...b,[s]:w}}),[b,w])}};return c.scopeName=s,[d,Lg(c,...i)]}function Lg(...s){const i=s[0];if(s.length===1)return i;const l=()=>{const d=s.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(h){const x=d.reduce((b,{useScope:w,scopeName:p})=>{const y=w(h)[`__scope${p}`];return{...b,...y}},{});return O.useMemo(()=>({[`__scope${i.scopeName}`]:x}),[x])}};return l.scopeName=i.scopeName,l}function kg(s,i=[]){let l=[];function d(h,x){const b=O.createContext(x),w=l.length;l=[...l,x];function p(y){const{scope:P,children:B,...R}=y,T=(P==null?void 0:P[s][w])||b,M=O.useMemo(()=>R,Object.values(R));return _.jsx(T.Provider,{value:M,children:B})}function A(y,P){const B=(P==null?void 0:P[s][w])||b,R=O.useContext(B);if(R)return R;if(x!==void 0)return x;throw new Error(`\`${y}\` must be used within \`${h}\``)}return p.displayName=h+"Provider",[p,A]}const c=()=>{const h=l.map(x=>O.createContext(x));return function(b){const w=(b==null?void 0:b[s])||h;return O.useMemo(()=>({[`__scope${s}`]:{...b,[s]:w}}),[b,w])}};return c.scopeName=s,[d,Fg(c,...i)]}function Fg(...s){const i=s[0];if(s.length===1)return i;const l=()=>{const d=s.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(h){const x=d.reduce((b,{useScope:w,scopeName:p})=>{const y=w(h)[`__scope${p}`];return{...b,...y}},{});return O.useMemo(()=>({[`__scope${i.scopeName}`]:x}),[x])}};return l.scopeName=i.scopeName,l}function Vg(s,i){typeof s=="function"?s(i):s!=null&&(s.current=i)}function tc(...s){return i=>s.forEach(l=>Vg(l,i))}function di(...s){return O.useCallback(tc(...s),s)}var fi=O.forwardRef((s,i)=>{const{children:l,...d}=s,c=O.Children.toArray(l),h=c.find(Hg);if(h){const x=h.props.children,b=c.map(w=>w===h?O.Children.count(x)>1?O.Children.only(null):O.isValidElement(x)?x.props.children:null:w);return _.jsx(Ds,{...d,ref:i,children:O.isValidElement(x)?O.cloneElement(x,void 0,b):null})}return _.jsx(Ds,{...d,ref:i,children:l})});fi.displayName="Slot";var Ds=O.forwardRef((s,i)=>{const{children:l,...d}=s;if(O.isValidElement(l)){const c=Wg(l);return O.cloneElement(l,{...jg(d,l.props),ref:i?tc(i,c):c})}return O.Children.count(l)>1?O.Children.only(null):null});Ds.displayName="SlotClone";var Ug=({children:s})=>_.jsx(_.Fragment,{children:s});function Hg(s){return O.isValidElement(s)&&s.type===Ug}function jg(s,i){const l={...i};for(const d in i){const c=s[d],h=i[d];/^on[A-Z]/.test(d)?c&&h?l[d]=(...b)=>{h(...b),c(...b)}:c&&(l[d]=c):d==="style"?l[d]={...c,...h}:d==="className"&&(l[d]=[c,h].filter(Boolean).join(" "))}return{...s,...l}}function Wg(s){var d,c;let i=(d=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:d.get,l=i&&"isReactWarning"in i&&i.isReactWarning;return l?s.ref:(i=(c=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:c.get,l=i&&"isReactWarning"in i&&i.isReactWarning,l?s.props.ref:s.props.ref||s.ref)}function Gg(s){const i=s+"CollectionProvider",[l,d]=kg(i),[c,h]=l(i,{collectionRef:{current:null},itemMap:new Map}),x=B=>{const{scope:R,children:T}=B,M=Dn.useRef(null),k=Dn.useRef(new Map).current;return _.jsx(c,{scope:R,itemMap:k,collectionRef:M,children:T})};x.displayName=i;const b=s+"CollectionSlot",w=Dn.forwardRef((B,R)=>{const{scope:T,children:M}=B,k=h(b,T),H=di(R,k.collectionRef);return _.jsx(fi,{ref:H,children:M})});w.displayName=b;const p=s+"CollectionItemSlot",A="data-radix-collection-item",y=Dn.forwardRef((B,R)=>{const{scope:T,children:M,...k}=B,H=Dn.useRef(null),G=di(R,H),Y=h(p,T);return Dn.useEffect(()=>(Y.itemMap.set(H,{ref:H,...k}),()=>void Y.itemMap.delete(H))),_.jsx(fi,{[A]:"",ref:G,children:M})});y.displayName=p;function P(B){const R=h(s+"CollectionConsumer",B);return Dn.useCallback(()=>{const M=R.collectionRef.current;if(!M)return[];const k=Array.from(M.querySelectorAll(`[${A}]`));return Array.from(R.itemMap.values()).sort((Y,re)=>k.indexOf(Y.ref.current)-k.indexOf(re.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:x,Slot:w,ItemSlot:y},P,d]}function Xg(s,i=[]){let l=[];function d(h,x){const b=O.createContext(x),w=l.length;l=[...l,x];function p(y){const{scope:P,children:B,...R}=y,T=(P==null?void 0:P[s][w])||b,M=O.useMemo(()=>R,Object.values(R));return _.jsx(T.Provider,{value:M,children:B})}function A(y,P){const B=(P==null?void 0:P[s][w])||b,R=O.useContext(B);if(R)return R;if(x!==void 0)return x;throw new Error(`\`${y}\` must be used within \`${h}\``)}return p.displayName=h+"Provider",[p,A]}const c=()=>{const h=l.map(x=>O.createContext(x));return function(b){const w=(b==null?void 0:b[s])||h;return O.useMemo(()=>({[`__scope${s}`]:{...b,[s]:w}}),[b,w])}};return c.scopeName=s,[d,zg(c,...i)]}function zg(...s){const i=s[0];if(s.length===1)return i;const l=()=>{const d=s.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(h){const x=d.reduce((b,{useScope:w,scopeName:p})=>{const y=w(h)[`__scope${p}`];return{...b,...y}},{});return O.useMemo(()=>({[`__scope${i.scopeName}`]:x}),[x])}};return l.scopeName=i.scopeName,l}var Ps=globalThis!=null&&globalThis.document?O.useLayoutEffect:()=>{},Yg=gs.useId||(()=>{}),qg=0;function nc(s){const[i,l]=O.useState(Yg());return Ps(()=>{s||l(d=>d??String(qg++))},[s]),s||(i?`radix-${i}`:"")}var Zg=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],er=Zg.reduce((s,i)=>{const l=O.forwardRef((d,c)=>{const{asChild:h,...x}=d,b=h?fi:i;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(b,{...x,ref:c})});return l.displayName=`Primitive.${i}`,{...s,[i]:l}},{});function no(s){const i=O.useRef(s);return O.useEffect(()=>{i.current=s}),O.useMemo(()=>(...l)=>{var d;return(d=i.current)==null?void 0:d.call(i,...l)},[])}function rc({prop:s,defaultProp:i,onChange:l=()=>{}}){const[d,c]=Kg({defaultProp:i,onChange:l}),h=s!==void 0,x=h?s:d,b=no(l),w=O.useCallback(p=>{if(h){const y=typeof p=="function"?p(s):p;y!==s&&b(y)}else c(p)},[h,s,c,b]);return[x,w]}function Kg({defaultProp:s,onChange:i}){const l=O.useState(s),[d]=l,c=O.useRef(d),h=no(i);return O.useEffect(()=>{c.current!==d&&(h(d),c.current=d)},[d,c,h]),l}var $g=O.createContext(void 0);function ic(s){const i=O.useContext($g);return s||i||"ltr"}var hs="rovingFocusGroup.onEntryFocus",Qg={bubbles:!1,cancelable:!0},Pi="RovingFocusGroup",[Bs,sc,Jg]=Gg(Pi),[e2,oc]=Xg(Pi,[Jg]),[t2,n2]=e2(Pi),ac=O.forwardRef((s,i)=>_.jsx(Bs.Provider,{scope:s.__scopeRovingFocusGroup,children:_.jsx(Bs.Slot,{scope:s.__scopeRovingFocusGroup,children:_.jsx(r2,{...s,ref:i})})}));ac.displayName=Pi;var r2=O.forwardRef((s,i)=>{const{__scopeRovingFocusGroup:l,orientation:d,loop:c=!1,dir:h,currentTabStopId:x,defaultCurrentTabStopId:b,onCurrentTabStopIdChange:w,onEntryFocus:p,preventScrollOnEntryFocus:A=!1,...y}=s,P=O.useRef(null),B=di(i,P),R=ic(h),[T=null,M]=rc({prop:x,defaultProp:b,onChange:w}),[k,H]=O.useState(!1),G=no(p),Y=sc(l),re=O.useRef(!1),[$,L]=O.useState(0);return O.useEffect(()=>{const K=P.current;if(K)return K.addEventListener(hs,G),()=>K.removeEventListener(hs,G)},[G]),_.jsx(t2,{scope:l,orientation:d,dir:R,loop:c,currentTabStopId:T,onItemFocus:O.useCallback(K=>M(K),[M]),onItemShiftTab:O.useCallback(()=>H(!0),[]),onFocusableItemAdd:O.useCallback(()=>L(K=>K+1),[]),onFocusableItemRemove:O.useCallback(()=>L(K=>K-1),[]),children:_.jsx(er.div,{tabIndex:k||$===0?-1:0,"data-orientation":d,...y,ref:B,style:{outline:"none",...s.style},onMouseDown:gn(s.onMouseDown,()=>{re.current=!0}),onFocus:gn(s.onFocus,K=>{const z=!re.current;if(K.target===K.currentTarget&&z&&!k){const Ve=new CustomEvent(hs,Qg);if(K.currentTarget.dispatchEvent(Ve),!Ve.defaultPrevented){const Ae=Y().filter(pe=>pe.focusable),ae=Ae.find(pe=>pe.active),Ee=Ae.find(pe=>pe.id===T),U=[ae,Ee,...Ae].filter(Boolean).map(pe=>pe.ref.current);uc(U,A)}}re.current=!1}),onBlur:gn(s.onBlur,()=>H(!1))})})}),lc="RovingFocusGroupItem",cc=O.forwardRef((s,i)=>{const{__scopeRovingFocusGroup:l,focusable:d=!0,active:c=!1,tabStopId:h,...x}=s,b=nc(),w=h||b,p=n2(lc,l),A=p.currentTabStopId===w,y=sc(l),{onFocusableItemAdd:P,onFocusableItemRemove:B}=p;return O.useEffect(()=>{if(d)return P(),()=>B()},[d,P,B]),_.jsx(Bs.ItemSlot,{scope:l,id:w,focusable:d,active:c,children:_.jsx(er.span,{tabIndex:A?0:-1,"data-orientation":p.orientation,...x,ref:i,onMouseDown:gn(s.onMouseDown,R=>{d?p.onItemFocus(w):R.preventDefault()}),onFocus:gn(s.onFocus,()=>p.onItemFocus(w)),onKeyDown:gn(s.onKeyDown,R=>{if(R.key==="Tab"&&R.shiftKey){p.onItemShiftTab();return}if(R.target!==R.currentTarget)return;const T=o2(R,p.orientation,p.dir);if(T!==void 0){if(R.metaKey||R.ctrlKey||R.altKey||R.shiftKey)return;R.preventDefault();let k=y().filter(H=>H.focusable).map(H=>H.ref.current);if(T==="last")k.reverse();else if(T==="prev"||T==="next"){T==="prev"&&k.reverse();const H=k.indexOf(R.currentTarget);k=p.loop?a2(k,H+1):k.slice(H+1)}setTimeout(()=>uc(k))}})})})});cc.displayName=lc;var i2={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function s2(s,i){return i!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function o2(s,i,l){const d=s2(s.key,l);if(!(i==="vertical"&&["ArrowLeft","ArrowRight"].includes(d))&&!(i==="horizontal"&&["ArrowUp","ArrowDown"].includes(d)))return i2[d]}function uc(s,i=!1){const l=document.activeElement;for(const d of s)if(d===l||(d.focus({preventScroll:i}),document.activeElement!==l))return}function a2(s,i){return s.map((l,d)=>s[(i+d)%s.length])}var l2=ac,c2=cc;function u2(s,i){return O.useReducer((l,d)=>i[l][d]??l,s)}var dc=s=>{const{present:i,children:l}=s,d=d2(i),c=typeof l=="function"?l({present:d.isPresent}):O.Children.only(l),h=di(d.ref,f2(c));return typeof l=="function"||d.isPresent?O.cloneElement(c,{ref:h}):null};dc.displayName="Presence";function d2(s){const[i,l]=O.useState(),d=O.useRef({}),c=O.useRef(s),h=O.useRef("none"),x=s?"mounted":"unmounted",[b,w]=u2(x,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return O.useEffect(()=>{const p=Xr(d.current);h.current=b==="mounted"?p:"none"},[b]),Ps(()=>{const p=d.current,A=c.current;if(A!==s){const P=h.current,B=Xr(p);s?w("MOUNT"):B==="none"||(p==null?void 0:p.display)==="none"?w("UNMOUNT"):w(A&&P!==B?"ANIMATION_OUT":"UNMOUNT"),c.current=s}},[s,w]),Ps(()=>{if(i){let p;const A=i.ownerDocument.defaultView??window,y=B=>{const T=Xr(d.current).includes(B.animationName);if(B.target===i&&T&&(w("ANIMATION_END"),!c.current)){const M=i.style.animationFillMode;i.style.animationFillMode="forwards",p=A.setTimeout(()=>{i.style.animationFillMode==="forwards"&&(i.style.animationFillMode=M)})}},P=B=>{B.target===i&&(h.current=Xr(d.current))};return i.addEventListener("animationstart",P),i.addEventListener("animationcancel",y),i.addEventListener("animationend",y),()=>{A.clearTimeout(p),i.removeEventListener("animationstart",P),i.removeEventListener("animationcancel",y),i.removeEventListener("animationend",y)}}else w("ANIMATION_END")},[i,w]),{isPresent:["mounted","unmountSuspended"].includes(b),ref:O.useCallback(p=>{p&&(d.current=getComputedStyle(p)),l(p)},[])}}function Xr(s){return(s==null?void 0:s.animationName)||"none"}function f2(s){var d,c;let i=(d=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:d.get,l=i&&"isReactWarning"in i&&i.isReactWarning;return l?s.ref:(i=(c=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:c.get,l=i&&"isReactWarning"in i&&i.isReactWarning,l?s.props.ref:s.props.ref||s.ref)}var ro="Tabs",[h2,b2]=Bg(ro,[oc]),fc=oc(),[g2,io]=h2(ro),hc=O.forwardRef((s,i)=>{const{__scopeTabs:l,value:d,onValueChange:c,defaultValue:h,orientation:x="horizontal",dir:b,activationMode:w="automatic",...p}=s,A=ic(b),[y,P]=rc({prop:d,onChange:c,defaultProp:h});return _.jsx(g2,{scope:l,baseId:nc(),value:y,onValueChange:P,orientation:x,dir:A,activationMode:w,children:_.jsx(er.div,{dir:A,"data-orientation":x,...p,ref:i})})});hc.displayName=ro;var gc="TabsList",xc=O.forwardRef((s,i)=>{const{__scopeTabs:l,loop:d=!0,...c}=s,h=io(gc,l),x=fc(l);return _.jsx(l2,{asChild:!0,...x,orientation:h.orientation,dir:h.dir,loop:d,children:_.jsx(er.div,{role:"tablist","aria-orientation":h.orientation,...c,ref:i})})});xc.displayName=gc;var pc="TabsTrigger",pr=O.forwardRef((s,i)=>{const{__scopeTabs:l,value:d,disabled:c=!1,...h}=s,x=io(pc,l),b=fc(l),w=wc(x.baseId,d),p=bc(x.baseId,d),A=d===x.value;return _.jsx(c2,{asChild:!0,...b,focusable:!c,active:A,children:_.jsx(er.button,{type:"button",role:"tab","aria-selected":A,"aria-controls":p,"data-state":A?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:w,...h,ref:i,onMouseDown:gn(s.onMouseDown,y=>{!c&&y.button===0&&y.ctrlKey===!1?x.onValueChange(d):y.preventDefault()}),onKeyDown:gn(s.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&x.onValueChange(d)}),onFocus:gn(s.onFocus,()=>{const y=x.activationMode!=="manual";!A&&!c&&y&&x.onValueChange(d)})})})});pr.displayName=pc;var mc="TabsContent",mr=O.forwardRef((s,i)=>{const{__scopeTabs:l,value:d,forceMount:c,children:h,...x}=s,b=io(mc,l),w=wc(b.baseId,d),p=bc(b.baseId,d),A=d===b.value,y=O.useRef(A);return O.useEffect(()=>{const P=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(P)},[]),_.jsx(dc,{present:c||A,children:({present:P})=>_.jsx(er.div,{"data-state":A?"active":"inactive","data-orientation":b.orientation,role:"tabpanel","aria-labelledby":w,hidden:!P,id:p,tabIndex:0,...x,ref:i,style:{...s.style,animationDuration:y.current?"0s":void 0},children:P&&h})})});mr.displayName=mc;function wc(s,i){return`${s}-trigger-${i}`}function bc(s,i){return`${s}-content-${i}`}const x2="/icm_lib/assets/img-Dm6ee46N.png";function p2(){return _.jsx(F1,{children:_.jsx(m2,{})})}function m2(){const{language:s}=Sr(),i=Ir(s);return _.jsxs("div",{className:"app-container min-h-screen bg-blend-screen max-w-md mx-auto",children:[_.jsx("header",{className:"bg-white",children:_.jsxs("div",{className:"max-w-md mx-auto flex items-start justify-items-center p-4",children:[_.jsx("img",{src:x2,alt:"ICM Library Logo",className:"max-h-16 sm:max-h-20"}),_.jsx("div",{className:"logo",children:_.jsx("p",{className:"text-sm text-gray-600",children:i.app_title})})]})}),_.jsx("div",{className:"max-w-md mx-auto",children:_.jsxs(hc,{defaultValue:"inventory",className:"w-full",children:[_.jsxs(xc,{className:"tabs-list w-full bg-white shadow-md rounded-lg grid grid-cols-4",children:[_.jsxs(pr,{value:"inventory",className:"tab-item flex items-center justify-center data-[state=active]:bg-teal-500 data-[state=active]:text-white text-gray-800 py-2 rounded-t-lg hover:bg-gray-100",children:[_.jsx(zh,{className:"w-4 h-4 mr-2"}),i.books]}),_.jsxs(pr,{value:"members",className:"tab-item flex items-center justify-center data-[state=active]:bg-[#FDB813] data-[state=active]:text-white text-gray-800 py-2 rounded-t-lg hover:bg-gray-100",children:[_.jsx(Jh,{className:"w-4 h-4 mr-2"}),i.members]}),_.jsxs(pr,{value:"loans",className:"tab-item flex items-center justify-center data-[state=active]:bg-red-500 data-[state=active]:text-white text-gray-800 py-2 rounded-t-lg hover:bg-gray-100",children:[_.jsx(Ns,{className:"w-4 h-4 mr-2"}),i.loans]}),_.jsxs(pr,{value:"reports",className:"tab-item flex items-center justify-center data-[state=active]:bg-purple-500 data-[state=active]:text-white text-gray-800 py-2 rounded-t-lg hover:bg-gray-100",children:[_.jsx(Yh,{className:"w-4 h-4 mr-2"}),i.reports]})]}),_.jsx(mr,{value:"inventory",children:_.jsx(H1,{})}),_.jsx(mr,{value:"members",children:_.jsx(j1,{})}),_.jsx(mr,{value:"loans",children:_.jsx(Rg,{})}),_.jsx(mr,{value:"reports",children:_.jsx(Pg,{})})]})})]})}Na(document.getElementById("root")).render(_.jsx(O.StrictMode,{children:_.jsx(p2,{})}));
